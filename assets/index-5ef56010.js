var Vx=Object.defineProperty;var Wx=(n,e,t)=>e in n?Vx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>(Wx(n,typeof e!="symbol"?e+"":e,t),t),ev=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var l=(n,e,t)=>(ev(n,e,"read from private field"),t?t.call(n):e.get(n)),p=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},_=(n,e,t,i)=>(ev(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);var Ut=(n,e,t,i)=>({set _(s){_(n,e,s,t)},get _(){return l(n,e,i)}}),A=(n,e,t)=>(ev(n,e,"access private method"),t);function Gx(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function JA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ZA={exports:{}},wm={},eE={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.element"),Xx=Symbol.for("react.portal"),Yx=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),Kx=Symbol.for("react.profiler"),Qx=Symbol.for("react.provider"),Jx=Symbol.for("react.context"),Zx=Symbol.for("react.forward_ref"),eC=Symbol.for("react.suspense"),tC=Symbol.for("react.memo"),nC=Symbol.for("react.lazy"),s_=Symbol.iterator;function iC(n){return n===null||typeof n!="object"?null:(n=s_&&n[s_]||n["@@iterator"],typeof n=="function"?n:null)}var tE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nE=Object.assign,iE={};function ql(n,e,t){this.props=n,this.context=e,this.refs=iE,this.updater=t||tE}ql.prototype.isReactComponent={};ql.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ql.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function sE(){}sE.prototype=ql.prototype;function q0(n,e,t){this.props=n,this.context=e,this.refs=iE,this.updater=t||tE}var K0=q0.prototype=new sE;K0.constructor=q0;nE(K0,ql.prototype);K0.isPureReactComponent=!0;var r_=Array.isArray,rE=Object.prototype.hasOwnProperty,Q0={current:null},oE={key:!0,ref:!0,__self:!0,__source:!0};function aE(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)rE.call(e,i)&&!oE.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Pd,type:n,key:r,ref:o,props:s,_owner:Q0.current}}function sC(n,e){return{$$typeof:Pd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function J0(n){return typeof n=="object"&&n!==null&&n.$$typeof===Pd}function rC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var o_=/\/+/g;function tv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?rC(""+n.key):e.toString(36)}function pf(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Pd:case Xx:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+tv(o,0):i,r_(s)?(t="",n!=null&&(t=n.replace(o_,"$&/")+"/"),pf(s,e,t,"",function(u){return u})):s!=null&&(J0(s)&&(s=sC(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(o_,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",r_(n))for(var a=0;a<n.length;a++){r=n[a];var c=i+tv(r,a);o+=pf(r,e,t,c,s)}else if(c=iC(n),typeof c=="function")for(n=c.call(n),a=0;!(r=n.next()).done;)r=r.value,c=i+tv(r,a++),o+=pf(r,e,t,c,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vd(n,e,t){if(n==null)return n;var i=[],s=0;return pf(n,i,"","",function(r){return e.call(t,r,s++)}),i}function oC(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Tt={current:null},gf={transition:null},aC={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:gf,ReactCurrentOwner:Q0};function lE(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Vd,forEach:function(n,e,t){Vd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Vd(n,function(){e++}),e},toArray:function(n){return Vd(n,function(e){return e})||[]},only:function(n){if(!J0(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Q.Component=ql;Q.Fragment=Yx;Q.Profiler=Kx;Q.PureComponent=q0;Q.StrictMode=qx;Q.Suspense=eC;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC;Q.act=lE;Q.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=nE({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Q0.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)rE.call(e,c)&&!oE.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Pd,type:n.type,key:s,ref:r,props:i,_owner:o}};Q.createContext=function(n){return n={$$typeof:Jx,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Qx,_context:n},n.Consumer=n};Q.createElement=aE;Q.createFactory=function(n){var e=aE.bind(null,n);return e.type=n,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(n){return{$$typeof:Zx,render:n}};Q.isValidElement=J0;Q.lazy=function(n){return{$$typeof:nC,_payload:{_status:-1,_result:n},_init:oC}};Q.memo=function(n,e){return{$$typeof:tC,type:n,compare:e===void 0?null:e}};Q.startTransition=function(n){var e=gf.transition;gf.transition={};try{n()}finally{gf.transition=e}};Q.unstable_act=lE;Q.useCallback=function(n,e){return Tt.current.useCallback(n,e)};Q.useContext=function(n){return Tt.current.useContext(n)};Q.useDebugValue=function(){};Q.useDeferredValue=function(n){return Tt.current.useDeferredValue(n)};Q.useEffect=function(n,e){return Tt.current.useEffect(n,e)};Q.useId=function(){return Tt.current.useId()};Q.useImperativeHandle=function(n,e,t){return Tt.current.useImperativeHandle(n,e,t)};Q.useInsertionEffect=function(n,e){return Tt.current.useInsertionEffect(n,e)};Q.useLayoutEffect=function(n,e){return Tt.current.useLayoutEffect(n,e)};Q.useMemo=function(n,e){return Tt.current.useMemo(n,e)};Q.useReducer=function(n,e,t){return Tt.current.useReducer(n,e,t)};Q.useRef=function(n){return Tt.current.useRef(n)};Q.useState=function(n){return Tt.current.useState(n)};Q.useSyncExternalStore=function(n,e,t){return Tt.current.useSyncExternalStore(n,e,t)};Q.useTransition=function(){return Tt.current.useTransition()};Q.version="18.3.1";eE.exports=Q;var P=eE.exports;const nr=JA(P),lC=Gx({__proto__:null,default:nr},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC=P,uC=Symbol.for("react.element"),hC=Symbol.for("react.fragment"),dC=Object.prototype.hasOwnProperty,fC=cC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pC={key:!0,ref:!0,__self:!0,__source:!0};function cE(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)dC.call(e,i)&&!pC.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:uC,type:n,key:r,ref:o,props:s,_owner:fC.current}}wm.Fragment=hC;wm.jsx=cE;wm.jsxs=cE;ZA.exports=wm;var k=ZA.exports,Fv={},uE={exports:{}},sn={},hE={exports:{}},dE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,z){var B=L.length;L.push(z);e:for(;0<B;){var se=B-1>>>1,X=L[se];if(0<s(X,z))L[se]=z,L[B]=X,B=se;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var z=L[0],B=L.pop();if(B!==z){L[0]=B;e:for(var se=0,X=L.length,ce=X>>>1;se<ce;){var Ie=2*(se+1)-1,Ze=L[Ie],Ae=Ie+1,re=L[Ae];if(0>s(Ze,B))Ae<X&&0>s(re,Ze)?(L[se]=re,L[Ae]=B,se=Ae):(L[se]=Ze,L[Ie]=B,se=Ie);else if(Ae<X&&0>s(re,B))L[se]=re,L[Ae]=B,se=Ae;else break e}}return z}function s(L,z){var B=L.sortIndex-z.sortIndex;return B!==0?B:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,g=!1,m=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(L){for(var z=t(u);z!==null;){if(z.callback===null)i(u);else if(z.startTime<=L)i(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(u)}}function b(L){if(w=!1,E(L),!m)if(t(c)!==null)m=!0,J(x);else{var z=t(u);z!==null&&N(b,z.startTime-L)}}function x(L,z){m=!1,w&&(w=!1,v(R),R=-1),g=!0;var B=f;try{for(E(z),d=t(c);d!==null&&(!(d.expirationTime>z)||L&&!F());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var X=se(d.expirationTime<=z);z=n.unstable_now(),typeof X=="function"?d.callback=X:d===t(c)&&i(c),E(z)}else i(c);d=t(c)}if(d!==null)var ce=!0;else{var Ie=t(u);Ie!==null&&N(b,Ie.startTime-z),ce=!1}return ce}finally{d=null,f=B,g=!1}}var C=!1,T=null,R=-1,I=5,M=-1;function F(){return!(n.unstable_now()-M<I)}function Y(){if(T!==null){var L=n.unstable_now();M=L;var z=!0;try{z=T(!0,L)}finally{z?V():(C=!1,T=null)}}else C=!1}var V;if(typeof y=="function")V=function(){y(Y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,K=U.port2;U.port1.onmessage=Y,V=function(){K.postMessage(null)}}else V=function(){S(Y,0)};function J(L){T=L,C||(C=!0,V())}function N(L,z){R=S(function(){L(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,J(x))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(L){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var B=f;f=z;try{return L()}finally{f=B}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=f;f=L;try{return z()}finally{f=B}},n.unstable_scheduleCallback=function(L,z,B){var se=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?se+B:se):B=se,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,L={id:h++,callback:z,priorityLevel:L,startTime:B,expirationTime:X,sortIndex:-1},B>se?(L.sortIndex=B,e(u,L),t(c)===null&&L===t(u)&&(w?(v(R),R=-1):w=!0,N(b,B-se))):(L.sortIndex=X,e(c,L),m||g||(m=!0,J(x))),L},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(L){var z=f;return function(){var B=f;f=z;try{return L.apply(this,arguments)}finally{f=B}}}})(dE);hE.exports=dE;var gC=hE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=P,nn=gC;function D(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fE=new Set,Wc={};function zo(n,e){Hl(n,e),Hl(n+"Capture",e)}function Hl(n,e){for(Wc[n]=e,n=0;n<e.length;n++)fE.add(e[n])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nv=Object.prototype.hasOwnProperty,vC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a_={},l_={};function yC(n){return Nv.call(l_,n)?!0:Nv.call(a_,n)?!1:vC.test(n)?l_[n]=!0:(a_[n]=!0,!1)}function wC(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _C(n,e,t,i){if(e===null||typeof e>"u"||wC(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ut[n]=new Pt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ut[e]=new Pt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ut[n]=new Pt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ut[n]=new Pt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ut[n]=new Pt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ut[n]=new Pt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ut[n]=new Pt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ut[n]=new Pt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ut[n]=new Pt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Z0=/[\-:]([a-z])/g;function ew(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Z0,ew);ut[e]=new Pt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Z0,ew);ut[e]=new Pt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Z0,ew);ut[e]=new Pt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ut[n]=new Pt(n,1,!1,n.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ut[n]=new Pt(n,1,!1,n.toLowerCase(),null,!0,!0)});function tw(n,e,t,i){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_C(e,t,s,i)&&(t=null),i||s===null?yC(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ss=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wd=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),nw=Symbol.for("react.strict_mode"),Ov=Symbol.for("react.profiler"),pE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),iw=Symbol.for("react.forward_ref"),jv=Symbol.for("react.suspense"),zv=Symbol.for("react.suspense_list"),sw=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),mE=Symbol.for("react.offscreen"),c_=Symbol.iterator;function nc(n){return n===null||typeof n!="object"?null:(n=c_&&n[c_]||n["@@iterator"],typeof n=="function"?n:null)}var xe=Object.assign,nv;function fc(n){if(nv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);nv=e&&e[1]||""}return`
`+nv+n}var iv=!1;function sv(n,e){if(!n||iv)return"";iv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{iv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?fc(n):""}function AC(n){switch(n.tag){case 5:return fc(n.type);case 16:return fc("Lazy");case 13:return fc("Suspense");case 19:return fc("SuspenseList");case 0:case 2:case 15:return n=sv(n.type,!1),n;case 11:return n=sv(n.type.render,!1),n;case 1:return n=sv(n.type,!0),n;default:return""}}function Hv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ea:return"Fragment";case Zo:return"Portal";case Ov:return"Profiler";case nw:return"StrictMode";case jv:return"Suspense";case zv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case gE:return(n.displayName||"Context")+".Consumer";case pE:return(n._context.displayName||"Context")+".Provider";case iw:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sw:return e=n.displayName||null,e!==null?e:Hv(n.type)||"Memo";case cs:e=n._payload,n=n._init;try{return Hv(n(e))}catch{}}return null}function EC(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hv(e);case 8:return e===nw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zs(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SC(n){var e=vE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Gd(n){n._valueTracker||(n._valueTracker=SC(n))}function yE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=vE(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Zf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bv(n,e){var t=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function u_(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Zs(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wE(n,e){e=e.checked,e!=null&&tw(n,"checked",e,!1)}function Uv(n,e){wE(n,e);var t=Zs(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?$v(n,e.type,t):e.hasOwnProperty("defaultValue")&&$v(n,e.type,Zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function h_(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function $v(n,e,t){(e!=="number"||Zf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var pc=Array.isArray;function da(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Zs(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Vv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function d_(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(D(92));if(pc(t)){if(1<t.length)throw Error(D(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Zs(t)}}function _E(n,e){var t=Zs(e.value),i=Zs(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function f_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function AE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?AE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xd,EE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Xd=Xd||document.createElement("div"),Xd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Gc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bC=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(n){bC.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ic[e]=Ic[n]})});function SE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ic.hasOwnProperty(n)&&Ic[n]?(""+e).trim():e+"px"}function bE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=SE(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var xC=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gv(n,e){if(e){if(xC[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Xv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yv=null;function rw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qv=null,fa=null,pa=null;function p_(n){if(n=Md(n)){if(typeof qv!="function")throw Error(D(280));var e=n.stateNode;e&&(e=bm(e),qv(n.stateNode,n.type,e))}}function xE(n){fa?pa?pa.push(n):pa=[n]:fa=n}function CE(){if(fa){var n=fa,e=pa;if(pa=fa=null,p_(n),e)for(n=0;n<e.length;n++)p_(e[n])}}function kE(n,e){return n(e)}function TE(){}var rv=!1;function PE(n,e,t){if(rv)return n(e,t);rv=!0;try{return kE(n,e,t)}finally{rv=!1,(fa!==null||pa!==null)&&(TE(),CE())}}function Xc(n,e){var t=n.stateNode;if(t===null)return null;var i=bm(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(D(231,e,typeof t));return t}var Kv=!1;if(es)try{var ic={};Object.defineProperty(ic,"passive",{get:function(){Kv=!0}}),window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{Kv=!1}function CC(n,e,t,i,s,r,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Dc=!1,ep=null,tp=!1,Qv=null,kC={onError:function(n){Dc=!0,ep=n}};function TC(n,e,t,i,s,r,o,a,c){Dc=!1,ep=null,CC.apply(kC,arguments)}function PC(n,e,t,i,s,r,o,a,c){if(TC.apply(this,arguments),Dc){if(Dc){var u=ep;Dc=!1,ep=null}else throw Error(D(198));tp||(tp=!0,Qv=u)}}function Ho(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function RE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function g_(n){if(Ho(n)!==n)throw Error(D(188))}function RC(n){var e=n.alternate;if(!e){if(e=Ho(n),e===null)throw Error(D(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return g_(s),n;if(r===i)return g_(s),e;r=r.sibling}throw Error(D(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(t.alternate!==i)throw Error(D(190))}if(t.tag!==3)throw Error(D(188));return t.stateNode.current===t?n:e}function LE(n){return n=RC(n),n!==null?ME(n):null}function ME(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ME(n);if(e!==null)return e;n=n.sibling}return null}var IE=nn.unstable_scheduleCallback,m_=nn.unstable_cancelCallback,LC=nn.unstable_shouldYield,MC=nn.unstable_requestPaint,Le=nn.unstable_now,IC=nn.unstable_getCurrentPriorityLevel,ow=nn.unstable_ImmediatePriority,DE=nn.unstable_UserBlockingPriority,np=nn.unstable_NormalPriority,DC=nn.unstable_LowPriority,FE=nn.unstable_IdlePriority,_m=null,ui=null;function FC(n){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(_m,n,void 0,(n.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:jC,NC=Math.log,OC=Math.LN2;function jC(n){return n>>>=0,n===0?32:31-(NC(n)/OC|0)|0}var Yd=64,qd=4194304;function gc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ip(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=gc(a):(r&=o,r!==0&&(i=gc(r)))}else o=t&~s,o!==0?i=gc(o):r!==0&&(i=gc(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-On(e),s=1<<t,i|=n[t],e&=~s;return i}function zC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HC(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-On(r),a=1<<o,c=s[o];c===-1?(!(a&t)||a&i)&&(s[o]=zC(a,e)):c<=e&&(n.expiredLanes|=a),r&=~a}}function Jv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function NE(){var n=Yd;return Yd<<=1,!(Yd&4194240)&&(Yd=64),n}function ov(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Rd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-On(e),n[e]=t}function BC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-On(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function aw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-On(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var le=0;function OE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var jE,lw,zE,HE,BE,Zv=!1,Kd=[],Vs=null,Ws=null,Gs=null,Yc=new Map,qc=new Map,hs=[],UC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v_(n,e){switch(n){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function sc(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Md(e),e!==null&&lw(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function $C(n,e,t,i,s){switch(e){case"focusin":return Vs=sc(Vs,n,e,t,i,s),!0;case"dragenter":return Ws=sc(Ws,n,e,t,i,s),!0;case"mouseover":return Gs=sc(Gs,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Yc.set(r,sc(Yc.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,qc.set(r,sc(qc.get(r)||null,n,e,t,i,s)),!0}return!1}function UE(n){var e=vr(n.target);if(e!==null){var t=Ho(e);if(t!==null){if(e=t.tag,e===13){if(e=RE(t),e!==null){n.blockedOn=e,BE(n.priority,function(){zE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ey(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Yv=i,t.target.dispatchEvent(i),Yv=null}else return e=Md(t),e!==null&&lw(e),n.blockedOn=t,!1;e.shift()}return!0}function y_(n,e,t){mf(n)&&t.delete(e)}function VC(){Zv=!1,Vs!==null&&mf(Vs)&&(Vs=null),Ws!==null&&mf(Ws)&&(Ws=null),Gs!==null&&mf(Gs)&&(Gs=null),Yc.forEach(y_),qc.forEach(y_)}function rc(n,e){n.blockedOn===e&&(n.blockedOn=null,Zv||(Zv=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,VC)))}function Kc(n){function e(s){return rc(s,n)}if(0<Kd.length){rc(Kd[0],n);for(var t=1;t<Kd.length;t++){var i=Kd[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Vs!==null&&rc(Vs,n),Ws!==null&&rc(Ws,n),Gs!==null&&rc(Gs,n),Yc.forEach(e),qc.forEach(e),t=0;t<hs.length;t++)i=hs[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<hs.length&&(t=hs[0],t.blockedOn===null);)UE(t),t.blockedOn===null&&hs.shift()}var ga=ss.ReactCurrentBatchConfig,sp=!0;function WC(n,e,t,i){var s=le,r=ga.transition;ga.transition=null;try{le=1,cw(n,e,t,i)}finally{le=s,ga.transition=r}}function GC(n,e,t,i){var s=le,r=ga.transition;ga.transition=null;try{le=4,cw(n,e,t,i)}finally{le=s,ga.transition=r}}function cw(n,e,t,i){if(sp){var s=ey(n,e,t,i);if(s===null)mv(n,e,i,rp,t),v_(n,i);else if($C(s,n,e,t,i))i.stopPropagation();else if(v_(n,i),e&4&&-1<UC.indexOf(n)){for(;s!==null;){var r=Md(s);if(r!==null&&jE(r),r=ey(n,e,t,i),r===null&&mv(n,e,i,rp,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else mv(n,e,i,null,t)}}var rp=null;function ey(n,e,t,i){if(rp=null,n=rw(i),n=vr(n),n!==null)if(e=Ho(n),e===null)n=null;else if(t=e.tag,t===13){if(n=RE(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return rp=n,null}function $E(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IC()){case ow:return 1;case DE:return 4;case np:case DC:return 16;case FE:return 536870912;default:return 16}default:return 16}}var Bs=null,uw=null,vf=null;function VE(){if(vf)return vf;var n,e=uw,t=e.length,i,s="value"in Bs?Bs.value:Bs.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return vf=s.slice(n,1<i?1-i:void 0)}function yf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Qd(){return!0}function w_(){return!1}function rn(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Qd:w_,this.isPropagationStopped=w_,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Qd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Qd)},persist:function(){},isPersistent:Qd}),e}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hw=rn(Kl),Ld=xe({},Kl,{view:0,detail:0}),XC=rn(Ld),av,lv,oc,Am=xe({},Ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==oc&&(oc&&n.type==="mousemove"?(av=n.screenX-oc.screenX,lv=n.screenY-oc.screenY):lv=av=0,oc=n),av)},movementY:function(n){return"movementY"in n?n.movementY:lv}}),__=rn(Am),YC=xe({},Am,{dataTransfer:0}),qC=rn(YC),KC=xe({},Ld,{relatedTarget:0}),cv=rn(KC),QC=xe({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),JC=rn(QC),ZC=xe({},Kl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ek=rn(ZC),tk=xe({},Kl,{data:0}),A_=rn(tk),nk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=sk[n])?!!e[n]:!1}function dw(){return rk}var ok=xe({},Ld,{key:function(n){if(n.key){var e=nk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=yf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ik[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dw,charCode:function(n){return n.type==="keypress"?yf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ak=rn(ok),lk=xe({},Am,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E_=rn(lk),ck=xe({},Ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dw}),uk=rn(ck),hk=xe({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),dk=rn(hk),fk=xe({},Am,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),pk=rn(fk),gk=[9,13,27,32],fw=es&&"CompositionEvent"in window,Fc=null;es&&"documentMode"in document&&(Fc=document.documentMode);var mk=es&&"TextEvent"in window&&!Fc,WE=es&&(!fw||Fc&&8<Fc&&11>=Fc),S_=String.fromCharCode(32),b_=!1;function GE(n,e){switch(n){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ta=!1;function vk(n,e){switch(n){case"compositionend":return XE(e);case"keypress":return e.which!==32?null:(b_=!0,S_);case"textInput":return n=e.data,n===S_&&b_?null:n;default:return null}}function yk(n,e){if(ta)return n==="compositionend"||!fw&&GE(n,e)?(n=VE(),vf=uw=Bs=null,ta=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WE&&e.locale!=="ko"?null:e.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!wk[n.type]:e==="textarea"}function YE(n,e,t,i){xE(i),e=op(e,"onChange"),0<e.length&&(t=new hw("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Nc=null,Qc=null;function _k(n){rS(n,0)}function Em(n){var e=sa(n);if(yE(e))return n}function Ak(n,e){if(n==="change")return e}var qE=!1;if(es){var uv;if(es){var hv="oninput"in document;if(!hv){var C_=document.createElement("div");C_.setAttribute("oninput","return;"),hv=typeof C_.oninput=="function"}uv=hv}else uv=!1;qE=uv&&(!document.documentMode||9<document.documentMode)}function k_(){Nc&&(Nc.detachEvent("onpropertychange",KE),Qc=Nc=null)}function KE(n){if(n.propertyName==="value"&&Em(Qc)){var e=[];YE(e,Qc,n,rw(n)),PE(_k,e)}}function Ek(n,e,t){n==="focusin"?(k_(),Nc=e,Qc=t,Nc.attachEvent("onpropertychange",KE)):n==="focusout"&&k_()}function Sk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Em(Qc)}function bk(n,e){if(n==="click")return Em(e)}function xk(n,e){if(n==="input"||n==="change")return Em(e)}function Ck(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var zn=typeof Object.is=="function"?Object.is:Ck;function Jc(n,e){if(zn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!Nv.call(e,s)||!zn(n[s],e[s]))return!1}return!0}function T_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function P_(n,e){var t=T_(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=T_(t)}}function QE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?QE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function JE(){for(var n=window,e=Zf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Zf(n.document)}return e}function pw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function kk(n){var e=JE(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&QE(t.ownerDocument.documentElement,t)){if(i!==null&&pw(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=P_(t,r);var o=P_(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Tk=es&&"documentMode"in document&&11>=document.documentMode,na=null,ty=null,Oc=null,ny=!1;function R_(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ny||na==null||na!==Zf(i)||(i=na,"selectionStart"in i&&pw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Oc&&Jc(Oc,i)||(Oc=i,i=op(ty,"onSelect"),0<i.length&&(e=new hw("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=na)))}function Jd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ia={animationend:Jd("Animation","AnimationEnd"),animationiteration:Jd("Animation","AnimationIteration"),animationstart:Jd("Animation","AnimationStart"),transitionend:Jd("Transition","TransitionEnd")},dv={},ZE={};es&&(ZE=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function Sm(n){if(dv[n])return dv[n];if(!ia[n])return n;var e=ia[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in ZE)return dv[n]=e[t];return n}var eS=Sm("animationend"),tS=Sm("animationiteration"),nS=Sm("animationstart"),iS=Sm("transitionend"),sS=new Map,L_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(n,e){sS.set(n,e),zo(e,[n])}for(var fv=0;fv<L_.length;fv++){var pv=L_[fv],Pk=pv.toLowerCase(),Rk=pv[0].toUpperCase()+pv.slice(1);ir(Pk,"on"+Rk)}ir(eS,"onAnimationEnd");ir(tS,"onAnimationIteration");ir(nS,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(iS,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(mc));function M_(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,PC(i,e,void 0,n),n.currentTarget=null}function rS(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==r&&s.isPropagationStopped())break e;M_(s,a,u),r=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==r&&s.isPropagationStopped())break e;M_(s,a,u),r=c}}}if(tp)throw n=Qv,tp=!1,Qv=null,n}function ve(n,e){var t=e[ay];t===void 0&&(t=e[ay]=new Set);var i=n+"__bubble";t.has(i)||(oS(e,n,2,!1),t.add(i))}function gv(n,e,t){var i=0;e&&(i|=4),oS(t,n,i,e)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function Zc(n){if(!n[Zd]){n[Zd]=!0,fE.forEach(function(t){t!=="selectionchange"&&(Lk.has(t)||gv(t,!1,n),gv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Zd]||(e[Zd]=!0,gv("selectionchange",!1,e))}}function oS(n,e,t,i){switch($E(e)){case 1:var s=WC;break;case 4:s=GC;break;default:s=cw}t=s.bind(null,e,t,n),s=void 0,!Kv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function mv(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vr(a),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue e}a=a.parentNode}}i=i.return}PE(function(){var u=r,h=rw(t),d=[];e:{var f=sS.get(n);if(f!==void 0){var g=hw,m=n;switch(n){case"keypress":if(yf(t)===0)break e;case"keydown":case"keyup":g=ak;break;case"focusin":m="focus",g=cv;break;case"focusout":m="blur",g=cv;break;case"beforeblur":case"afterblur":g=cv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=__;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=qC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=uk;break;case eS:case tS:case nS:g=JC;break;case iS:g=dk;break;case"scroll":g=XC;break;case"wheel":g=pk;break;case"copy":case"cut":case"paste":g=ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=E_}var w=(e&4)!==0,S=!w&&n==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,E;y!==null;){E=y;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,v!==null&&(b=Xc(y,v),b!=null&&w.push(eu(y,b,E)))),S)break;y=y.return}0<w.length&&(f=new g(f,m,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&t!==Yv&&(m=t.relatedTarget||t.fromElement)&&(vr(m)||m[ts]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=u,m=m?vr(m):null,m!==null&&(S=Ho(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(w=__,b="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(w=E_,b="onPointerLeave",v="onPointerEnter",y="pointer"),S=g==null?f:sa(g),E=m==null?f:sa(m),f=new w(b,y+"leave",g,t,h),f.target=S,f.relatedTarget=E,b=null,vr(h)===u&&(w=new w(v,y+"enter",m,t,h),w.target=E,w.relatedTarget=S,b=w),S=b,g&&m)t:{for(w=g,v=m,y=0,E=w;E;E=Go(E))y++;for(E=0,b=v;b;b=Go(b))E++;for(;0<y-E;)w=Go(w),y--;for(;0<E-y;)v=Go(v),E--;for(;y--;){if(w===v||v!==null&&w===v.alternate)break t;w=Go(w),v=Go(v)}w=null}else w=null;g!==null&&I_(d,f,g,w,!1),m!==null&&S!==null&&I_(d,S,m,w,!0)}}e:{if(f=u?sa(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var x=Ak;else if(x_(f))if(qE)x=xk;else{x=Sk;var C=Ek}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=bk);if(x&&(x=x(n,u))){YE(d,x,t,h);break e}C&&C(n,f,u),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&$v(f,"number",f.value)}switch(C=u?sa(u):window,n){case"focusin":(x_(C)||C.contentEditable==="true")&&(na=C,ty=u,Oc=null);break;case"focusout":Oc=ty=na=null;break;case"mousedown":ny=!0;break;case"contextmenu":case"mouseup":case"dragend":ny=!1,R_(d,t,h);break;case"selectionchange":if(Tk)break;case"keydown":case"keyup":R_(d,t,h)}var T;if(fw)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ta?GE(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(WE&&t.locale!=="ko"&&(ta||R!=="onCompositionStart"?R==="onCompositionEnd"&&ta&&(T=VE()):(Bs=h,uw="value"in Bs?Bs.value:Bs.textContent,ta=!0)),C=op(u,R),0<C.length&&(R=new A_(R,n,null,t,h),d.push({event:R,listeners:C}),T?R.data=T:(T=XE(t),T!==null&&(R.data=T)))),(T=mk?vk(n,t):yk(n,t))&&(u=op(u,"onBeforeInput"),0<u.length&&(h=new A_("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=T))}rS(d,e)})}function eu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function op(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Xc(n,t),r!=null&&i.unshift(eu(n,r,s)),r=Xc(n,e),r!=null&&i.push(eu(n,r,s))),n=n.return}return i}function Go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function I_(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&u!==null&&(a=u,s?(c=Xc(t,r),c!=null&&o.unshift(eu(t,c,a))):s||(c=Xc(t,r),c!=null&&o.push(eu(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Mk=/\r\n?/g,Ik=/\u0000|\uFFFD/g;function D_(n){return(typeof n=="string"?n:""+n).replace(Mk,`
`).replace(Ik,"")}function ef(n,e,t){if(e=D_(e),D_(n)!==e&&t)throw Error(D(425))}function ap(){}var iy=null,sy=null;function ry(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oy=typeof setTimeout=="function"?setTimeout:void 0,Dk=typeof clearTimeout=="function"?clearTimeout:void 0,F_=typeof Promise=="function"?Promise:void 0,Fk=typeof queueMicrotask=="function"?queueMicrotask:typeof F_<"u"?function(n){return F_.resolve(null).then(n).catch(Nk)}:oy;function Nk(n){setTimeout(function(){throw n})}function vv(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),Kc(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);Kc(e)}function Xs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function N_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),ci="__reactFiber$"+Ql,tu="__reactProps$"+Ql,ts="__reactContainer$"+Ql,ay="__reactEvents$"+Ql,Ok="__reactListeners$"+Ql,jk="__reactHandles$"+Ql;function vr(n){var e=n[ci];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ts]||t[ci]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=N_(n);n!==null;){if(t=n[ci])return t;n=N_(n)}return e}n=t,t=n.parentNode}return null}function Md(n){return n=n[ci]||n[ts],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function sa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(D(33))}function bm(n){return n[tu]||null}var ly=[],ra=-1;function sr(n){return{current:n}}function we(n){0>ra||(n.current=ly[ra],ly[ra]=null,ra--)}function me(n,e){ra++,ly[ra]=n.current,n.current=e}var er={},At=sr(er),jt=sr(!1),Ro=er;function Bl(n,e){var t=n.type.contextTypes;if(!t)return er;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function zt(n){return n=n.childContextTypes,n!=null}function lp(){we(jt),we(At)}function O_(n,e,t){if(At.current!==er)throw Error(D(168));me(At,e),me(jt,t)}function aS(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(D(108,EC(n)||"Unknown",s));return xe({},t,i)}function cp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||er,Ro=At.current,me(At,n),me(jt,jt.current),!0}function j_(n,e,t){var i=n.stateNode;if(!i)throw Error(D(169));t?(n=aS(n,e,Ro),i.__reactInternalMemoizedMergedChildContext=n,we(jt),we(At),me(At,n)):we(jt),me(jt,t)}var _i=null,xm=!1,yv=!1;function lS(n){_i===null?_i=[n]:_i.push(n)}function zk(n){xm=!0,lS(n)}function rr(){if(!yv&&_i!==null){yv=!0;var n=0,e=le;try{var t=_i;for(le=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}_i=null,xm=!1}catch(s){throw _i!==null&&(_i=_i.slice(n+1)),IE(ow,rr),s}finally{le=e,yv=!1}}return null}var oa=[],aa=0,up=null,hp=0,dn=[],fn=0,Lo=null,qi=1,Ki="";function ur(n,e){oa[aa++]=hp,oa[aa++]=up,up=n,hp=e}function cS(n,e,t){dn[fn++]=qi,dn[fn++]=Ki,dn[fn++]=Lo,Lo=n;var i=qi;n=Ki;var s=32-On(i)-1;i&=~(1<<s),t+=1;var r=32-On(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,qi=1<<32-On(e)+s|t<<s|i,Ki=r+n}else qi=1<<r|t<<s|i,Ki=n}function gw(n){n.return!==null&&(ur(n,1),cS(n,1,0))}function mw(n){for(;n===up;)up=oa[--aa],oa[aa]=null,hp=oa[--aa],oa[aa]=null;for(;n===Lo;)Lo=dn[--fn],dn[fn]=null,Ki=dn[--fn],dn[fn]=null,qi=dn[--fn],dn[fn]=null}var tn=null,en=null,_e=!1,Nn=null;function uS(n,e){var t=pn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function z_(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,tn=n,en=Xs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,tn=n,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Lo!==null?{id:qi,overflow:Ki}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=pn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,tn=n,en=null,!0):!1;default:return!1}}function cy(n){return(n.mode&1)!==0&&(n.flags&128)===0}function uy(n){if(_e){var e=en;if(e){var t=e;if(!z_(n,e)){if(cy(n))throw Error(D(418));e=Xs(t.nextSibling);var i=tn;e&&z_(n,e)?uS(i,t):(n.flags=n.flags&-4097|2,_e=!1,tn=n)}}else{if(cy(n))throw Error(D(418));n.flags=n.flags&-4097|2,_e=!1,tn=n}}}function H_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;tn=n}function tf(n){if(n!==tn)return!1;if(!_e)return H_(n),_e=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ry(n.type,n.memoizedProps)),e&&(e=en)){if(cy(n))throw hS(),Error(D(418));for(;e;)uS(n,e),e=Xs(e.nextSibling)}if(H_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(D(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){en=Xs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}en=null}}else en=tn?Xs(n.stateNode.nextSibling):null;return!0}function hS(){for(var n=en;n;)n=Xs(n.nextSibling)}function Ul(){en=tn=null,_e=!1}function vw(n){Nn===null?Nn=[n]:Nn.push(n)}var Hk=ss.ReactCurrentBatchConfig;function ac(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(D(309));var i=t.stateNode}if(!i)throw Error(D(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(D(284));if(!t._owner)throw Error(D(290,n))}return n}function nf(n,e){throw n=Object.prototype.toString.call(e),Error(D(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function B_(n){var e=n._init;return e(n._payload)}function dS(n){function e(v,y){if(n){var E=v.deletions;E===null?(v.deletions=[y],v.flags|=16):E.push(y)}}function t(v,y){if(!n)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=Qs(v,y),v.index=0,v.sibling=null,v}function r(v,y,E){return v.index=E,n?(E=v.alternate,E!==null?(E=E.index,E<y?(v.flags|=2,y):E):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,y,E,b){return y===null||y.tag!==6?(y=xv(E,v.mode,b),y.return=v,y):(y=s(y,E),y.return=v,y)}function c(v,y,E,b){var x=E.type;return x===ea?h(v,y,E.props.children,b,E.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===cs&&B_(x)===y.type)?(b=s(y,E.props),b.ref=ac(v,y,E),b.return=v,b):(b=xf(E.type,E.key,E.props,null,v.mode,b),b.ref=ac(v,y,E),b.return=v,b)}function u(v,y,E,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Cv(E,v.mode,b),y.return=v,y):(y=s(y,E.children||[]),y.return=v,y)}function h(v,y,E,b,x){return y===null||y.tag!==7?(y=Po(E,v.mode,b,x),y.return=v,y):(y=s(y,E),y.return=v,y)}function d(v,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xv(""+y,v.mode,E),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wd:return E=xf(y.type,y.key,y.props,null,v.mode,E),E.ref=ac(v,null,y),E.return=v,E;case Zo:return y=Cv(y,v.mode,E),y.return=v,y;case cs:var b=y._init;return d(v,b(y._payload),E)}if(pc(y)||nc(y))return y=Po(y,v.mode,E,null),y.return=v,y;nf(v,y)}return null}function f(v,y,E,b){var x=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return x!==null?null:a(v,y,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wd:return E.key===x?c(v,y,E,b):null;case Zo:return E.key===x?u(v,y,E,b):null;case cs:return x=E._init,f(v,y,x(E._payload),b)}if(pc(E)||nc(E))return x!==null?null:h(v,y,E,b,null);nf(v,E)}return null}function g(v,y,E,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(E)||null,a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wd:return v=v.get(b.key===null?E:b.key)||null,c(y,v,b,x);case Zo:return v=v.get(b.key===null?E:b.key)||null,u(y,v,b,x);case cs:var C=b._init;return g(v,y,E,C(b._payload),x)}if(pc(b)||nc(b))return v=v.get(E)||null,h(y,v,b,x,null);nf(y,b)}return null}function m(v,y,E,b){for(var x=null,C=null,T=y,R=y=0,I=null;T!==null&&R<E.length;R++){T.index>R?(I=T,T=null):I=T.sibling;var M=f(v,T,E[R],b);if(M===null){T===null&&(T=I);break}n&&T&&M.alternate===null&&e(v,T),y=r(M,y,R),C===null?x=M:C.sibling=M,C=M,T=I}if(R===E.length)return t(v,T),_e&&ur(v,R),x;if(T===null){for(;R<E.length;R++)T=d(v,E[R],b),T!==null&&(y=r(T,y,R),C===null?x=T:C.sibling=T,C=T);return _e&&ur(v,R),x}for(T=i(v,T);R<E.length;R++)I=g(T,v,R,E[R],b),I!==null&&(n&&I.alternate!==null&&T.delete(I.key===null?R:I.key),y=r(I,y,R),C===null?x=I:C.sibling=I,C=I);return n&&T.forEach(function(F){return e(v,F)}),_e&&ur(v,R),x}function w(v,y,E,b){var x=nc(E);if(typeof x!="function")throw Error(D(150));if(E=x.call(E),E==null)throw Error(D(151));for(var C=x=null,T=y,R=y=0,I=null,M=E.next();T!==null&&!M.done;R++,M=E.next()){T.index>R?(I=T,T=null):I=T.sibling;var F=f(v,T,M.value,b);if(F===null){T===null&&(T=I);break}n&&T&&F.alternate===null&&e(v,T),y=r(F,y,R),C===null?x=F:C.sibling=F,C=F,T=I}if(M.done)return t(v,T),_e&&ur(v,R),x;if(T===null){for(;!M.done;R++,M=E.next())M=d(v,M.value,b),M!==null&&(y=r(M,y,R),C===null?x=M:C.sibling=M,C=M);return _e&&ur(v,R),x}for(T=i(v,T);!M.done;R++,M=E.next())M=g(T,v,R,M.value,b),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?R:M.key),y=r(M,y,R),C===null?x=M:C.sibling=M,C=M);return n&&T.forEach(function(Y){return e(v,Y)}),_e&&ur(v,R),x}function S(v,y,E,b){if(typeof E=="object"&&E!==null&&E.type===ea&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Wd:e:{for(var x=E.key,C=y;C!==null;){if(C.key===x){if(x=E.type,x===ea){if(C.tag===7){t(v,C.sibling),y=s(C,E.props.children),y.return=v,v=y;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===cs&&B_(x)===C.type){t(v,C.sibling),y=s(C,E.props),y.ref=ac(v,C,E),y.return=v,v=y;break e}t(v,C);break}else e(v,C);C=C.sibling}E.type===ea?(y=Po(E.props.children,v.mode,b,E.key),y.return=v,v=y):(b=xf(E.type,E.key,E.props,null,v.mode,b),b.ref=ac(v,y,E),b.return=v,v=b)}return o(v);case Zo:e:{for(C=E.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){t(v,y.sibling),y=s(y,E.children||[]),y.return=v,v=y;break e}else{t(v,y);break}else e(v,y);y=y.sibling}y=Cv(E,v.mode,b),y.return=v,v=y}return o(v);case cs:return C=E._init,S(v,y,C(E._payload),b)}if(pc(E))return m(v,y,E,b);if(nc(E))return w(v,y,E,b);nf(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(t(v,y.sibling),y=s(y,E),y.return=v,v=y):(t(v,y),y=xv(E,v.mode,b),y.return=v,v=y),o(v)):t(v,y)}return S}var $l=dS(!0),fS=dS(!1),dp=sr(null),fp=null,la=null,yw=null;function ww(){yw=la=fp=null}function _w(n){var e=dp.current;we(dp),n._currentValue=e}function hy(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function ma(n,e){fp=n,yw=la=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Nt=!0),n.firstContext=null)}function mn(n){var e=n._currentValue;if(yw!==n)if(n={context:n,memoizedValue:e,next:null},la===null){if(fp===null)throw Error(D(308));la=n,fp.dependencies={lanes:0,firstContext:n}}else la=la.next=n;return e}var yr=null;function Aw(n){yr===null?yr=[n]:yr.push(n)}function pS(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,Aw(e)):(t.next=s.next,s.next=t),e.interleaved=t,ns(n,i)}function ns(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var us=!1;function Ew(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ys(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ie&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ns(n,t)}return s=i.interleaved,s===null?(e.next=e,Aw(i)):(e.next=s.next,s.next=e),i.interleaved=e,ns(n,t)}function wf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,aw(n,t)}}function U_(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function pp(n,e,t,i){var s=n.updateQueue;us=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,a=r;do{var f=a.lane,g=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,w=a;switch(f=e,g=t,w.tag){case 1:if(m=w.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=w.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=xe({},d,f);break e;case 2:us=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Io|=o,n.lanes=o,n.memoizedState=d}}function $_(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(D(191,s));s.call(i)}}}var Id={},hi=sr(Id),nu=sr(Id),iu=sr(Id);function wr(n){if(n===Id)throw Error(D(174));return n}function Sw(n,e){switch(me(iu,e),me(nu,n),me(hi,Id),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Wv(e,n)}we(hi),me(hi,e)}function Vl(){we(hi),we(nu),we(iu)}function mS(n){wr(iu.current);var e=wr(hi.current),t=Wv(e,n.type);e!==t&&(me(nu,n),me(hi,t))}function bw(n){nu.current===n&&(we(hi),we(nu))}var Se=sr(0);function gp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wv=[];function xw(){for(var n=0;n<wv.length;n++)wv[n]._workInProgressVersionPrimary=null;wv.length=0}var _f=ss.ReactCurrentDispatcher,_v=ss.ReactCurrentBatchConfig,Mo=0,be=null,$e=null,Qe=null,mp=!1,jc=!1,su=0,Bk=0;function dt(){throw Error(D(321))}function Cw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!zn(n[t],e[t]))return!1;return!0}function kw(n,e,t,i,s,r){if(Mo=r,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_f.current=n===null||n.memoizedState===null?Wk:Gk,n=t(i,s),jc){r=0;do{if(jc=!1,su=0,25<=r)throw Error(D(301));r+=1,Qe=$e=null,e.updateQueue=null,_f.current=Xk,n=t(i,s)}while(jc)}if(_f.current=vp,e=$e!==null&&$e.next!==null,Mo=0,Qe=$e=be=null,mp=!1,e)throw Error(D(300));return n}function Tw(){var n=su!==0;return su=0,n}function $n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=n:Qe=Qe.next=n,Qe}function vn(){if($e===null){var n=be.alternate;n=n!==null?n.memoizedState:null}else n=$e.next;var e=Qe===null?be.memoizedState:Qe.next;if(e!==null)Qe=e,$e=n;else{if(n===null)throw Error(D(310));$e=n,n={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Qe===null?be.memoizedState=Qe=n:Qe=Qe.next=n}return Qe}function ru(n,e){return typeof e=="function"?e(n):e}function Av(n){var e=vn(),t=e.queue;if(t===null)throw Error(D(311));t.lastRenderedReducer=n;var i=$e,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,c=null,u=r;do{var h=u.lane;if((Mo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=i):c=c.next=d,be.lanes|=h,Io|=h}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=a,zn(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,be.lanes|=r,Io|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ev(n){var e=vn(),t=e.queue;if(t===null)throw Error(D(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);zn(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function vS(){}function yS(n,e){var t=be,i=vn(),s=e(),r=!zn(i.memoizedState,s);if(r&&(i.memoizedState=s,Nt=!0),i=i.queue,Pw(AS.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||Qe!==null&&Qe.memoizedState.tag&1){if(t.flags|=2048,ou(9,_S.bind(null,t,i,s,e),void 0,null),Je===null)throw Error(D(349));Mo&30||wS(t,e,s)}return s}function wS(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function _S(n,e,t,i){e.value=t,e.getSnapshot=i,ES(e)&&SS(n)}function AS(n,e,t){return t(function(){ES(e)&&SS(n)})}function ES(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!zn(n,t)}catch{return!0}}function SS(n){var e=ns(n,1);e!==null&&jn(e,n,1,-1)}function V_(n){var e=$n();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:n},e.queue=n,n=n.dispatch=Vk.bind(null,be,n),[e.memoizedState,n]}function ou(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function bS(){return vn().memoizedState}function Af(n,e,t,i){var s=$n();be.flags|=n,s.memoizedState=ou(1|e,t,void 0,i===void 0?null:i)}function Cm(n,e,t,i){var s=vn();i=i===void 0?null:i;var r=void 0;if($e!==null){var o=$e.memoizedState;if(r=o.destroy,i!==null&&Cw(i,o.deps)){s.memoizedState=ou(e,t,r,i);return}}be.flags|=n,s.memoizedState=ou(1|e,t,r,i)}function W_(n,e){return Af(8390656,8,n,e)}function Pw(n,e){return Cm(2048,8,n,e)}function xS(n,e){return Cm(4,2,n,e)}function CS(n,e){return Cm(4,4,n,e)}function kS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function TS(n,e,t){return t=t!=null?t.concat([n]):null,Cm(4,4,kS.bind(null,e,n),t)}function Rw(){}function PS(n,e){var t=vn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Cw(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function RS(n,e){var t=vn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Cw(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function LS(n,e,t){return Mo&21?(zn(t,e)||(t=NE(),be.lanes|=t,Io|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Nt=!0),n.memoizedState=t)}function Uk(n,e){var t=le;le=t!==0&&4>t?t:4,n(!0);var i=_v.transition;_v.transition={};try{n(!1),e()}finally{le=t,_v.transition=i}}function MS(){return vn().memoizedState}function $k(n,e,t){var i=Ks(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},IS(n))DS(e,t);else if(t=pS(n,e,t,i),t!==null){var s=kt();jn(t,n,i,s),FS(t,e,i)}}function Vk(n,e,t){var i=Ks(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(IS(n))DS(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,zn(a,o)){var c=e.interleaved;c===null?(s.next=s,Aw(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=pS(n,e,s,i),t!==null&&(s=kt(),jn(t,n,i,s),FS(t,e,i))}}function IS(n){var e=n.alternate;return n===be||e!==null&&e===be}function DS(n,e){jc=mp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function FS(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,aw(n,t)}}var vp={readContext:mn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Wk={readContext:mn,useCallback:function(n,e){return $n().memoizedState=[n,e===void 0?null:e],n},useContext:mn,useEffect:W_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Af(4194308,4,kS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Af(4194308,4,n,e)},useInsertionEffect:function(n,e){return Af(4,2,n,e)},useMemo:function(n,e){var t=$n();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=$n();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=$k.bind(null,be,n),[i.memoizedState,n]},useRef:function(n){var e=$n();return n={current:n},e.memoizedState=n},useState:V_,useDebugValue:Rw,useDeferredValue:function(n){return $n().memoizedState=n},useTransition:function(){var n=V_(!1),e=n[0];return n=Uk.bind(null,n[1]),$n().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=be,s=$n();if(_e){if(t===void 0)throw Error(D(407));t=t()}else{if(t=e(),Je===null)throw Error(D(349));Mo&30||wS(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,W_(AS.bind(null,i,r,n),[n]),i.flags|=2048,ou(9,_S.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=$n(),e=Je.identifierPrefix;if(_e){var t=Ki,i=qi;t=(i&~(1<<32-On(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=su++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Bk++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Gk={readContext:mn,useCallback:PS,useContext:mn,useEffect:Pw,useImperativeHandle:TS,useInsertionEffect:xS,useLayoutEffect:CS,useMemo:RS,useReducer:Av,useRef:bS,useState:function(){return Av(ru)},useDebugValue:Rw,useDeferredValue:function(n){var e=vn();return LS(e,$e.memoizedState,n)},useTransition:function(){var n=Av(ru)[0],e=vn().memoizedState;return[n,e]},useMutableSource:vS,useSyncExternalStore:yS,useId:MS,unstable_isNewReconciler:!1},Xk={readContext:mn,useCallback:PS,useContext:mn,useEffect:Pw,useImperativeHandle:TS,useInsertionEffect:xS,useLayoutEffect:CS,useMemo:RS,useReducer:Ev,useRef:bS,useState:function(){return Ev(ru)},useDebugValue:Rw,useDeferredValue:function(n){var e=vn();return $e===null?e.memoizedState=n:LS(e,$e.memoizedState,n)},useTransition:function(){var n=Ev(ru)[0],e=vn().memoizedState;return[n,e]},useMutableSource:vS,useSyncExternalStore:yS,useId:MS,unstable_isNewReconciler:!1};function _n(n,e){if(n&&n.defaultProps){e=xe({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function dy(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:xe({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var km={isMounted:function(n){return(n=n._reactInternals)?Ho(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=kt(),s=Ks(n),r=Qi(i,s);r.payload=e,t!=null&&(r.callback=t),e=Ys(n,r,s),e!==null&&(jn(e,n,s,i),wf(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=kt(),s=Ks(n),r=Qi(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Ys(n,r,s),e!==null&&(jn(e,n,s,i),wf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=kt(),i=Ks(n),s=Qi(t,i);s.tag=2,e!=null&&(s.callback=e),e=Ys(n,s,i),e!==null&&(jn(e,n,i,t),wf(e,n,i))}};function G_(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Jc(t,i)||!Jc(s,r):!0}function NS(n,e,t){var i=!1,s=er,r=e.contextType;return typeof r=="object"&&r!==null?r=mn(r):(s=zt(e)?Ro:At.current,i=e.contextTypes,r=(i=i!=null)?Bl(n,s):er),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=km,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function X_(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&km.enqueueReplaceState(e,e.state,null)}function fy(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Ew(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=mn(r):(r=zt(e)?Ro:At.current,s.context=Bl(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(dy(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&km.enqueueReplaceState(s,s.state,null),pp(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Wl(n,e){try{var t="",i=e;do t+=AC(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function Sv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function py(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Yk=typeof WeakMap=="function"?WeakMap:Map;function OS(n,e,t){t=Qi(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){wp||(wp=!0,by=i),py(n,e)},t}function jS(n,e,t){t=Qi(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){py(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){py(n,e),typeof i!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Y_(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new Yk;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=lT.bind(null,n,e,t),e.then(n,n))}function q_(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function K_(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qi(-1,1),e.tag=2,Ys(t,e,1))),t.lanes|=1),n)}var qk=ss.ReactCurrentOwner,Nt=!1;function xt(n,e,t,i){e.child=n===null?fS(e,null,t,i):$l(e,n.child,t,i)}function Q_(n,e,t,i,s){t=t.render;var r=e.ref;return ma(e,s),i=kw(n,e,t,i,r,s),t=Tw(),n!==null&&!Nt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,is(n,e,s)):(_e&&t&&gw(e),e.flags|=1,xt(n,e,i,s),e.child)}function J_(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!jw(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,zS(n,e,r,i,s)):(n=xf(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Jc,t(o,i)&&n.ref===e.ref)return is(n,e,s)}return e.flags|=1,n=Qs(r,i),n.ref=e.ref,n.return=e,e.child=n}function zS(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Jc(r,i)&&n.ref===e.ref)if(Nt=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Nt=!0);else return e.lanes=n.lanes,is(n,e,s)}return gy(n,e,t,i,s)}function HS(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(ua,Zt),Zt|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,me(ua,Zt),Zt|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,me(ua,Zt),Zt|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,me(ua,Zt),Zt|=i;return xt(n,e,s,t),e.child}function BS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function gy(n,e,t,i,s){var r=zt(t)?Ro:At.current;return r=Bl(e,r),ma(e,s),t=kw(n,e,t,i,r,s),i=Tw(),n!==null&&!Nt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,is(n,e,s)):(_e&&i&&gw(e),e.flags|=1,xt(n,e,t,s),e.child)}function Z_(n,e,t,i,s){if(zt(t)){var r=!0;cp(e)}else r=!1;if(ma(e,s),e.stateNode===null)Ef(n,e),NS(e,t,i),fy(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=mn(u):(u=zt(t)?Ro:At.current,u=Bl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||c!==u)&&X_(e,o,i,u),us=!1;var f=e.memoizedState;o.state=f,pp(e,i,o,s),c=e.memoizedState,a!==i||f!==c||jt.current||us?(typeof h=="function"&&(dy(e,t,h,i),c=e.memoizedState),(a=us||G_(e,t,a,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,gS(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:_n(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=mn(c):(c=zt(t)?Ro:At.current,c=Bl(e,c));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&X_(e,o,i,c),us=!1,f=e.memoizedState,o.state=f,pp(e,i,o,s);var m=e.memoizedState;a!==d||f!==m||jt.current||us?(typeof g=="function"&&(dy(e,t,g,i),m=e.memoizedState),(u=us||G_(e,t,u,i,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return my(n,e,t,i,r,s)}function my(n,e,t,i,s,r){BS(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&j_(e,t,!1),is(n,e,r);i=e.stateNode,qk.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=$l(e,n.child,null,r),e.child=$l(e,null,a,r)):xt(n,e,a,r),e.memoizedState=i.state,s&&j_(e,t,!0),e.child}function US(n){var e=n.stateNode;e.pendingContext?O_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&O_(n,e.context,!1),Sw(n,e.containerInfo)}function eA(n,e,t,i,s){return Ul(),vw(s),e.flags|=256,xt(n,e,t,i),e.child}var vy={dehydrated:null,treeContext:null,retryLane:0};function yy(n){return{baseLanes:n,cachePool:null,transitions:null}}function $S(n,e,t){var i=e.pendingProps,s=Se.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),me(Se,s&1),n===null)return uy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Rm(o,i,0,null),n=Po(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=yy(t),e.memoizedState=vy,n):Lw(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Kk(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Qs(s,c),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Qs(a,r):(r=Po(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?yy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=vy,i}return r=n.child,n=r.sibling,i=Qs(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Lw(n,e){return e=Rm({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function sf(n,e,t,i){return i!==null&&vw(i),$l(e,n.child,null,t),n=Lw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Kk(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=Sv(Error(D(422))),sf(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Rm({mode:"visible",children:i.children},s,0,null),r=Po(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&$l(e,n.child,null,o),e.child.memoizedState=yy(o),e.memoizedState=vy,r);if(!(e.mode&1))return sf(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(D(419)),i=Sv(r,i,void 0),sf(n,e,o,i)}if(a=(o&n.childLanes)!==0,Nt||a){if(i=Je,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ns(n,s),jn(i,n,s,-1))}return Ow(),i=Sv(Error(D(421))),sf(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=cT.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,en=Xs(s.nextSibling),tn=e,_e=!0,Nn=null,n!==null&&(dn[fn++]=qi,dn[fn++]=Ki,dn[fn++]=Lo,qi=n.id,Ki=n.overflow,Lo=e),e=Lw(e,i.children),e.flags|=4096,e)}function tA(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),hy(n.return,e,t)}function bv(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function VS(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(xt(n,e,i.children,t),i=Se.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tA(n,t,e);else if(n.tag===19)tA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(me(Se,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&gp(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),bv(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&gp(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}bv(e,!0,t,null,r);break;case"together":bv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ef(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function is(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Io|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(D(153));if(e.child!==null){for(n=e.child,t=Qs(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Qs(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Qk(n,e,t){switch(e.tag){case 3:US(e),Ul();break;case 5:mS(e);break;case 1:zt(e.type)&&cp(e);break;case 4:Sw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;me(dp,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(me(Se,Se.current&1),e.flags|=128,null):t&e.child.childLanes?$S(n,e,t):(me(Se,Se.current&1),n=is(n,e,t),n!==null?n.sibling:null);me(Se,Se.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return VS(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(Se,Se.current),i)break;return null;case 22:case 23:return e.lanes=0,HS(n,e,t)}return is(n,e,t)}var WS,wy,GS,XS;WS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wy=function(){};GS=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,wr(hi.current);var r=null;switch(t){case"input":s=Bv(n,s),i=Bv(n,i),r=[];break;case"select":s=xe({},s,{value:void 0}),i=xe({},i,{value:void 0}),r=[];break;case"textarea":s=Vv(n,s),i=Vv(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=ap)}Gv(t,i);var o;t=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(a=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",n),r||a===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};XS=function(n,e,t,i){t!==i&&(e.flags|=4)};function lc(n,e){if(!_e)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ft(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function Jk(n,e,t){var i=e.pendingProps;switch(mw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return zt(e.type)&&lp(),ft(e),null;case 3:return i=e.stateNode,Vl(),we(jt),we(At),xw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(tf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(ky(Nn),Nn=null))),wy(n,e),ft(e),null;case 5:bw(e);var s=wr(iu.current);if(t=e.type,n!==null&&e.stateNode!=null)GS(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(D(166));return ft(e),null}if(n=wr(hi.current),tf(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[ci]=e,i[tu]=r,n=(e.mode&1)!==0,t){case"dialog":ve("cancel",i),ve("close",i);break;case"iframe":case"object":case"embed":ve("load",i);break;case"video":case"audio":for(s=0;s<mc.length;s++)ve(mc[s],i);break;case"source":ve("error",i);break;case"img":case"image":case"link":ve("error",i),ve("load",i);break;case"details":ve("toggle",i);break;case"input":u_(i,r),ve("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},ve("invalid",i);break;case"textarea":d_(i,r),ve("invalid",i)}Gv(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&ef(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&ef(i.textContent,a,n),s=["children",""+a]):Wc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ve("scroll",i)}switch(t){case"input":Gd(i),h_(i,r,!0);break;case"textarea":Gd(i),f_(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=ap)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=AE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ci]=e,n[tu]=i,WS(n,e,!1,!1),e.stateNode=n;e:{switch(o=Xv(t,i),t){case"dialog":ve("cancel",n),ve("close",n),s=i;break;case"iframe":case"object":case"embed":ve("load",n),s=i;break;case"video":case"audio":for(s=0;s<mc.length;s++)ve(mc[s],n);s=i;break;case"source":ve("error",n),s=i;break;case"img":case"image":case"link":ve("error",n),ve("load",n),s=i;break;case"details":ve("toggle",n),s=i;break;case"input":u_(n,i),s=Bv(n,i),ve("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=xe({},i,{value:void 0}),ve("invalid",n);break;case"textarea":d_(n,i),s=Vv(n,i),ve("invalid",n);break;default:s=i}Gv(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];r==="style"?bE(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&EE(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Gc(n,c):typeof c=="number"&&Gc(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Wc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&ve("scroll",n):c!=null&&tw(n,r,c,o))}switch(t){case"input":Gd(n),h_(n,i,!1);break;case"textarea":Gd(n),f_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Zs(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?da(n,!!i.multiple,r,!1):i.defaultValue!=null&&da(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=ap)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(n&&e.stateNode!=null)XS(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(D(166));if(t=wr(iu.current),wr(hi.current),tf(e)){if(i=e.stateNode,t=e.memoizedProps,i[ci]=e,(r=i.nodeValue!==t)&&(n=tn,n!==null))switch(n.tag){case 3:ef(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ef(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ci]=e,e.stateNode=i}return ft(e),null;case 13:if(we(Se),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_e&&en!==null&&e.mode&1&&!(e.flags&128))hS(),Ul(),e.flags|=98560,r=!1;else if(r=tf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(D(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(D(317));r[ci]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),r=!1}else Nn!==null&&(ky(Nn),Nn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Se.current&1?We===0&&(We=3):Ow())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Vl(),wy(n,e),n===null&&Zc(e.stateNode.containerInfo),ft(e),null;case 10:return _w(e.type._context),ft(e),null;case 17:return zt(e.type)&&lp(),ft(e),null;case 19:if(we(Se),r=e.memoizedState,r===null)return ft(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)lc(r,!1);else{if(We!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=gp(n),o!==null){for(e.flags|=128,lc(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return me(Se,Se.current&1|2),e.child}n=n.sibling}r.tail!==null&&Le()>Gl&&(e.flags|=128,i=!0,lc(r,!1),e.lanes=4194304)}else{if(!i)if(n=gp(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),lc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!_e)return ft(e),null}else 2*Le()-r.renderingStartTime>Gl&&t!==1073741824&&(e.flags|=128,i=!0,lc(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Le(),e.sibling=null,t=Se.current,me(Se,i?t&1|2:t&1),e):(ft(e),null);case 22:case 23:return Nw(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function Zk(n,e){switch(mw(e),e.tag){case 1:return zt(e.type)&&lp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Vl(),we(jt),we(At),xw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return bw(e),null;case 13:if(we(Se),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Ul()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return we(Se),null;case 4:return Vl(),null;case 10:return _w(e.type._context),null;case 22:case 23:return Nw(),null;case 24:return null;default:return null}}var rf=!1,yt=!1,eT=typeof WeakSet=="function"?WeakSet:Set,O=null;function ca(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Te(n,e,i)}else t.current=null}function _y(n,e,t){try{t()}catch(i){Te(n,e,i)}}var nA=!1;function tT(n,e){if(iy=sp,n=JE(),pw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var g;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break t;if(f===t&&++u===s&&(a=o),f===r&&++h===i&&(c=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(sy={focusedElem:n,selectionRange:t},sp=!1,O=e;O!==null;)if(e=O,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,O=n;else for(;O!==null;){e=O;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var w=m.memoizedProps,S=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:_n(e.type,w),S);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(b){Te(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}return m=nA,nA=!1,m}function zc(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&_y(e,t,r)}s=s.next}while(s!==i)}}function Tm(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Ay(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function YS(n){var e=n.alternate;e!==null&&(n.alternate=null,YS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ci],delete e[tu],delete e[ay],delete e[Ok],delete e[jk])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function qS(n){return n.tag===5||n.tag===3||n.tag===4}function iA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ey(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ap));else if(i!==4&&(n=n.child,n!==null))for(Ey(n,e,t),n=n.sibling;n!==null;)Ey(n,e,t),n=n.sibling}function Sy(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Sy(n,e,t),n=n.sibling;n!==null;)Sy(n,e,t),n=n.sibling}var lt=null,Fn=!1;function rs(n,e,t){for(t=t.child;t!==null;)KS(n,e,t),t=t.sibling}function KS(n,e,t){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(_m,t)}catch{}switch(t.tag){case 5:yt||ca(t,e);case 6:var i=lt,s=Fn;lt=null,rs(n,e,t),lt=i,Fn=s,lt!==null&&(Fn?(n=lt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):lt.removeChild(t.stateNode));break;case 18:lt!==null&&(Fn?(n=lt,t=t.stateNode,n.nodeType===8?vv(n.parentNode,t):n.nodeType===1&&vv(n,t),Kc(n)):vv(lt,t.stateNode));break;case 4:i=lt,s=Fn,lt=t.stateNode.containerInfo,Fn=!0,rs(n,e,t),lt=i,Fn=s;break;case 0:case 11:case 14:case 15:if(!yt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&_y(t,e,o),s=s.next}while(s!==i)}rs(n,e,t);break;case 1:if(!yt&&(ca(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Te(t,e,a)}rs(n,e,t);break;case 21:rs(n,e,t);break;case 22:t.mode&1?(yt=(i=yt)||t.memoizedState!==null,rs(n,e,t),yt=i):rs(n,e,t);break;default:rs(n,e,t)}}function sA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new eT),e.forEach(function(i){var s=uT.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function yn(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,Fn=!1;break e;case 3:lt=a.stateNode.containerInfo,Fn=!0;break e;case 4:lt=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(lt===null)throw Error(D(160));KS(r,o,s),lt=null,Fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Te(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QS(e,n),e=e.sibling}function QS(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(yn(e,n),Bn(n),i&4){try{zc(3,n,n.return),Tm(3,n)}catch(w){Te(n,n.return,w)}try{zc(5,n,n.return)}catch(w){Te(n,n.return,w)}}break;case 1:yn(e,n),Bn(n),i&512&&t!==null&&ca(t,t.return);break;case 5:if(yn(e,n),Bn(n),i&512&&t!==null&&ca(t,t.return),n.flags&32){var s=n.stateNode;try{Gc(s,"")}catch(w){Te(n,n.return,w)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&wE(s,r),Xv(a,o);var u=Xv(a,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?bE(s,d):h==="dangerouslySetInnerHTML"?EE(s,d):h==="children"?Gc(s,d):tw(s,h,d,u)}switch(a){case"input":Uv(s,r);break;case"textarea":_E(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?da(s,!!r.multiple,g,!1):f!==!!r.multiple&&(r.defaultValue!=null?da(s,!!r.multiple,r.defaultValue,!0):da(s,!!r.multiple,r.multiple?[]:"",!1))}s[tu]=r}catch(w){Te(n,n.return,w)}}break;case 6:if(yn(e,n),Bn(n),i&4){if(n.stateNode===null)throw Error(D(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(w){Te(n,n.return,w)}}break;case 3:if(yn(e,n),Bn(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Kc(e.containerInfo)}catch(w){Te(n,n.return,w)}break;case 4:yn(e,n),Bn(n);break;case 13:yn(e,n),Bn(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Dw=Le())),i&4&&sA(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(yt=(u=yt)||h,yn(e,n),yt=u):yn(e,n),Bn(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(O=n,h=n.child;h!==null;){for(d=O=h;O!==null;){switch(f=O,g=f.child,f.tag){case 0:case 11:case 14:case 15:zc(4,f,f.return);break;case 1:ca(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(w){Te(i,t,w)}}break;case 5:ca(f,f.return);break;case 22:if(f.memoizedState!==null){oA(d);continue}}g!==null?(g.return=f,O=g):oA(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=SE("display",o))}catch(w){Te(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Te(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yn(e,n),Bn(n),i&4&&sA(n);break;case 21:break;default:yn(e,n),Bn(n)}}function Bn(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(qS(t)){var i=t;break e}t=t.return}throw Error(D(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Gc(s,""),i.flags&=-33);var r=iA(n);Sy(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=iA(n);Ey(n,a,o);break;default:throw Error(D(161))}}catch(c){Te(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function nT(n,e,t){O=n,JS(n)}function JS(n,e,t){for(var i=(n.mode&1)!==0;O!==null;){var s=O,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||rf;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||yt;a=rf;var u=yt;if(rf=o,(yt=c)&&!u)for(O=s;O!==null;)o=O,c=o.child,o.tag===22&&o.memoizedState!==null?aA(s):c!==null?(c.return=o,O=c):aA(s);for(;r!==null;)O=r,JS(r),r=r.sibling;O=s,rf=a,yt=u}rA(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,O=r):rA(n)}}function rA(n){for(;O!==null;){var e=O;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Tm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!yt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:_n(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&$_(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}$_(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Kc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}yt||e.flags&512&&Ay(e)}catch(f){Te(e,e.return,f)}}if(e===n){O=null;break}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}}function oA(n){for(;O!==null;){var e=O;if(e===n){O=null;break}var t=e.sibling;if(t!==null){t.return=e.return,O=t;break}O=e.return}}function aA(n){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Tm(4,e)}catch(c){Te(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){Te(e,s,c)}}var r=e.return;try{Ay(e)}catch(c){Te(e,r,c)}break;case 5:var o=e.return;try{Ay(e)}catch(c){Te(e,o,c)}}}catch(c){Te(e,e.return,c)}if(e===n){O=null;break}var a=e.sibling;if(a!==null){a.return=e.return,O=a;break}O=e.return}}var iT=Math.ceil,yp=ss.ReactCurrentDispatcher,Mw=ss.ReactCurrentOwner,gn=ss.ReactCurrentBatchConfig,ie=0,Je=null,Oe=null,ct=0,Zt=0,ua=sr(0),We=0,au=null,Io=0,Pm=0,Iw=0,Hc=null,Ft=null,Dw=0,Gl=1/0,mi=null,wp=!1,by=null,qs=null,of=!1,Us=null,_p=0,Bc=0,xy=null,Sf=-1,bf=0;function kt(){return ie&6?Le():Sf!==-1?Sf:Sf=Le()}function Ks(n){return n.mode&1?ie&2&&ct!==0?ct&-ct:Hk.transition!==null?(bf===0&&(bf=NE()),bf):(n=le,n!==0||(n=window.event,n=n===void 0?16:$E(n.type)),n):1}function jn(n,e,t,i){if(50<Bc)throw Bc=0,xy=null,Error(D(185));Rd(n,t,i),(!(ie&2)||n!==Je)&&(n===Je&&(!(ie&2)&&(Pm|=t),We===4&&ds(n,ct)),Ht(n,i),t===1&&ie===0&&!(e.mode&1)&&(Gl=Le()+500,xm&&rr()))}function Ht(n,e){var t=n.callbackNode;HC(n,e);var i=ip(n,n===Je?ct:0);if(i===0)t!==null&&m_(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&m_(t),e===1)n.tag===0?zk(lA.bind(null,n)):lS(lA.bind(null,n)),Fk(function(){!(ie&6)&&rr()}),t=null;else{switch(OE(i)){case 1:t=ow;break;case 4:t=DE;break;case 16:t=np;break;case 536870912:t=FE;break;default:t=np}t=o1(t,ZS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function ZS(n,e){if(Sf=-1,bf=0,ie&6)throw Error(D(327));var t=n.callbackNode;if(va()&&n.callbackNode!==t)return null;var i=ip(n,n===Je?ct:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Ap(n,i);else{e=i;var s=ie;ie|=2;var r=t1();(Je!==n||ct!==e)&&(mi=null,Gl=Le()+500,To(n,e));do try{oT();break}catch(a){e1(n,a)}while(1);ww(),yp.current=r,ie=s,Oe!==null?e=0:(Je=null,ct=0,e=We)}if(e!==0){if(e===2&&(s=Jv(n),s!==0&&(i=s,e=Cy(n,s))),e===1)throw t=au,To(n,0),ds(n,i),Ht(n,Le()),t;if(e===6)ds(n,i);else{if(s=n.current.alternate,!(i&30)&&!sT(s)&&(e=Ap(n,i),e===2&&(r=Jv(n),r!==0&&(i=r,e=Cy(n,r))),e===1))throw t=au,To(n,0),ds(n,i),Ht(n,Le()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(D(345));case 2:hr(n,Ft,mi);break;case 3:if(ds(n,i),(i&130023424)===i&&(e=Dw+500-Le(),10<e)){if(ip(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){kt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=oy(hr.bind(null,n,Ft,mi),e);break}hr(n,Ft,mi);break;case 4:if(ds(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-On(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Le()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*iT(i/1960))-i,10<i){n.timeoutHandle=oy(hr.bind(null,n,Ft,mi),i);break}hr(n,Ft,mi);break;case 5:hr(n,Ft,mi);break;default:throw Error(D(329))}}}return Ht(n,Le()),n.callbackNode===t?ZS.bind(null,n):null}function Cy(n,e){var t=Hc;return n.current.memoizedState.isDehydrated&&(To(n,e).flags|=256),n=Ap(n,e),n!==2&&(e=Ft,Ft=t,e!==null&&ky(e)),n}function ky(n){Ft===null?Ft=n:Ft.push.apply(Ft,n)}function sT(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!zn(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(n,e){for(e&=~Iw,e&=~Pm,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-On(e),i=1<<t;n[t]=-1,e&=~i}}function lA(n){if(ie&6)throw Error(D(327));va();var e=ip(n,0);if(!(e&1))return Ht(n,Le()),null;var t=Ap(n,e);if(n.tag!==0&&t===2){var i=Jv(n);i!==0&&(e=i,t=Cy(n,i))}if(t===1)throw t=au,To(n,0),ds(n,e),Ht(n,Le()),t;if(t===6)throw Error(D(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,hr(n,Ft,mi),Ht(n,Le()),null}function Fw(n,e){var t=ie;ie|=1;try{return n(e)}finally{ie=t,ie===0&&(Gl=Le()+500,xm&&rr())}}function Do(n){Us!==null&&Us.tag===0&&!(ie&6)&&va();var e=ie;ie|=1;var t=gn.transition,i=le;try{if(gn.transition=null,le=1,n)return n()}finally{le=i,gn.transition=t,ie=e,!(ie&6)&&rr()}}function Nw(){Zt=ua.current,we(ua)}function To(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Dk(t)),Oe!==null)for(t=Oe.return;t!==null;){var i=t;switch(mw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&lp();break;case 3:Vl(),we(jt),we(At),xw();break;case 5:bw(i);break;case 4:Vl();break;case 13:we(Se);break;case 19:we(Se);break;case 10:_w(i.type._context);break;case 22:case 23:Nw()}t=t.return}if(Je=n,Oe=n=Qs(n.current,null),ct=Zt=e,We=0,au=null,Iw=Pm=Io=0,Ft=Hc=null,yr!==null){for(e=0;e<yr.length;e++)if(t=yr[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}yr=null}return n}function e1(n,e){do{var t=Oe;try{if(ww(),_f.current=vp,mp){for(var i=be.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}mp=!1}if(Mo=0,Qe=$e=be=null,jc=!1,su=0,Mw.current=null,t===null||t.return===null){We=1,au=e,Oe=null;break}e:{var r=n,o=t.return,a=t,c=e;if(e=ct,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=q_(o);if(g!==null){g.flags&=-257,K_(g,o,a,r,e),g.mode&1&&Y_(r,u,e),e=g,c=u;var m=e.updateQueue;if(m===null){var w=new Set;w.add(c),e.updateQueue=w}else m.add(c);break e}else{if(!(e&1)){Y_(r,u,e),Ow();break e}c=Error(D(426))}}else if(_e&&a.mode&1){var S=q_(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),K_(S,o,a,r,e),vw(Wl(c,a));break e}}r=c=Wl(c,a),We!==4&&(We=2),Hc===null?Hc=[r]:Hc.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=OS(r,c,e);U_(r,v);break e;case 1:a=c;var y=r.type,E=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(qs===null||!qs.has(E)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=jS(r,a,e);U_(r,b);break e}}r=r.return}while(r!==null)}i1(t)}catch(x){e=x,Oe===t&&t!==null&&(Oe=t=t.return);continue}break}while(1)}function t1(){var n=yp.current;return yp.current=vp,n===null?vp:n}function Ow(){(We===0||We===3||We===2)&&(We=4),Je===null||!(Io&268435455)&&!(Pm&268435455)||ds(Je,ct)}function Ap(n,e){var t=ie;ie|=2;var i=t1();(Je!==n||ct!==e)&&(mi=null,To(n,e));do try{rT();break}catch(s){e1(n,s)}while(1);if(ww(),ie=t,yp.current=i,Oe!==null)throw Error(D(261));return Je=null,ct=0,We}function rT(){for(;Oe!==null;)n1(Oe)}function oT(){for(;Oe!==null&&!LC();)n1(Oe)}function n1(n){var e=r1(n.alternate,n,Zt);n.memoizedProps=n.pendingProps,e===null?i1(n):Oe=e,Mw.current=null}function i1(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Zk(t,e),t!==null){t.flags&=32767,Oe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{We=6,Oe=null;return}}else if(t=Jk(t,e,Zt),t!==null){Oe=t;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=n}while(e!==null);We===0&&(We=5)}function hr(n,e,t){var i=le,s=gn.transition;try{gn.transition=null,le=1,aT(n,e,t,i)}finally{gn.transition=s,le=i}return null}function aT(n,e,t,i){do va();while(Us!==null);if(ie&6)throw Error(D(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(D(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(BC(n,r),n===Je&&(Oe=Je=null,ct=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||of||(of=!0,o1(np,function(){return va(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=gn.transition,gn.transition=null;var o=le;le=1;var a=ie;ie|=4,Mw.current=null,tT(n,t),QS(t,n),kk(sy),sp=!!iy,sy=iy=null,n.current=t,nT(t),MC(),ie=a,le=o,gn.transition=r}else n.current=t;if(of&&(of=!1,Us=n,_p=s),r=n.pendingLanes,r===0&&(qs=null),FC(t.stateNode),Ht(n,Le()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(wp)throw wp=!1,n=by,by=null,n;return _p&1&&n.tag!==0&&va(),r=n.pendingLanes,r&1?n===xy?Bc++:(Bc=0,xy=n):Bc=0,rr(),null}function va(){if(Us!==null){var n=OE(_p),e=gn.transition,t=le;try{if(gn.transition=null,le=16>n?16:n,Us===null)var i=!1;else{if(n=Us,Us=null,_p=0,ie&6)throw Error(D(331));var s=ie;for(ie|=4,O=n.current;O!==null;){var r=O,o=r.child;if(O.flags&16){var a=r.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(O=u;O!==null;){var h=O;switch(h.tag){case 0:case 11:case 15:zc(8,h,r)}var d=h.child;if(d!==null)d.return=h,O=d;else for(;O!==null;){h=O;var f=h.sibling,g=h.return;if(YS(h),h===u){O=null;break}if(f!==null){f.return=g,O=f;break}O=g}}}var m=r.alternate;if(m!==null){var w=m.child;if(w!==null){m.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}O=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,O=o;else e:for(;O!==null;){if(r=O,r.flags&2048)switch(r.tag){case 0:case 11:case 15:zc(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,O=v;break e}O=r.return}}var y=n.current;for(O=y;O!==null;){o=O;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,O=E;else e:for(o=y;O!==null;){if(a=O,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tm(9,a)}}catch(x){Te(a,a.return,x)}if(a===o){O=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,O=b;break e}O=a.return}}if(ie=s,rr(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(_m,n)}catch{}i=!0}return i}finally{le=t,gn.transition=e}}return!1}function cA(n,e,t){e=Wl(t,e),e=OS(n,e,1),n=Ys(n,e,1),e=kt(),n!==null&&(Rd(n,1,e),Ht(n,e))}function Te(n,e,t){if(n.tag===3)cA(n,n,t);else for(;e!==null;){if(e.tag===3){cA(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qs===null||!qs.has(i))){n=Wl(t,n),n=jS(e,n,1),e=Ys(e,n,1),n=kt(),e!==null&&(Rd(e,1,n),Ht(e,n));break}}e=e.return}}function lT(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=kt(),n.pingedLanes|=n.suspendedLanes&t,Je===n&&(ct&t)===t&&(We===4||We===3&&(ct&130023424)===ct&&500>Le()-Dw?To(n,0):Iw|=t),Ht(n,e)}function s1(n,e){e===0&&(n.mode&1?(e=qd,qd<<=1,!(qd&130023424)&&(qd=4194304)):e=1);var t=kt();n=ns(n,e),n!==null&&(Rd(n,e,t),Ht(n,t))}function cT(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),s1(n,t)}function uT(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(e),s1(n,t)}var r1;r1=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||jt.current)Nt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Nt=!1,Qk(n,e,t);Nt=!!(n.flags&131072)}else Nt=!1,_e&&e.flags&1048576&&cS(e,hp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ef(n,e),n=e.pendingProps;var s=Bl(e,At.current);ma(e,t),s=kw(null,e,i,n,s,t);var r=Tw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(i)?(r=!0,cp(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ew(e),s.updater=km,e.stateNode=s,s._reactInternals=e,fy(e,i,n,t),e=my(null,e,i,!0,r,t)):(e.tag=0,_e&&r&&gw(e),xt(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Ef(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=dT(i),n=_n(i,n),s){case 0:e=gy(null,e,i,n,t);break e;case 1:e=Z_(null,e,i,n,t);break e;case 11:e=Q_(null,e,i,n,t);break e;case 14:e=J_(null,e,i,_n(i.type,n),t);break e}throw Error(D(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_n(i,s),gy(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_n(i,s),Z_(n,e,i,s,t);case 3:e:{if(US(e),n===null)throw Error(D(387));i=e.pendingProps,r=e.memoizedState,s=r.element,gS(n,e),pp(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Wl(Error(D(423)),e),e=eA(n,e,i,t,s);break e}else if(i!==s){s=Wl(Error(D(424)),e),e=eA(n,e,i,t,s);break e}else for(en=Xs(e.stateNode.containerInfo.firstChild),tn=e,_e=!0,Nn=null,t=fS(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ul(),i===s){e=is(n,e,t);break e}xt(n,e,i,t)}e=e.child}return e;case 5:return mS(e),n===null&&uy(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,ry(i,s)?o=null:r!==null&&ry(i,r)&&(e.flags|=32),BS(n,e),xt(n,e,o,t),e.child;case 6:return n===null&&uy(e),null;case 13:return $S(n,e,t);case 4:return Sw(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=$l(e,null,i,t):xt(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_n(i,s),Q_(n,e,i,s,t);case 7:return xt(n,e,e.pendingProps,t),e.child;case 8:return xt(n,e,e.pendingProps.children,t),e.child;case 12:return xt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,me(dp,i._currentValue),i._currentValue=o,r!==null)if(zn(r.value,o)){if(r.children===s.children&&!jt.current){e=is(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=Qi(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),hy(r.return,t,e),a.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(D(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),hy(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}xt(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ma(e,t),s=mn(s),i=i(s),e.flags|=1,xt(n,e,i,t),e.child;case 14:return i=e.type,s=_n(i,e.pendingProps),s=_n(i.type,s),J_(n,e,i,s,t);case 15:return zS(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_n(i,s),Ef(n,e),e.tag=1,zt(i)?(n=!0,cp(e)):n=!1,ma(e,t),NS(e,i,s),fy(e,i,s,t),my(null,e,i,!0,n,t);case 19:return VS(n,e,t);case 22:return HS(n,e,t)}throw Error(D(156,e.tag))};function o1(n,e){return IE(n,e)}function hT(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,e,t,i){return new hT(n,e,t,i)}function jw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function dT(n){if(typeof n=="function")return jw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===iw)return 11;if(n===sw)return 14}return 2}function Qs(n,e){var t=n.alternate;return t===null?(t=pn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function xf(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")jw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ea:return Po(t.children,s,r,e);case nw:o=8,s|=8;break;case Ov:return n=pn(12,t,e,s|2),n.elementType=Ov,n.lanes=r,n;case jv:return n=pn(13,t,e,s),n.elementType=jv,n.lanes=r,n;case zv:return n=pn(19,t,e,s),n.elementType=zv,n.lanes=r,n;case mE:return Rm(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pE:o=10;break e;case gE:o=9;break e;case iw:o=11;break e;case sw:o=14;break e;case cs:o=16,i=null;break e}throw Error(D(130,n==null?n:typeof n,""))}return e=pn(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Po(n,e,t,i){return n=pn(7,n,i,e),n.lanes=t,n}function Rm(n,e,t,i){return n=pn(22,n,i,e),n.elementType=mE,n.lanes=t,n.stateNode={isHidden:!1},n}function xv(n,e,t){return n=pn(6,n,null,e),n.lanes=t,n}function Cv(n,e,t){return e=pn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function fT(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ov(0),this.expirationTimes=ov(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ov(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zw(n,e,t,i,s,r,o,a,c){return n=new fT(n,e,t,a,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=pn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ew(r),n}function pT(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function a1(n){if(!n)return er;n=n._reactInternals;e:{if(Ho(n)!==n||n.tag!==1)throw Error(D(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(n.tag===1){var t=n.type;if(zt(t))return aS(n,t,e)}return e}function l1(n,e,t,i,s,r,o,a,c){return n=zw(t,i,!0,n,s,r,o,a,c),n.context=a1(null),t=n.current,i=kt(),s=Ks(t),r=Qi(i,s),r.callback=e??null,Ys(t,r,s),n.current.lanes=s,Rd(n,s,i),Ht(n,i),n}function Lm(n,e,t,i){var s=e.current,r=kt(),o=Ks(s);return t=a1(t),e.context===null?e.context=t:e.pendingContext=t,e=Qi(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ys(s,e,o),n!==null&&(jn(n,s,o,r),wf(n,s,o)),o}function Ep(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function uA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Hw(n,e){uA(n,e),(n=n.alternate)&&uA(n,e)}function gT(){return null}var c1=typeof reportError=="function"?reportError:function(n){console.error(n)};function Bw(n){this._internalRoot=n}Mm.prototype.render=Bw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(D(409));Lm(n,e,null,null)};Mm.prototype.unmount=Bw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Do(function(){Lm(null,n,null,null)}),e[ts]=null}};function Mm(n){this._internalRoot=n}Mm.prototype.unstable_scheduleHydration=function(n){if(n){var e=HE();n={blockedOn:null,target:n,priority:e};for(var t=0;t<hs.length&&e!==0&&e<hs[t].priority;t++);hs.splice(t,0,n),t===0&&UE(n)}};function Uw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Im(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function hA(){}function mT(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=Ep(o);r.call(u)}}var o=l1(e,i,n,0,null,!1,!1,"",hA);return n._reactRootContainer=o,n[ts]=o.current,Zc(n.nodeType===8?n.parentNode:n),Do(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var u=Ep(c);a.call(u)}}var c=zw(n,0,!1,null,null,!1,!1,"",hA);return n._reactRootContainer=c,n[ts]=c.current,Zc(n.nodeType===8?n.parentNode:n),Do(function(){Lm(e,c,t,i)}),c}function Dm(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var c=Ep(o);a.call(c)}}Lm(e,o,n,s)}else o=mT(t,e,n,s,i);return Ep(o)}jE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=gc(e.pendingLanes);t!==0&&(aw(e,t|1),Ht(e,Le()),!(ie&6)&&(Gl=Le()+500,rr()))}break;case 13:Do(function(){var i=ns(n,1);if(i!==null){var s=kt();jn(i,n,1,s)}}),Hw(n,1)}};lw=function(n){if(n.tag===13){var e=ns(n,134217728);if(e!==null){var t=kt();jn(e,n,134217728,t)}Hw(n,134217728)}};zE=function(n){if(n.tag===13){var e=Ks(n),t=ns(n,e);if(t!==null){var i=kt();jn(t,n,e,i)}Hw(n,e)}};HE=function(){return le};BE=function(n,e){var t=le;try{return le=n,e()}finally{le=t}};qv=function(n,e,t){switch(e){case"input":if(Uv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=bm(i);if(!s)throw Error(D(90));yE(i),Uv(i,s)}}}break;case"textarea":_E(n,t);break;case"select":e=t.value,e!=null&&da(n,!!t.multiple,e,!1)}};kE=Fw;TE=Do;var vT={usingClientEntryPoint:!1,Events:[Md,sa,bm,xE,CE,Fw]},cc={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yT={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=LE(n),n===null?null:n.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||gT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{_m=af.inject(yT),ui=af}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vT;sn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uw(e))throw Error(D(200));return pT(n,e,null,t)};sn.createRoot=function(n,e){if(!Uw(n))throw Error(D(299));var t=!1,i="",s=c1;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zw(n,1,!1,null,null,t,!1,i,s),n[ts]=e.current,Zc(n.nodeType===8?n.parentNode:n),new Bw(e)};sn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(D(188)):(n=Object.keys(n).join(","),Error(D(268,n)));return n=LE(e),n=n===null?null:n.stateNode,n};sn.flushSync=function(n){return Do(n)};sn.hydrate=function(n,e,t){if(!Im(e))throw Error(D(200));return Dm(null,n,e,!0,t)};sn.hydrateRoot=function(n,e,t){if(!Uw(n))throw Error(D(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=c1;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=l1(e,null,n,1,t??null,s,!1,r,o),n[ts]=e.current,Zc(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Mm(e)};sn.render=function(n,e,t){if(!Im(e))throw Error(D(200));return Dm(null,n,e,!1,t)};sn.unmountComponentAtNode=function(n){if(!Im(n))throw Error(D(40));return n._reactRootContainer?(Do(function(){Dm(null,null,n,!1,function(){n._reactRootContainer=null,n[ts]=null})}),!0):!1};sn.unstable_batchedUpdates=Fw;sn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Im(t))throw Error(D(200));if(n==null||n._reactInternals===void 0)throw Error(D(38));return Dm(n,e,t,!1,i)};sn.version="18.3.1-next-f1338f8080-20240426";function u1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u1)}catch(n){console.error(n)}}u1(),uE.exports=sn;var wT=uE.exports,dA=wT;Fv.createRoot=dA.createRoot,Fv.hydrateRoot=dA.hydrateRoot;/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lu.apply(this,arguments)}var $s;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($s||($s={}));const fA="popstate";function _T(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return Ty("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Sp(s)}return ET(e,t,null,n)}function Pe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function h1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AT(){return Math.random().toString(36).substr(2,8)}function pA(n,e){return{usr:n.state,key:n.key,idx:e}}function Ty(n,e,t,i){return t===void 0&&(t=null),lu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Jl(e):e,{state:t,key:e&&e.key||i||AT()})}function Sp(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Jl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function ET(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=$s.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(lu({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=$s.Pop;let S=h(),v=S==null?null:S-u;u=S,c&&c({action:a,location:w.location,delta:v})}function f(S,v){a=$s.Push;let y=Ty(w.location,S,v);t&&t(y,S),u=h()+1;let E=pA(y,u),b=w.createHref(y);try{o.pushState(E,"",b)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(b)}r&&c&&c({action:a,location:w.location,delta:1})}function g(S,v){a=$s.Replace;let y=Ty(w.location,S,v);t&&t(y,S),u=h();let E=pA(y,u),b=w.createHref(y);o.replaceState(E,"",b),r&&c&&c({action:a,location:w.location,delta:0})}function m(S){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof S=="string"?S:Sp(S);return y=y.replace(/ $/,"%20"),Pe(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let w={get action(){return a},get location(){return n(s,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(fA,d),c=S,()=>{s.removeEventListener(fA,d),c=null}},createHref(S){return e(s,S)},createURL:m,encodeLocation(S){let v=m(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(S){return o.go(S)}};return w}var gA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(gA||(gA={}));function ST(n,e,t){return t===void 0&&(t="/"),bT(n,e,t,!1)}function bT(n,e,t,i){let s=typeof e=="string"?Jl(e):e,r=Xl(s.pathname||"/",t);if(r==null)return null;let o=d1(n);xT(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=NT(r);a=DT(o[c],u,i)}return a}function d1(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,a)=>{let c={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(Pe(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let u=Js([i,c.relativePath]),h=t.concat(c);r.children&&r.children.length>0&&(Pe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),d1(r.children,e,h,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:MT(u,r.index),routesMeta:h})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let c of f1(r.path))s(r,o,c)}),e}function f1(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=f1(i.join("/")),a=[];return a.push(...o.map(c=>c===""?r:[r,c].join("/"))),s&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function xT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:IT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const CT=/^:[\w-]+$/,kT=3,TT=2,PT=1,RT=10,LT=-2,mA=n=>n==="*";function MT(n,e){let t=n.split("/"),i=t.length;return t.some(mA)&&(i+=LT),e&&(i+=TT),t.filter(s=>!mA(s)).reduce((s,r)=>s+(CT.test(r)?kT:r===""?PT:RT),i)}function IT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function DT(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let c=i[a],u=a===i.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=bp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&t&&!i[i.length-1].route.index&&(d=bp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Js([r,d.pathname]),pathnameBase:HT(Js([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Js([r,d.pathnameBase]))}return o}function bp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=FT(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let w=a[d]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const m=a[d];return g&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:n}}function FT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),h1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(i.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function NT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return h1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Xl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function OT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Jl(n):n;return{pathname:t?t.startsWith("/")?t:jT(t,e):e,search:BT(i),hash:UT(s)}}function jT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function kv(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function p1(n,e){let t=zT(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function g1(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Jl(n):(s=lu({},n),Pe(!s.pathname||!s.pathname.includes("?"),kv("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),kv("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),kv("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=OT(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Js=n=>n.join("/").replace(/\/\/+/g,"/"),HT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),BT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function $T(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const m1=["post","put","patch","delete"];new Set(m1);const VT=["get",...m1];new Set(VT);/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cu(){return cu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cu.apply(this,arguments)}const Fm=P.createContext(null),v1=P.createContext(null),or=P.createContext(null),Nm=P.createContext(null),ar=P.createContext({outlet:null,matches:[],isDataRoute:!1}),y1=P.createContext(null);function WT(n,e){let{relative:t}=e===void 0?{}:e;Dd()||Pe(!1);let{basename:i,navigator:s}=P.useContext(or),{hash:r,pathname:o,search:a}=Om(n,{relative:t}),c=o;return i!=="/"&&(c=o==="/"?i:Js([i,o])),s.createHref({pathname:c,search:a,hash:r})}function Dd(){return P.useContext(Nm)!=null}function Fd(){return Dd()||Pe(!1),P.useContext(Nm).location}function w1(n){P.useContext(or).static||P.useLayoutEffect(n)}function GT(){let{isDataRoute:n}=P.useContext(ar);return n?aP():XT()}function XT(){Dd()||Pe(!1);let n=P.useContext(Fm),{basename:e,future:t,navigator:i}=P.useContext(or),{matches:s}=P.useContext(ar),{pathname:r}=Fd(),o=JSON.stringify(p1(s,t.v7_relativeSplatPath)),a=P.useRef(!1);return w1(()=>{a.current=!0}),P.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=g1(u,JSON.parse(o),r,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Js([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,r,n])}const YT=P.createContext(null);function qT(n){let e=P.useContext(ar).outlet;return e&&P.createElement(YT.Provider,{value:n},e)}function Om(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=P.useContext(or),{matches:s}=P.useContext(ar),{pathname:r}=Fd(),o=JSON.stringify(p1(s,i.v7_relativeSplatPath));return P.useMemo(()=>g1(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function KT(n,e){return QT(n,e)}function QT(n,e,t,i){Dd()||Pe(!1);let{navigator:s}=P.useContext(or),{matches:r}=P.useContext(ar),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Fd(),h;if(e){var d;let S=typeof e=="string"?Jl(e):e;c==="/"||(d=S.pathname)!=null&&d.startsWith(c)||Pe(!1),h=S}else h=u;let f=h.pathname||"/",g=f;if(c!=="/"){let S=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let m=ST(n,{pathname:g}),w=nP(m&&m.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Js([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Js([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),r,t,i);return e&&w?P.createElement(Nm.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:$s.Pop}},w):w}function JT(){let n=oP(),e=$T(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},r=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,r)}const ZT=P.createElement(JT,null);class eP extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(ar.Provider,{value:this.props.routeContext},P.createElement(y1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tP(n){let{routeContext:e,match:t,children:i}=n,s=P.useContext(Fm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(ar.Provider,{value:e},i)}function nP(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Pe(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:g}=t,m=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,m=!1,w=null,S=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||ZT,c&&(u<0&&f===0?(lP("route-fallback",!1),m=!0,S=null):u===f&&(m=!0,S=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),y=()=>{let E;return g?E=w:m?E=S:d.route.Component?E=P.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,P.createElement(tP,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:E})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(eP,{location:t.location,revalidation:t.revalidation,component:w,error:g,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var _1=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(_1||{}),xp=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(xp||{});function iP(n){let e=P.useContext(Fm);return e||Pe(!1),e}function sP(n){let e=P.useContext(v1);return e||Pe(!1),e}function rP(n){let e=P.useContext(ar);return e||Pe(!1),e}function A1(n){let e=rP(),t=e.matches[e.matches.length-1];return t.route.id||Pe(!1),t.route.id}function oP(){var n;let e=P.useContext(y1),t=sP(xp.UseRouteError),i=A1(xp.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function aP(){let{router:n}=iP(_1.UseNavigateStable),e=A1(xp.UseNavigateStable),t=P.useRef(!1);return w1(()=>{t.current=!0}),P.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,cu({fromRouteId:e},r)))},[n,e])}const vA={};function lP(n,e,t){!e&&!vA[n]&&(vA[n]=!0)}function cP(n){return qT(n.context)}function Cf(n){Pe(!1)}function uP(n){let{basename:e="/",children:t=null,location:i,navigationType:s=$s.Pop,navigator:r,static:o=!1,future:a}=n;Dd()&&Pe(!1);let c=e.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:c,navigator:r,static:o,future:cu({v7_relativeSplatPath:!1},a)}),[c,a,r,o]);typeof i=="string"&&(i=Jl(i));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:m="default"}=i,w=P.useMemo(()=>{let S=Xl(h,c);return S==null?null:{location:{pathname:S,search:d,hash:f,state:g,key:m},navigationType:s}},[c,h,d,f,g,m,s]);return w==null?null:P.createElement(or.Provider,{value:u},P.createElement(Nm.Provider,{children:t,value:w}))}function hP(n){let{children:e,location:t}=n;return KT(Py(e),t)}new Promise(()=>{});function Py(n,e){e===void 0&&(e=[]);let t=[];return P.Children.forEach(n,(i,s)=>{if(!P.isValidElement(i))return;let r=[...e,s];if(i.type===P.Fragment){t.push.apply(t,Py(i.props.children,r));return}i.type!==Cf&&Pe(!1),!i.props.index||!i.props.children||Pe(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Py(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cp(){return Cp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Cp.apply(this,arguments)}function E1(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function dP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function fP(n,e){return n.button===0&&(!e||e==="_self")&&!dP(n)}const pP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gP=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],mP="6";try{window.__reactRouterVersion=mP}catch{}const vP=P.createContext({isTransitioning:!1}),yP="startTransition",yA=lC[yP];function wP(n){let{basename:e,children:t,future:i,window:s}=n,r=P.useRef();r.current==null&&(r.current=_T({window:s,v5Compat:!0}));let o=r.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=P.useCallback(d=>{u&&yA?yA(()=>c(d)):c(d)},[c,u]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.createElement(uP,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const _P=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vn=P.forwardRef(function(e,t){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=E1(e,pP),{basename:g}=P.useContext(or),m,w=!1;if(typeof u=="string"&&AP.test(u)&&(m=u,_P))try{let E=new URL(window.location.href),b=u.startsWith("//")?new URL(E.protocol+u):new URL(u),x=Xl(b.pathname,g);b.origin===E.origin&&x!=null?u=x+b.search+b.hash:w=!0}catch{}let S=WT(u,{relative:s}),v=SP(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,unstable_viewTransition:d});function y(E){i&&i(E),E.defaultPrevented||v(E)}return P.createElement("a",Cp({},f,{href:m||S,onClick:w||r?i:y,ref:t,target:c}))}),lf=P.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:o=!1,style:a,to:c,unstable_viewTransition:u,children:h}=e,d=E1(e,gP),f=Om(c,{relative:d.relative}),g=Fd(),m=P.useContext(v1),{navigator:w,basename:S}=P.useContext(or),v=m!=null&&bP(f)&&u===!0,y=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,E=g.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(E=E.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&S&&(b=Xl(b,S)||b);const x=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=E===y||!o&&E.startsWith(y)&&E.charAt(x)==="/",T=b!=null&&(b===y||!o&&b.startsWith(y)&&b.charAt(y.length)==="/"),R={isActive:C,isPending:T,isTransitioning:v},I=C?i:void 0,M;typeof r=="function"?M=r(R):M=[r,C?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(R):a;return P.createElement(Vn,Cp({},d,{"aria-current":I,className:M,ref:t,style:F,to:c,unstable_viewTransition:u}),typeof h=="function"?h(R):h)});var Ry;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ry||(Ry={}));var wA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wA||(wA={}));function EP(n){let e=P.useContext(Fm);return e||Pe(!1),e}function SP(n,e){let{target:t,replace:i,state:s,preventScrollReset:r,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,c=GT(),u=Fd(),h=Om(n,{relative:o});return P.useCallback(d=>{if(fP(d,t)){d.preventDefault();let f=i!==void 0?i:Sp(u)===Sp(h);c(n,{replace:f,state:s,preventScrollReset:r,relative:o,unstable_viewTransition:a})}},[u,c,h,i,s,t,n,r,o,a])}function bP(n,e){e===void 0&&(e={});let t=P.useContext(vP);t==null&&Pe(!1);let{basename:i}=EP(Ry.useViewTransitionState),s=Om(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=Xl(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=Xl(t.nextLocation.pathname,i)||t.nextLocation.pathname;return bp(s.pathname,o)!=null||bp(s.pathname,r)!=null}function xP({refs:n}){const{homeRef:e,aboutRef:t,resumeRef:i,dissertRef:s}=n,[r,o]=P.useState(e),a=()=>{const u=window.scrollY,d=[{ref:e,name:"Home"},{ref:t,name:"About"},{ref:i,name:"Resume"},{ref:s,name:"Dissertation"}].reduce((f,{ref:g,name:m})=>{if(!g.current)return f;const w=g.current.offsetTop,S=Math.abs(u-w);return S<f.difference?{ref:g,name:m,difference:S}:f},{ref:e,name:"Home",difference:1/0});o(d.ref)};P.useEffect(()=>(window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)),[]);const c=(u,h)=>{u.preventDefault(),h.current.scrollIntoView({behavior:"smooth",block:"start"})};return k.jsxs(nr.Fragment,{children:[k.jsxs("div",{className:"topnav",children:[k.jsx(lf,{to:"#home",className:r===e?"focused":"",onClick:u=>c(u,e),children:"HOME PAGE"}),k.jsx(lf,{to:"#about",className:r===t?"focused":"",onClick:u=>c(u,t),children:"ABOUT ME"}),k.jsx(lf,{to:"#resume",className:r===i?"focused":"",onClick:u=>c(u,i),children:"RESUME"}),k.jsx(lf,{to:"#dissertation",className:r===s?"focused":"",onClick:u=>c(u,s),children:"DISSERTATION"})]}),k.jsx("br",{}),k.jsx("br",{}),k.jsx("div",{className:"centerbox",children:k.jsx("div",{className:"centeredPage",children:k.jsx(cP,{})})}),k.jsx("footer",{children:"Copyright © Toby Tomkinson 2023"})]})}function CP(){return k.jsxs(nr.Fragment,{children:[k.jsx("h1",{children:"Error Page"}),k.jsx("p",{children:"You did something wrong."})]})}function kP(){return k.jsx(nr.Fragment,{children:k.jsxs("div",{className:"fade-in-element",children:[k.jsx("h1",{children:"About Me"}),k.jsx("h2",{children:"Academic Projects"}),k.jsxs("div",{id:"grid",class:"three-columns",children:[k.jsxs("div",{children:[k.jsx("h3",{children:"Research Assistant 2021"}),k.jsx("p",{children:"Working under the supervision of Dr. Alex Shaw, a professor with a focus on Virtual Reality (VR) and interest in risk assessment, I developed a procedural construction site to create a Virtual Reality-based risk assessment training program tailored specifically for City Rail Link - a significant infrastructure project with complex challenges. I designed and incorporated various construction elements, such as cranes, heavy machinery, and workers."})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"Research Assistant 2022"}),k.jsx("p",{children:"Working with Dr. Ulrich Speidel, a professor with a focus on networks and communication, we developed software to demonstrate a novel routing algorithm to optimize the efficiency of LEO satellite communications, ultimately improving the way these satellites could function and communicate in space - available below."}),k.jsx("img",{src:"/sat2.png",width:"80%"}),k.jsx(Vn,{to:"https://sde.blogs.auckland.ac.nz/leo-simulation/",children:k.jsx("button",{type:"button",children:"VIEW PROJECT"})})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"Dissertation 2023"}),k.jsx("p",{children:"My dissertation explores a novel pathfinding algorithm for Low Earth Orbit satellite networks - an improved version of my project done as a research assistant in 2022. It includes a problem statement, background knowledge on relevant topics, a literature review, the algorithm with code and pseudocode, implementation details, and a conclusion with results and challenges. The software itself is not publically available (yet) but the dissertation itself can be found below."})]})]}),k.jsx("h2",{children:"Personal Projects"}),k.jsxs("div",{id:"grid",class:"three-columns",children:[k.jsxs("div",{children:[k.jsx("h3",{children:"Hero Academia: Beyond | UE4 | C++"}),k.jsx("p",{children:'As a game designer and programmer for "Hero Academia: Beyond," I designed gameplay mechanics, interactive environments, and optimized code. I also ported the game from desktop to mobile with full gameplay, rendering and post-processing functionality.'}),k.jsx("iframe",{width:"85%",src:"https://www.youtube.com/embed/Pb41XskDst8?si=ZRtOxujdPU3AY8M3",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),k.jsx(Vn,{to:"https://www.heroacademiabeyond.com/",children:k.jsx("button",{type:"button",children:"VIEW PROJECT"})})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"Chippure | Python"}),k.jsx("p",{children:"Chippure is a Python-based Chip-8 emulator developed using Python's default libraries. It emulates the Chip-8 system to play its games on modern hardware. This project demonstrates the effectiveness of Python's default libraries in building emulation software."}),k.jsxs(Vn,{to:"https://github.com/ttom795/Chippure",children:[k.jsx("img",{src:"/chippure.png",width:"100%"}),k.jsx("button",{type:"button",children:"VIEW PROJECT"})]})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"Orangutan Monitor | OpenGL | C++"}),k.jsx("p",{children:"Orangutan Monitor is a standalone software application designed to monitor page-file size. It's particularly useful when paired with memory-intensive programs like Yuzu. This tool comes as a single .exe file without the need for additional dependencies or DLLs."}),k.jsxs(Vn,{to:"https://github.com/ttom795/OrangutanMonitor",children:[k.jsx("img",{src:"/orangutan.png",width:"60%"}),k.jsx("button",{type:"button",children:"VIEW PROJECT"})]})]})]}),k.jsx("h2",{children:"Fangames/Comissioned Work"}),k.jsxs("div",{id:"grid",class:"two-columns",children:[k.jsxs("div",{children:[k.jsx("h3",{children:"Shonen Jump Fangame | UE4 | C++"}),k.jsx("p",{children:'I developed a LEGO-themed "Shonen Jump" Fangame. The project involved designing and implementing game mechanics, as well as recreating the visual elements and gamefeel of the original games.'}),k.jsx("iframe",{width:"85%",src:"https://www.youtube.com/embed/y8eTJ9-lzck?si=TKr3CSkqAA6W5LWK",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),k.jsx(Vn,{to:"https://www.youtube.com/watch?v=y8eTJ9-lzck",children:k.jsx("button",{type:"button",children:"VIEW PROJECT"})})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"My Hero Karting | UE4 | C++"}),k.jsx("p",{children:'Working with the same YouTuber, I developed a racing game called "My Hero Karting," inspired by the show "My Hero Academia." The project demonstrates AI and local multiplayer functionality.'}),k.jsx("iframe",{width:"85%",src:"https://www.youtube.com/embed/HP80Jx8ig_g?si=sTBWMGo_H8kXU3N4",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),k.jsx(Vn,{to:"https://www.youtube.com/watch?v=HP80Jx8ig_g",children:k.jsx("button",{type:"button",children:"VIEW PROJECT"})})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"Shield Hero Fangame | UE4 | C++"}),k.jsx("p",{children:`I'm also a fan of the anime "The Rising of the Shield Hero," so I decided to create a game based on the series. The project involved level design, as well as gameplay balance and feel.`}),k.jsx("iframe",{width:"85%",src:"https://www.youtube.com/embed/eIJXXqUinnE?si=asIUzK5uXuYIAcbN",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),k.jsx(Vn,{to:"https://www.youtube.com/watch?v=eIJXXqUinnE",children:k.jsx("button",{type:"button",children:"VIEW PROJECT"})})]}),k.jsxs("div",{children:[k.jsx("h3",{children:"Mob Psycho Sentiment | UE4 | C++"}),k.jsx("p",{children:'I also developed a small game which ended up being "Mob Psycho Sentiment," an action-platformer/sandbox based around the show of the same name. The game relies on the use of physics and has several different playable characters.'}),k.jsx("iframe",{width:"85%",src:"https://www.youtube.com/embed/J7PzyaBfuJA?si=DjSYVimIp-f9gPOo",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),k.jsx(Vn,{to:"https://www.youtube.com/watch?v=J7PzyaBfuJA",children:k.jsx("button",{type:"button",children:"VIEW PROJECT"})})]})]})]})})}function TP(){return k.jsx(nr.Fragment,{children:k.jsxs("div",{className:"fade-in-element",children:[k.jsx("h1",{children:"I'm Toby Tomkinson"}),k.jsxs("div",{id:"grid",class:"two-columns",children:[k.jsxs("div",{children:[k.jsx("p",{children:"Welcome to my portfolio website!"}),k.jsx("p",{children:"I'm a software developer and doctoral student at the University of Auckland."}),k.jsx("p",{children:"Feel free to reach out to discuss future opportunities."})]}),k.jsxs("div",{children:[k.jsx("div",{className:"centerbox",children:k.jsx("img",{src:"face.jpg",style:{width:"70%",transform:"rotate(5deg)",border:"10px solid white",boxShadow:"0 0 20px rgba(0, 0, 0, 0.25)"}})}),k.jsx(Vn,{to:"https://www.linkedin.com/in/toby-j-tomkinson/",children:k.jsx("button",{type:"button",children:"LINKEDIN"})})]})]})]})})}const PP="modulepreload",RP=function(n){return"/"+n},_A={},vc=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=RP(r),r in _A)return;_A[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":PP,o||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};var Uc={};Uc.d=(n,e)=>{for(var t in e)Uc.o(e,t)&&!Uc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Uc.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var $=globalThis.pdfjsLib={};Uc.d($,{AbortException:()=>Uo,AnnotationEditorLayer:()=>H0,AnnotationEditorParamsType:()=>W,AnnotationEditorType:()=>ee,AnnotationEditorUIManager:()=>No,AnnotationLayer:()=>TL,AnnotationMode:()=>fs,CMapCompressionType:()=>My,ColorPicker:()=>Ip,DOMSVGFactory:()=>Ww,DrawLayer:()=>V0,FeatureTest:()=>Ot,GlobalWorkerOptions:()=>Ji,ImageKind:()=>kf,InvalidPDFException:()=>b1,MissingPDFException:()=>Bo,OPS:()=>An,Outliner:()=>A0,PDFDataRangeTransport:()=>wb,PDFDateString:()=>L1,PDFWorker:()=>wa,PasswordResponses:()=>DP,PermissionFlag:()=>IP,PixelsPerInch:()=>tr,RenderingCancelledException:()=>Gw,TextLayer:()=>Lp,UnexpectedResponseException:()=>Bm,Util:()=>j,VerbosityLevel:()=>jm,XfaLayer:()=>Ab,build:()=>lL,createValidAbsoluteUrl:()=>jP,fetchData:()=>Gm,getDocument:()=>ZR,getFilenameFromUrl:()=>YP,getPdfFilenameFromUrl:()=>qP,getXfaPageViewport:()=>KP,isDataScheme:()=>Xw,isPdfFile:()=>Yw,noContextMenu:()=>Bt,normalizeUnicode:()=>VP,renderTextLayer:()=>VR,setLayerDimensions:()=>Fo,shadow:()=>ne,updateTextLayer:()=>WR,version:()=>aL});const _t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),S1=[1,0,0,1,0,0],Ly=[.001,0,0,.001,0,0],LP=1e7,Tv=1.35,hn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},fs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},MP="pdfjs_internal_editor_",ee={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},W={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},IP={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},kf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},uc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},jm={ERRORS:0,WARNINGS:1,INFOS:5},My={NONE:0,BINARY:1},An={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},DP={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let zm=jm.WARNINGS;function FP(n){Number.isInteger(n)&&(zm=n)}function NP(){return zm}function Hm(n){zm>=jm.INFOS&&console.log(`Info: ${n}`)}function q(n){zm>=jm.WARNINGS&&console.log(`Warning: ${n}`)}function he(n){throw new Error(n)}function Ve(n,e){n||he(e)}function OP(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function jP(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=$P(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(OP(i))return i}catch{}return null}function ne(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const lr=function(){function e(t,i){this.constructor===e&&he("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Iy extends lr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Dy extends lr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class b1 extends lr{constructor(e){super(e,"InvalidPDFException")}}class Bo extends lr{constructor(e){super(e,"MissingPDFException")}}class Bm extends lr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class zP extends lr{constructor(e){super(e,"FormatError")}}class Uo extends lr{constructor(e){super(e,"AbortException")}}function x1(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&he("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Um(n){typeof n!="string"&&he("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function HP(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function $w(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function BP(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function UP(){try{return new Function(""),!0}catch{return!1}}class Ot{static get isLittleEndian(){return ne(this,"isLittleEndian",BP())}static get isEvalSupported(){return ne(this,"isEvalSupported",UP())}static get isOffscreenCanvasSupported(){return ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ne(this,"platform",{isMac:navigator.platform.includes("Mac")}):ne(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return ne(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Pv=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ea,Tf,hu,Fy;class j{static makeHexColor(e,t,i){return`#${Pv[e]}${Pv[t]}${Pv[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,c=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,u=a+c||1,h=a-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[i,r,s,o]}static bezierBoundingBox(e,t,i,s,r,o,a,c,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],A(this,hu,Fy).call(this,e,i,r,a,t,s,o,c,3*(-e+3*(i-r)+a),6*(e-2*i+r),3*(i-e),u),A(this,hu,Fy).call(this,e,i,r,a,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u),u}}Ea=new WeakSet,Tf=function(e,t,i,s,r,o,a,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,m=d*(d*(d*e+3*u*t)+3*f*i)+g*s,w=d*(d*(d*r+3*u*o)+3*f*a)+g*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],w)},hu=new WeakSet,Fy=function(e,t,i,s,r,o,a,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,Ea,Tf).call(this,e,t,i,s,r,o,a,c,-d/h,f);return}const g=h**2-4*d*u;if(g<0)return;const m=Math.sqrt(g),w=2*u;A(this,Ea,Tf).call(this,e,t,i,s,r,o,a,c,(-h+m)/w,f),A(this,Ea,Tf).call(this,e,t,i,s,r,o,a,c,(-h-m)/w,f)},p(j,Ea),p(j,hu);function $P(n){return decodeURIComponent(escape(n))}let Rv=null,AA=null;function VP(n){return Rv||(Rv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,AA=new Map([["ﬅ","ſt"]])),n.replaceAll(Rv,(e,t,i)=>t?t.normalize("NFKC"):AA.get(i))}function WP(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return x1(n)}const C1="pdfjs_internal_id_",fi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class $m{constructor(){this.constructor===$m&&he("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var du;const e_=class e_{constructor({enableHWA:e=!1}={}){p(this,du,!1);this.constructor===e_&&he("Cannot initialize BaseCanvasFactory."),_(this,du,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,du)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){he("Abstract method `_createCanvas` called.")}};du=new WeakMap;let kp=e_;class Vm{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===Vm&&he("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?My.BINARY:My.NONE;return this._fetchData(t,i).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){he("Abstract method `_fetchData` called.")}}class Wm{constructor({baseUrl:e=null}){this.constructor===Wm&&he("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){he("Abstract method `_fetchData` called.")}}class Vw{constructor(){this.constructor===Vw&&he("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){he("Abstract method `_createSVG` called.")}}const gi="http://www.w3.org/2000/svg",gr=class gr{};G(gr,"CSS",96),G(gr,"PDF",72),G(gr,"PDF_TO_CSS_UNITS",gr.CSS/gr.PDF);let tr=gr;var _r,Wn,Ei,Mt,Fp,Ar,Ye,gt,ps,Xo,gs,Yo,Sa,Pf,Np,k1,fu,Ny,ms,qo,Er,yc,Sr,wc,pu,Oy,br,_c;class GP extends $m{constructor({docId:t,ownerDocument:i=globalThis.document}={}){super();p(this,Ye);p(this,ps);p(this,gs);p(this,Sa);p(this,Np);p(this,fu);p(this,ms);p(this,Er);p(this,Sr);p(this,pu);p(this,br);p(this,_r,void 0);p(this,Wn,void 0);p(this,Ei,void 0);p(this,Mt,void 0);p(this,Fp,void 0);p(this,Ar,0);_(this,Ei,t),_(this,Mt,i)}addFilter(t){if(!t)return"none";let i=l(this,Ye,gt).get(t);if(i)return i;const[s,r,o]=A(this,Sa,Pf).call(this,t),a=t.length===1?s:`${s}${r}${o}`;if(i=l(this,Ye,gt).get(a),i)return l(this,Ye,gt).set(t,i),i;const c=`g_${l(this,Ei)}_transfer_map_${Ut(this,Ar)._++}`,u=`url(#${c})`;l(this,Ye,gt).set(t,u),l(this,Ye,gt).set(a,u);const h=A(this,ms,qo).call(this,c);return A(this,Sr,wc).call(this,s,r,o,h),u}addHCMFilter(t,i){var m;const s=`${t}-${i}`,r="base";let o=l(this,ps,Xo).get(r);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,ps,Xo).set(r,o)),!t||!i))return o.url;const a=A(this,br,_c).call(this,t);t=j.makeHexColor(...a);const c=A(this,br,_c).call(this,i);if(i=j.makeHexColor(...c),l(this,gs,Yo).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const u=new Array(256);for(let w=0;w<=255;w++){const S=w/255;u[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,Ei)}_hcm_filter`,f=o.filter=A(this,ms,qo).call(this,d);A(this,Sr,wc).call(this,h,h,h,f),A(this,fu,Ny).call(this,f);const g=(w,S)=>{const v=a[w]/255,y=c[w]/255,E=new Array(S+1);for(let b=0;b<=S;b++)E[b]=v+b/S*(y-v);return E.join(",")};return A(this,Sr,wc).call(this,g(0,5),g(1,5),g(2,5),f),o.url=`url(#${d})`,o.url}addAlphaFilter(t){let i=l(this,Ye,gt).get(t);if(i)return i;const[s]=A(this,Sa,Pf).call(this,[t]),r=`alpha_${s}`;if(i=l(this,Ye,gt).get(r),i)return l(this,Ye,gt).set(t,i),i;const o=`g_${l(this,Ei)}_alpha_map_${Ut(this,Ar)._++}`,a=`url(#${o})`;l(this,Ye,gt).set(t,a),l(this,Ye,gt).set(r,a);const c=A(this,ms,qo).call(this,o);return A(this,pu,Oy).call(this,s,c),a}addLuminosityFilter(t){let i=l(this,Ye,gt).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=A(this,Sa,Pf).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=l(this,Ye,gt).get(r),i)return l(this,Ye,gt).set(t,i),i;const o=`g_${l(this,Ei)}_luminosity_map_${Ut(this,Ar)._++}`,a=`url(#${o})`;l(this,Ye,gt).set(t,a),l(this,Ye,gt).set(r,a);const c=A(this,ms,qo).call(this,o);return A(this,Np,k1).call(this,c),t&&A(this,pu,Oy).call(this,s,c),a}addHighlightHCMFilter(t,i,s,r,o){var y;const a=`${i}-${s}-${r}-${o}`;let c=l(this,ps,Xo).get(t);if((c==null?void 0:c.key)===a||(c?((y=c.filter)==null||y.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,ps,Xo).set(t,c)),!i||!s))return c.url;const[u,h]=[i,s].map(A(this,br,_c).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[g,m]=[r,o].map(A(this,br,_c).bind(this));f<d&&([d,f,g,m]=[f,d,m,g]),l(this,gs,Yo).style.color="";const w=(E,b,x)=>{const C=new Array(256),T=(f-d)/x,R=E/255,I=(b-E)/(255*x);let M=0;for(let F=0;F<=x;F++){const Y=Math.round(d+F*T),V=R+F*I;for(let U=M;U<=Y;U++)C[U]=V;M=Y+1}for(let F=M;F<256;F++)C[F]=C[M-1];return C.join(",")},S=`g_${l(this,Ei)}_hcm_${t}_filter`,v=c.filter=A(this,ms,qo).call(this,S);return A(this,fu,Ny).call(this,v),A(this,Sr,wc).call(this,w(g[0],m[0],5),w(g[1],m[1],5),w(g[2],m[2],5),v),c.url=`url(#${S})`,c.url}destroy(t=!1){t&&l(this,ps,Xo).size!==0||(l(this,Wn)&&(l(this,Wn).parentNode.parentNode.remove(),_(this,Wn,null)),l(this,_r)&&(l(this,_r).clear(),_(this,_r,null)),_(this,Ar,0))}}_r=new WeakMap,Wn=new WeakMap,Ei=new WeakMap,Mt=new WeakMap,Fp=new WeakMap,Ar=new WeakMap,Ye=new WeakSet,gt=function(){return l(this,_r)||_(this,_r,new Map)},ps=new WeakSet,Xo=function(){return l(this,Fp)||_(this,Fp,new Map)},gs=new WeakSet,Yo=function(){if(!l(this,Wn)){const t=l(this,Mt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=l(this,Mt).createElementNS(gi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),_(this,Wn,l(this,Mt).createElementNS(gi,"defs")),t.append(s),s.append(l(this,Wn)),l(this,Mt).body.append(t)}return l(this,Wn)},Sa=new WeakSet,Pf=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),a.join(","),c.join(",")]},Np=new WeakSet,k1=function(t){const i=l(this,Mt).createElementNS(gi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},fu=new WeakSet,Ny=function(t){const i=l(this,Mt).createElementNS(gi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},ms=new WeakSet,qo=function(t){const i=l(this,Mt).createElementNS(gi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,gs,Yo).append(i),i},Er=new WeakSet,yc=function(t,i,s){const r=l(this,Mt).createElementNS(gi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},Sr=new WeakSet,wc=function(t,i,s,r){const o=l(this,Mt).createElementNS(gi,"feComponentTransfer");r.append(o),A(this,Er,yc).call(this,o,"feFuncR",t),A(this,Er,yc).call(this,o,"feFuncG",i),A(this,Er,yc).call(this,o,"feFuncB",s)},pu=new WeakSet,Oy=function(t,i){const s=l(this,Mt).createElementNS(gi,"feComponentTransfer");i.append(s),A(this,Er,yc).call(this,s,"feFuncA",t)},br=new WeakSet,_c=function(t){return l(this,gs,Yo).style.color=t,qw(getComputedStyle(l(this,gs,Yo)).getPropertyValue("color"))};class XP extends kp{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}={}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function Gm(n,e="text"){if(Ac(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class T1 extends Vm{_fetchData(e,t){return Gm(e,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):Um(i),compressionType:t}))}}class P1 extends Wm{_fetchData(e){return Gm(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Ww extends Vw{_createSVG(e){return document.createElementNS(gi,e)}}class Nd{constructor({viewBox:e,scale:t,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=s,this.offsetY=r;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,d=0,f=1;break;case 90:u=0,h=1,d=1,f=0;break;case 270:u=0,h=-1,d=-1,f=0;break;case 0:u=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let g,m,w,S;u===0?(g=Math.abs(c-e[1])*t+s,m=Math.abs(a-e[0])*t+r,w=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(g=Math.abs(a-e[0])*t+s,m=Math.abs(c-e[1])*t+r,w=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[u*t,h*t,d*t,f*t,g-u*t*a-d*t*c,m-h*t*a-f*t*c],this.width=w,this.height=S}get rawDims(){const{viewBox:e}=this;return ne(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Nd({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return j.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=j.applyTransform([e[0],e[1]],this.transform),i=j.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return j.applyInverseTransform([e,t],this.transform)}}class Gw extends lr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Xw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Yw(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function YP(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function qP(n,e="document.pdf"){if(typeof n!="string")return e;if(Xw(n))return q('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class EA{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&q(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||q(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Ac(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Bt(n){n.preventDefault()}function R1(n){console.log("Deprecated API usage: "+n)}let SA;class L1{static toDateObject(e){if(!e||typeof e!="string")return null;SA||(SA=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=SA.exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(i,s,r,o,a,c))}}function KP(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Nd({viewBox:r,scale:e,rotation:t})}function qw(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(q(`Not a valid color format: "${n}"`),[0,0,0])}function QP(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,qw(i))}e.remove()}function Ee(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform();return[e,t,i,s,r,o]}function pi(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[e,t,i,s,r,o]}function Fo(n,e,t=!1,i=!0){if(e instanceof Nd){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=n,a=Ot.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,h=a?`round(${c}, 1px)`:`calc(${c})`,d=a?`round(${u}, 1px)`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}var xr,Cr,Wt,kr,Op,M1,jp,I1,zp,D1,ba,Rf,Hp,F1,gu,zy;const Bp=class Bp{constructor(e){p(this,jp);p(this,zp);p(this,ba);p(this,Hp);p(this,gu);p(this,xr,null);p(this,Cr,null);p(this,Wt,void 0);p(this,kr,null);_(this,Wt,e)}render(){const e=_(this,xr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=l(this,Wt)._uiManager._signal;e.addEventListener("contextmenu",Bt,{signal:t}),e.addEventListener("pointerdown",A(Bp,Op,M1),{signal:t});const i=_(this,kr,document.createElement("div"));i.className="buttons",e.append(i);const s=l(this,Wt).toolbarPosition;if(s){const{style:r}=e,o=l(this,Wt)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,Hp,F1).call(this),e}hide(){var e;l(this,xr).classList.add("hidden"),(e=l(this,Cr))==null||e.hideDropdown()}show(){l(this,xr).classList.remove("hidden")}addAltTextButton(e){A(this,ba,Rf).call(this,e),l(this,kr).prepend(e,l(this,gu,zy))}addColorPicker(e){_(this,Cr,e);const t=e.renderButton();A(this,ba,Rf).call(this,t),l(this,kr).prepend(t,l(this,gu,zy))}remove(){var e;l(this,xr).remove(),(e=l(this,Cr))==null||e.destroy(),_(this,Cr,null)}};xr=new WeakMap,Cr=new WeakMap,Wt=new WeakMap,kr=new WeakMap,Op=new WeakSet,M1=function(e){e.stopPropagation()},jp=new WeakSet,I1=function(e){l(this,Wt)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},zp=new WeakSet,D1=function(e){l(this,Wt)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},ba=new WeakSet,Rf=function(e){const t=l(this,Wt)._uiManager._signal;e.addEventListener("focusin",A(this,jp,I1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,zp,D1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Bt,{signal:t})},Hp=new WeakSet,F1=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${l(this,Wt).editorType}-button`),A(this,ba,Rf).call(this,e),e.addEventListener("click",t=>{l(this,Wt)._uiManager.delete()},{signal:l(this,Wt)._uiManager._signal}),l(this,kr).append(e)},gu=new WeakSet,zy=function(){const e=document.createElement("div");return e.className="divider",e},p(Bp,Op);let jy=Bp;var mu,Tr,Pr,Up,N1,$p,O1,Vp,j1;class JP{constructor(e){p(this,Up);p(this,$p);p(this,Vp);p(this,mu,null);p(this,Tr,null);p(this,Pr,void 0);_(this,Pr,e)}show(e,t,i){const[s,r]=A(this,$p,O1).call(this,t,i),{style:o}=l(this,Tr)||_(this,Tr,A(this,Up,N1).call(this));e.append(l(this,Tr)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Tr).remove()}}mu=new WeakMap,Tr=new WeakMap,Pr=new WeakMap,Up=new WeakSet,N1=function(){const e=_(this,Tr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Bt,{signal:l(this,Pr)._signal});const t=_(this,mu,document.createElement("div"));return t.className="buttons",e.append(t),A(this,Vp,j1).call(this),e},$p=new WeakSet,O1=function(e,t){let i=0,s=0;for(const r of e){const o=r.y+r.height;if(o<i)continue;const a=r.x+(t?r.width:0);if(o>i){s=a,i=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,i]},Vp=new WeakSet,j1=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Pr)._signal;e.addEventListener("contextmenu",Bt,{signal:i}),e.addEventListener("click",()=>{l(this,Pr).highlightSelection("floating_button")},{signal:i}),l(this,mu).append(e)};function Tp(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function ZP(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Wp;class eR{constructor(){p(this,Wp,0)}get id(){return`${MP}${Ut(this,Wp)._++}`}}Wp=new WeakMap;var vu,Gp,an,yu,By;const t_=class t_{constructor(){p(this,yu);p(this,vu,WP());p(this,Gp,0);p(this,an,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ne(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return A(this,yu,By).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return A(this,yu,By).call(this,e,e)}async getFromId(e){l(this,an)||_(this,an,new Map);const t=l(this,an).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=l(this,an).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){l(this,an)||_(this,an,new Map);const t=l(this,an).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${l(this,vu)}_`)}};vu=new WeakMap,Gp=new WeakMap,an=new WeakMap,yu=new WeakSet,By=async function(e,t){l(this,an)||_(this,an,new Map);let i=l(this,an).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,vu)}_${Ut(this,Gp)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await Gm(t,"blob")):s=i.file=t,s.type==="image/svg+xml"){const r=t_._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return l(this,an).set(e,i),i&&l(this,an).set(i.id,i),i};let Hy=t_;var qe,vs,wu,Ke;class tR{constructor(e=128){p(this,qe,[]);p(this,vs,!1);p(this,wu,void 0);p(this,Ke,-1);_(this,wu,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,vs))return;const c={cmd:e,undo:t,post:i,type:r};if(l(this,Ke)===-1){l(this,qe).length>0&&(l(this,qe).length=0),_(this,Ke,0),l(this,qe).push(c);return}if(o&&l(this,qe)[l(this,Ke)].type===r){a&&(c.undo=l(this,qe)[l(this,Ke)].undo),l(this,qe)[l(this,Ke)]=c;return}const u=l(this,Ke)+1;u===l(this,wu)?l(this,qe).splice(0,1):(_(this,Ke,u),u<l(this,qe).length&&l(this,qe).splice(u)),l(this,qe).push(c)}undo(){if(l(this,Ke)===-1)return;_(this,vs,!0);const{undo:e,post:t}=l(this,qe)[l(this,Ke)];e(),t==null||t(),_(this,vs,!1),_(this,Ke,l(this,Ke)-1)}redo(){if(l(this,Ke)<l(this,qe).length-1){_(this,Ke,l(this,Ke)+1),_(this,vs,!0);const{cmd:e,post:t}=l(this,qe)[l(this,Ke)];e(),t==null||t(),_(this,vs,!1)}}hasSomethingToUndo(){return l(this,Ke)!==-1}hasSomethingToRedo(){return l(this,Ke)<l(this,qe).length-1}destroy(){_(this,qe,null)}}qe=new WeakMap,vs=new WeakMap,wu=new WeakMap,Ke=new WeakMap;var Xp,z1;class Od{constructor(e){p(this,Xp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ot.platform;for(const[i,s,r={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(A(this,Xp,z1).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(s.bind(e,...o,t)(),r||(t.stopPropagation(),t.preventDefault()))}}Xp=new WeakSet,z1=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Yp=class Yp{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return QP(e),ne(this,"_colors",e)}convert(e){const t=qw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,o)=>r===t[o]))return Yp._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?j.makeHexColor(...t):e}};G(Yp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Uy=Yp;var xa,Gt,ze,tt,Ca,Si,ka,En,Ta,Rr,Gn,Sn,Lr,_u,Au,Xn,Pa,ys,Yn,qp,ws,Eu,Mr,Su,Ra,nt,oe,bi,Ir,bu,xu,Cu,ku,Tu,Pu,Ru,Lu,Mu,Iu,Du,Fu,Nu,_s,qn,xi,Ou,La,Lf,Kp,H1,Qp,B1,Ma,Mf,Jp,U1,Zp,$1,eg,V1,ju,$y,tg,W1,zu,Vy,Hu,Wy,ng,G1,it,Et,Kn,os,ig,X1,sg,Y1,Bu,Gy,rg,q1,Dr,Ec,Uu,Xy;const ha=class ha{constructor(e,t,i,s,r,o,a,c,u){p(this,La);p(this,Kp);p(this,Qp);p(this,Ma);p(this,Jp);p(this,Zp);p(this,eg);p(this,ju);p(this,tg);p(this,zu);p(this,Hu);p(this,ng);p(this,it);p(this,Kn);p(this,ig);p(this,sg);p(this,Bu);p(this,rg);p(this,Dr);p(this,Uu);p(this,xa,new AbortController);p(this,Gt,null);p(this,ze,new Map);p(this,tt,new Map);p(this,Ca,null);p(this,Si,null);p(this,ka,null);p(this,En,new tR);p(this,Ta,0);p(this,Rr,new Set);p(this,Gn,null);p(this,Sn,null);p(this,Lr,new Set);p(this,_u,!1);p(this,Au,null);p(this,Xn,null);p(this,Pa,null);p(this,ys,!1);p(this,Yn,null);p(this,qp,new eR);p(this,ws,!1);p(this,Eu,!1);p(this,Mr,null);p(this,Su,null);p(this,Ra,null);p(this,nt,ee.NONE);p(this,oe,new Set);p(this,bi,null);p(this,Ir,null);p(this,bu,null);p(this,xu,this.blur.bind(this));p(this,Cu,this.focus.bind(this));p(this,ku,this.copy.bind(this));p(this,Tu,this.cut.bind(this));p(this,Pu,this.paste.bind(this));p(this,Ru,this.keydown.bind(this));p(this,Lu,this.keyup.bind(this));p(this,Mu,this.onEditingAction.bind(this));p(this,Iu,this.onPageChanging.bind(this));p(this,Du,this.onScaleChanging.bind(this));p(this,Fu,this.onRotationChanging.bind(this));p(this,Nu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});p(this,_s,[0,0]);p(this,qn,null);p(this,xi,null);p(this,Ou,null);this._signal=l(this,xa).signal,_(this,xi,e),_(this,Ou,t),_(this,Ca,i),this._eventBus=s,this._eventBus._on("editingaction",l(this,Mu)),this._eventBus._on("pagechanging",l(this,Iu)),this._eventBus._on("scalechanging",l(this,Du)),this._eventBus._on("rotationchanging",l(this,Fu)),A(this,Jp,U1).call(this),A(this,ng,G1).call(this),A(this,ju,$y).call(this),_(this,Si,r.annotationStorage),_(this,Au,r.filterFactory),_(this,Ir,o),_(this,Pa,a||null),_(this,_u,c),_(this,Ra,u||null),this.viewParameters={realScale:tr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=ha.prototype,t=o=>l(o,xi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ne(this,"_keyboardManager",new Od([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,xi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,xi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i;(e=l(this,xa))==null||e.abort(),_(this,xa,null),this._signal=null,this._eventBus._off("editingaction",l(this,Mu)),this._eventBus._off("pagechanging",l(this,Iu)),this._eventBus._off("scalechanging",l(this,Du)),this._eventBus._off("rotationchanging",l(this,Fu));for(const s of l(this,tt).values())s.destroy();l(this,tt).clear(),l(this,ze).clear(),l(this,Lr).clear(),_(this,Gt,null),l(this,oe).clear(),l(this,En).destroy(),(t=l(this,Ca))==null||t.destroy(),(i=l(this,Yn))==null||i.hide(),_(this,Yn,null),l(this,Xn)&&(clearTimeout(l(this,Xn)),_(this,Xn,null)),l(this,qn)&&(clearTimeout(l(this,qn)),_(this,qn,null))}async mlGuess(e){var t;return((t=l(this,Ra))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!l(this,Ra)}get hcmFilter(){return ne(this,"hcmFilter",l(this,Ir)?l(this,Au).addHCMFilter(l(this,Ir).foreground,l(this,Ir).background):"none")}get direction(){return ne(this,"direction",getComputedStyle(l(this,xi)).direction)}get highlightColors(){return ne(this,"highlightColors",l(this,Pa)?new Map(l(this,Pa).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ne(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){_(this,Su,e)}editAltText(e){var t;(t=l(this,Ca))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){_(this,Ta,e-1)}focusMainContainer(){l(this,xi).focus()}findParent(e,t){for(const i of l(this,tt).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+a)return i}return null}disableUserSelect(e=!1){l(this,Ou).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Lr).add(e)}removeShouldRescale(e){l(this,Lr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*tr.PDF_TO_CSS_UNITS;for(const t of l(this,Lr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=t,a=t.toString(),u=A(this,La,Lf).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(h){t.empty(),l(this,nt)===ee.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:ee.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const d of l(this,tt).values())if(d.hasTextLayer(u)){d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Si)&&!l(this,Si).has(e.id)&&l(this,Si).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,ys)&&(_(this,ys,!1),A(this,Ma,Mf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,oe))if(t.div.contains(e)){_(this,Mr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Mr))return;const[e,t]=l(this,Mr);_(this,Mr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,ju,$y).call(this),A(this,zu,Vy).call(this)}removeEditListeners(){A(this,tg,W1).call(this),A(this,Hu,Wy).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Sn))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Sn))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Gt))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,oe)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of l(this,Sn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){q(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)A(this,Bu,Gy).call(this,c);A(this,Uu,Xy).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){q(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,nt)!==ee.NONE&&!this.isEditorHandlingKeyboard&&ha._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,ys)&&(_(this,ys,!1),A(this,Ma,Mf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,Zp,$1).call(this),A(this,zu,Vy).call(this),A(this,it,Et).call(this,{isEditing:l(this,nt)!==ee.NONE,isEmpty:A(this,Dr,Ec).call(this),hasSomethingToUndo:l(this,En).hasSomethingToUndo(),hasSomethingToRedo:l(this,En).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,eg,V1).call(this),A(this,Hu,Wy).call(this),A(this,it,Et).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Sn)){_(this,Sn,e);for(const t of l(this,Sn))A(this,Kn,os).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,qp).id}get currentLayer(){return l(this,tt).get(l(this,Ta))}getLayer(e){return l(this,tt).get(e)}get currentPageIndex(){return l(this,Ta)}addLayer(e){l(this,tt).set(e.pageIndex,e),l(this,ws)?e.enable():e.disable()}removeLayer(e){l(this,tt).delete(e.pageIndex)}updateMode(e,t=null,i=!1){if(l(this,nt)!==e){if(_(this,nt,e),e===ee.NONE){this.setEditingState(!1),A(this,sg,Y1).call(this);return}this.setEditingState(!0),A(this,ig,X1).call(this),this.unselectAll();for(const s of l(this,tt).values())s.updateMode(e);if(!t&&i){this.addNewEditorFromKeyboard();return}if(t){for(const s of l(this,ze).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,nt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Sn)){switch(e){case W.CREATE:this.currentLayer.addNewEditor();return;case W.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,Su))==null||i.updateColor(t);break;case W.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,bu)||_(this,bu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,oe))s.updateParams(e,t);for(const s of l(this,Sn))s.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const o of l(this,ze).values())o.editorType===e&&o.show(t);(((r=l(this,bu))==null?void 0:r.get(W.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,Kn,os).call(this,[[W.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Eu)!==e){_(this,Eu,e);for(const t of l(this,tt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,ze).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,ze).get(e)}addEditor(e){l(this,ze).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Xn)&&clearTimeout(l(this,Xn)),_(this,Xn,setTimeout(()=>{this.focusMainContainer(),_(this,Xn,null)},0))),l(this,ze).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Rr).has(e.annotationElementId))&&((t=l(this,Si))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Rr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Rr).has(e)}removeDeletedAnnotationElement(e){l(this,Rr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Gt)!==e&&(_(this,Gt,e),e&&A(this,Kn,os).call(this,e.propertiesToUpdate))}updateUI(e){l(this,rg,q1)===e&&A(this,Kn,os).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,oe).has(e)){l(this,oe).delete(e),e.unselect(),A(this,it,Et).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,oe).add(e),e.select(),A(this,Kn,os).call(this,e.propertiesToUpdate),A(this,it,Et).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,oe))t!==e&&t.unselect();l(this,oe).clear(),l(this,oe).add(e),e.select(),A(this,Kn,os).call(this,e.propertiesToUpdate),A(this,it,Et).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,oe).has(e)}get firstSelectedEditor(){return l(this,oe).values().next().value}unselect(e){e.unselect(),l(this,oe).delete(e),A(this,it,Et).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,oe).size!==0}get isEnterHandled(){return l(this,oe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,En).undo(),A(this,it,Et).call(this,{hasSomethingToUndo:l(this,En).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,Dr,Ec).call(this)})}redo(){l(this,En).redo(),A(this,it,Et).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,En).hasSomethingToRedo(),isEmpty:A(this,Dr,Ec).call(this)})}addCommands(e){l(this,En).add(e),A(this,it,Et).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,Dr,Ec).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,oe)],t=()=>{for(const s of e)s.remove()},i=()=>{for(const s of e)A(this,Bu,Gy).call(this,s)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Gt))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Gt)||this.hasSelection}selectAll(){for(const e of l(this,oe))e.commit();A(this,Uu,Xy).call(this,l(this,ze).values())}unselectAll(){if(!(l(this,Gt)&&(l(this,Gt).commitOrRemove(),l(this,nt)!==ee.NONE))&&this.hasSelection){for(const e of l(this,oe))e.unselect();l(this,oe).clear(),A(this,it,Et).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,_s)[0]+=e,l(this,_s)[1]+=t;const[s,r]=l(this,_s),o=[...l(this,oe)],a=1e3;l(this,qn)&&clearTimeout(l(this,qn)),_(this,qn,setTimeout(()=>{_(this,qn,null),l(this,_s)[0]=l(this,_s)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,ze).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of o)l(this,ze).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,Gn,new Map);for(const e of l(this,oe))l(this,Gn).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Gn))return!1;this.disableUserSelect(!1);const e=l(this,Gn);_(this,Gn,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},a]of e)a.newX=s,a.newY=r,a.newPageIndex=o,t||(t=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const i=(s,r,o,a)=>{if(l(this,ze).has(s.id)){const c=l(this,tt).get(a);c?s._setParentAndPosition(c,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of e)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of e)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Gn))for(const i of l(this,Gn).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,oe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Gt)===e}getActive(){return l(this,Gt)}getMode(){return l(this,nt)}get imageManager(){return ne(this,"imageManager",new Hy)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:m,height:w}of d.getClientRects())m===0||w===0||c.push(a(f,g,m,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,ka)||_(this,ka,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,ka))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,ka))==null?void 0:s.get(e.data.id);if(!t)return;const i=l(this,Si).getRawValue(t);i&&(l(this,nt)===ee.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};xa=new WeakMap,Gt=new WeakMap,ze=new WeakMap,tt=new WeakMap,Ca=new WeakMap,Si=new WeakMap,ka=new WeakMap,En=new WeakMap,Ta=new WeakMap,Rr=new WeakMap,Gn=new WeakMap,Sn=new WeakMap,Lr=new WeakMap,_u=new WeakMap,Au=new WeakMap,Xn=new WeakMap,Pa=new WeakMap,ys=new WeakMap,Yn=new WeakMap,qp=new WeakMap,ws=new WeakMap,Eu=new WeakMap,Mr=new WeakMap,Su=new WeakMap,Ra=new WeakMap,nt=new WeakMap,oe=new WeakMap,bi=new WeakMap,Ir=new WeakMap,bu=new WeakMap,xu=new WeakMap,Cu=new WeakMap,ku=new WeakMap,Tu=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,Lu=new WeakMap,Mu=new WeakMap,Iu=new WeakMap,Du=new WeakMap,Fu=new WeakMap,Nu=new WeakMap,_s=new WeakMap,qn=new WeakMap,xi=new WeakMap,Ou=new WeakMap,La=new WeakSet,Lf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Kp=new WeakSet,H1=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=A(this,La,Lf).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(l(this,Yn)||_(this,Yn,new JP(this)),l(this,Yn).show(i,s,this.direction==="ltr"))},Qp=new WeakSet,B1=function(){var r,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,bi)&&((r=l(this,Yn))==null||r.hide(),_(this,bi,null),A(this,it,Et).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,bi))return;if(!A(this,La,Lf).call(this,e).closest(".textLayer")){l(this,bi)&&((o=l(this,Yn))==null||o.hide(),_(this,bi,null),A(this,it,Et).call(this,{hasSelectedText:!1}));return}if((a=l(this,Yn))==null||a.hide(),_(this,bi,t),A(this,it,Et).call(this,{hasSelectedText:!0}),!(l(this,nt)!==ee.HIGHLIGHT&&l(this,nt)!==ee.NONE)&&(l(this,nt)===ee.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,ys,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=this._signal,u=h=>{h.type==="pointerup"&&h.button!==0||(window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),h.type==="pointerup"&&A(this,Ma,Mf).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}},Ma=new WeakSet,Mf=function(e=""){l(this,nt)===ee.HIGHLIGHT?this.highlightSelection(e):l(this,_u)&&A(this,Kp,H1).call(this)},Jp=new WeakSet,U1=function(){document.addEventListener("selectionchange",A(this,Qp,B1).bind(this),{signal:this._signal})},Zp=new WeakSet,$1=function(){const e=this._signal;window.addEventListener("focus",l(this,Cu),{signal:e}),window.addEventListener("blur",l(this,xu),{signal:e})},eg=new WeakSet,V1=function(){window.removeEventListener("focus",l(this,Cu)),window.removeEventListener("blur",l(this,xu))},ju=new WeakSet,$y=function(){const e=this._signal;window.addEventListener("keydown",l(this,Ru),{signal:e}),window.addEventListener("keyup",l(this,Lu),{signal:e})},tg=new WeakSet,W1=function(){window.removeEventListener("keydown",l(this,Ru)),window.removeEventListener("keyup",l(this,Lu))},zu=new WeakSet,Vy=function(){const e=this._signal;document.addEventListener("copy",l(this,ku),{signal:e}),document.addEventListener("cut",l(this,Tu),{signal:e}),document.addEventListener("paste",l(this,Pu),{signal:e})},Hu=new WeakSet,Wy=function(){document.removeEventListener("copy",l(this,ku)),document.removeEventListener("cut",l(this,Tu)),document.removeEventListener("paste",l(this,Pu))},ng=new WeakSet,G1=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},it=new WeakSet,Et=function(e){Object.entries(e).some(([i,s])=>l(this,Nu)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Nu),e)}),l(this,nt)===ee.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,Kn,os).call(this,[[W.HIGHLIGHT_FREE,!0]]))},Kn=new WeakSet,os=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},ig=new WeakSet,X1=function(){if(!l(this,ws)){_(this,ws,!0);for(const e of l(this,tt).values())e.enable();for(const e of l(this,ze).values())e.enable()}},sg=new WeakSet,Y1=function(){if(this.unselectAll(),l(this,ws)){_(this,ws,!1);for(const e of l(this,tt).values())e.disable();for(const e of l(this,ze).values())e.disable()}},Bu=new WeakSet,Gy=function(e){const t=l(this,tt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},rg=new WeakSet,q1=function(){let e=null;for(e of l(this,oe));return e},Dr=new WeakSet,Ec=function(){if(l(this,ze).size===0)return!0;if(l(this,ze).size===1)for(const e of l(this,ze).values())return e.isEmpty();return!1},Uu=new WeakSet,Xy=function(e){for(const t of l(this,oe))t.unselect();l(this,oe).clear();for(const t of e)t.isEmpty()||(l(this,oe).add(t),t.select());A(this,it,Et).call(this,{hasSelectedEditor:this.hasSelection})},G(ha,"TRANSLATE_SMALL",1),G(ha,"TRANSLATE_BIG",10);let No=ha;var Ci,ki,bn,Ti,Xt,Ia,xn,$u,Yy;const vi=class vi{constructor(e){p(this,$u);p(this,Ci,"");p(this,ki,!1);p(this,bn,null);p(this,Ti,null);p(this,Xt,null);p(this,Ia,!1);p(this,xn,null);_(this,xn,e)}static initialize(e){vi._l10nPromise||(vi._l10nPromise=e)}async render(){const e=_(this,bn,document.createElement("button"));e.className="altText";const t=await vi._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0";const i=l(this,xn)._uiManager._signal;e.addEventListener("contextmenu",Bt,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),l(this,xn)._uiManager.editAltText(l(this,xn))};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(_(this,Ia,!0),s(r))},{signal:i}),await A(this,$u,Yy).call(this),e}finish(){l(this,bn)&&(l(this,bn).focus({focusVisible:l(this,Ia)}),_(this,Ia,!1))}isEmpty(){return!l(this,Ci)&&!l(this,ki)}get data(){return{altText:l(this,Ci),decorative:l(this,ki)}}set data({altText:e,decorative:t}){l(this,Ci)===e&&l(this,ki)===t||(_(this,Ci,e),_(this,ki,t),A(this,$u,Yy).call(this))}toggle(e=!1){l(this,bn)&&(!e&&l(this,Xt)&&(clearTimeout(l(this,Xt)),_(this,Xt,null)),l(this,bn).disabled=!e)}destroy(){var e;(e=l(this,bn))==null||e.remove(),_(this,bn,null),_(this,Ti,null)}};Ci=new WeakMap,ki=new WeakMap,bn=new WeakMap,Ti=new WeakMap,Xt=new WeakMap,Ia=new WeakMap,xn=new WeakMap,$u=new WeakSet,Yy=async function(){var s;const e=l(this,bn);if(!e)return;if(!l(this,Ci)&&!l(this,ki)){e.classList.remove("done"),(s=l(this,Ti))==null||s.remove();return}e.classList.add("done"),vi._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{e.setAttribute("aria-label",r)});let t=l(this,Ti);if(!t){_(this,Ti,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const r=t.id=`alt-text-tooltip-${l(this,xn).id}`;e.setAttribute("aria-describedby",r);const o=100,a=l(this,xn)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(l(this,Xt)),_(this,Xt,null)},{once:!0}),e.addEventListener("mouseenter",()=>{_(this,Xt,setTimeout(()=>{_(this,Xt,null),l(this,Ti).classList.add("show"),l(this,xn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),e.addEventListener("mouseleave",()=>{var c;l(this,Xt)&&(clearTimeout(l(this,Xt)),_(this,Xt,null)),(c=l(this,Ti))==null||c.classList.remove("show")},{signal:a})}t.innerText=l(this,ki)?await vi._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):l(this,Ci),t.parentNode||e.append(t);const i=l(this,xn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},G(vi,"_l10nPromise",null);let Pp=vi;var Fr,Cn,mt,Da,Nr,st,Or,Fa,Na,vt,Vu,jr,As,Wu,zr,Pi,Qn,Oa,ja,ln,Gu,og,Xu,qy,Yu,Ky,qu,Qy,ag,K1,lg,Q1,Ku,Jy,Qu,Zy,Ju,e0,cg,J1,ug,Z1,hg,eb,dg,tb,Zu,t0,Hr,Sc;const de=class de{constructor(e){p(this,Xu);p(this,qu);p(this,ag);p(this,lg);p(this,Ku);p(this,Qu);p(this,Ju);p(this,cg);p(this,ug);p(this,hg);p(this,dg);p(this,Zu);p(this,Hr);p(this,Fr,null);p(this,Cn,null);p(this,mt,null);p(this,Da,!1);p(this,Nr,!1);p(this,st,null);p(this,Or,null);p(this,Fa,this.focusin.bind(this));p(this,Na,this.focusout.bind(this));p(this,vt,null);p(this,Vu,"");p(this,jr,!1);p(this,As,null);p(this,Wu,!1);p(this,zr,!1);p(this,Pi,!1);p(this,Qn,null);p(this,Oa,0);p(this,ja,0);p(this,ln,null);G(this,"_initialOptions",Object.create(null));G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);G(this,"_l10nPromise",null);p(this,Gu,!1);p(this,og,de._zIndex++);this.constructor===de&&he("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=de.prototype._resizeWithKeyboard,t=No.TRANSLATE_SMALL,i=No.TRANSLATE_BIG;return ne(this,"_resizerKeyboardManager",new Od([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],de.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ne(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new nR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,i){if(de._l10nPromise||(de._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,e.get(r.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),i!=null&&i.strings)for(const r of i.strings)de._l10nPromise.set(r,e.get(r));if(de._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);de._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){he("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Gu)}set _isDraggable(e){var t;_(this,Gu,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,og)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,Hr,Sc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,jr)?_(this,jr,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){A(this,Xu,qy).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,As)||_(this,As,[this.x,this.y]),A(this,Xu,qy).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,As)||_(this,As,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,c]=this.getBaseTranslation();r+=a,o+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,As)&&(l(this,As)[0]!==this.x||l(this,As)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=de,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:s,y:r,width:o,height:a}=this;if(o*=t,a*=i,s*=t,r*=i,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),r=Math.max(0,Math.min(i-a,r));break;case 90:s=Math.max(0,Math.min(t-a,s)),r=Math.min(i,Math.max(o,r));break;case 180:s=Math.min(t,Math.max(o,s)),r=Math.min(i,Math.max(a,r));break;case 270:s=Math.min(t,Math.max(a,s)),r=Math.max(0,Math.min(i-o,r));break}this.x=s/=t,this.y=r/=i;const[c,u]=this.getBaseTranslation();s+=c,r+=u;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return A(i=de,Yu,Ky).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return A(i=de,Yu,Ky).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,s=t*e,r=i*e;return Ot.isCSSRoundSupported?[Math.round(s),Math.round(r)]:[s,r]}setDims(e,t){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Nr)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!l(this,Nr)&&t.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!l(this,Nr)&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,mt))==null||e.finish()}async addEditToolbar(){return l(this,vt)||l(this,zr)?l(this,vt):(_(this,vt,new jy(this)),this.div.append(l(this,vt).render()),l(this,mt)&&l(this,vt).addAltTextButton(await l(this,mt).render()),l(this,vt))}removeEditToolbar(){var e;l(this,vt)&&(l(this,vt).remove(),_(this,vt,null),(e=l(this,mt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,mt)||(Pp.initialize(de._l10nPromise),_(this,mt,new Pp(this)),l(this,Fr)&&(l(this,mt).data=l(this,Fr),_(this,Fr,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,mt))==null?void 0:e.data}set altTextData(e){l(this,mt)&&(l(this,mt).data=e)}hasAltText(){var e;return!((e=l(this,mt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Da)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const e=this._uiManager._signal;this.div.addEventListener("focusin",l(this,Fa),{signal:e}),this.div.addEventListener("focusout",l(this,Na),{signal:e});const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),Tp(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Ot.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(_(this,jr,!0),this._isDraggable){A(this,cg,J1).call(this,e);return}A(this,Ju,e0).call(this,e)}moveInDOM(){l(this,Qn)&&clearTimeout(l(this,Qn)),_(this,Qn,setTimeout(()=>{var e;_(this,Qn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/s,h=t/s,d=this.x*r,f=this.y*o,g=this.width*r,m=this.height*o;switch(i){case 0:return[d+u+a,o-f-h-m+c,d+u+g+a,o-f-h+c];case 90:return[d+h+a,o-f+u+c,d+h+m+a,o-f+u+g+c];case 180:return[d-u-g+a,o-f+h+c,d-u+a,o-f+h+m+c];case 270:return[d-h-m+a,o-f-u-g+c,d-h+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,o]=e,a=r-i,c=o-s;switch(this.rotation){case 0:return[i,t-o,a,c];case 90:return[i,t-s,c,a];case 180:return[r,t-s,a,c];case 270:return[r,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_(this,zr,!0)}disableEditMode(){_(this,zr,!1)}isInEditMode(){return l(this,zr)}shouldGetKeyboardEvents(){return l(this,Pi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,i;const e=this._uiManager._signal;(t=this.div)==null||t.addEventListener("focusin",l(this,Fa),{signal:e}),(i=this.div)==null||i.addEventListener("focusout",l(this,Na),{signal:e})}rotate(e){}serialize(e=!1,t=null){he("An editor must be serializable")}static deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,_(s,Fr,e.accessibilityData);const[r,o]=s.pageDimensions,[a,c,u,h]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",l(this,Fa)),this.div.removeEventListener("focusout",l(this,Na)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Qn)&&(clearTimeout(l(this,Qn)),_(this,Qn,null)),A(this,Hr,Sc).call(this),this.removeEditToolbar(),l(this,ln)){for(const e of l(this,ln).values())clearTimeout(e);_(this,ln,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,ag,K1).call(this),l(this,st).classList.remove("hidden"),Tp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),_(this,Or,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,st).children;if(!l(this,Cn)){_(this,Cn,Array.from(t));const o=A(this,ug,Z1).bind(this),a=A(this,hg,eb).bind(this),c=this._uiManager._signal;for(const u of l(this,Cn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",A(this,dg,tb).bind(this,h),{signal:c}),de._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>u.setAttribute("aria-label",d))}}const i=l(this,Cn)[0];let s=0;for(const o of t){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Cn).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)l(this,st).append(l(this,st).firstChild);else if(r>s)for(let a=0;a<r-s;a++)l(this,st).firstChild.before(l(this,st).lastChild);let o=0;for(const a of t){const u=l(this,Cn)[o++].getAttribute("data-resizer-name");de._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(h=>a.setAttribute("aria-label",h))}}A(this,Zu,t0).call(this,0),_(this,Pi,!0),l(this,st).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Pi)&&A(this,Qu,Zy).call(this,l(this,Vu),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){A(this,Hr,Sc).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!l(this,vt)){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=l(this,vt))==null||s.show())});return}(t=l(this,vt))==null||t.show()}unselect(){var e,t,i,s;(e=l(this,st))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=l(this,vt))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Wu)}set isEditing(e){_(this,Wu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){_(this,Nr,!0);const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ln)||_(this,ln,new Map);const{action:i}=e;let s=l(this,ln).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,ln).delete(i),l(this,ln).size===0&&_(this,ln,null)},de._telemetryTimeout),l(this,ln).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),_(this,Da,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,Da,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Fr=new WeakMap,Cn=new WeakMap,mt=new WeakMap,Da=new WeakMap,Nr=new WeakMap,st=new WeakMap,Or=new WeakMap,Fa=new WeakMap,Na=new WeakMap,vt=new WeakMap,Vu=new WeakMap,jr=new WeakMap,As=new WeakMap,Wu=new WeakMap,zr=new WeakMap,Pi=new WeakMap,Qn=new WeakMap,Oa=new WeakMap,ja=new WeakMap,ln=new WeakMap,Gu=new WeakMap,og=new WeakMap,Xu=new WeakSet,qy=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this.fixAndSetPosition()},Yu=new WeakSet,Ky=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},qu=new WeakSet,Qy=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},ag=new WeakSet,K1=function(){if(l(this,st))return;_(this,st,document.createElement("div")),l(this,st).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");l(this,st).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",A(this,lg,Q1).bind(this,i),{signal:t}),s.addEventListener("contextmenu",Bt,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,st))},lg=new WeakSet,Q1=function(e,t){var w;t.preventDefault();const{isMac:i}=Ot.platform;if(t.button!==0||t.ctrlKey&&i)return;(w=l(this,mt))==null||w.toggle(!1);const s=A(this,Qu,Zy).bind(this,e),r=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Bt,{signal:o});const c=this.x,u=this.y,h=this.width,d=this.height,f=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{var S;this.parent.togglePointerEvents(!0),(S=l(this,mt))==null||S.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Bt),this.parent.div.style.cursor=f,this.div.style.cursor=g,A(this,Ku,Jy).call(this,c,u,h,d)};window.addEventListener("pointerup",m,{signal:o}),window.addEventListener("blur",m,{signal:o})},Ku=new WeakSet,Jy=function(e,t,i,s){const r=this.x,o=this.y,a=this.width,c=this.height;r===e&&o===t&&a===i&&c===s||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=r,this.y=o;const[u,h]=this.parentDimensions;this.setDims(u*a,h*c),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*i,h*s),this.fixAndSetPosition()},mustExec:!0})},Qu=new WeakSet,Zy=function(e,t){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,u=de.MIN_SIZE/i,h=de.MIN_SIZE/s,d=N=>Math.round(N*1e4)/1e4,f=A(this,qu,Qy).call(this,this.rotation),g=(N,L)=>[f[0]*N+f[2]*L,f[1]*N+f[3]*L],m=A(this,qu,Qy).call(this,360-this.rotation),w=(N,L)=>[m[0]*N+m[2]*L,m[1]*N+m[3]*L];let S,v,y=!1,E=!1;switch(e){case"topLeft":y=!0,S=(N,L)=>[0,0],v=(N,L)=>[N,L];break;case"topMiddle":S=(N,L)=>[N/2,0],v=(N,L)=>[N/2,L];break;case"topRight":y=!0,S=(N,L)=>[N,0],v=(N,L)=>[0,L];break;case"middleRight":E=!0,S=(N,L)=>[N,L/2],v=(N,L)=>[0,L/2];break;case"bottomRight":y=!0,S=(N,L)=>[N,L],v=(N,L)=>[0,0];break;case"bottomMiddle":S=(N,L)=>[N/2,L],v=(N,L)=>[N/2,0];break;case"bottomLeft":y=!0,S=(N,L)=>[0,L],v=(N,L)=>[N,0];break;case"middleLeft":E=!0,S=(N,L)=>[0,L/2],v=(N,L)=>[N,L/2];break}const b=S(a,c),x=v(a,c);let C=g(...x);const T=d(r+C[0]),R=d(o+C[1]);let I=1,M=1,[F,Y]=this.screenToPageTranslation(t.movementX,t.movementY);if([F,Y]=w(F/i,Y/s),y){const N=Math.hypot(a,c);I=M=Math.max(Math.min(Math.hypot(x[0]-b[0]-F,x[1]-b[1]-Y)/N,1/a,1/c),u/a,h/c)}else E?I=Math.max(u,Math.min(1,Math.abs(x[0]-b[0]-F)))/a:M=Math.max(h,Math.min(1,Math.abs(x[1]-b[1]-Y)))/c;const V=d(a*I),U=d(c*M);C=g(...v(V,U));const K=T-C[0],J=R-C[1];this.width=V,this.height=U,this.x=K,this.y=J,this.setDims(i*V,s*U),this.fixAndSetPosition()},Ju=new WeakSet,e0=function(e){const{isMac:t}=Ot.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},cg=new WeakSet,J1=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,s;const r=this._uiManager._signal;t&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:r},_(this,Oa,e.clientX),_(this,ja,e.clientY),s=a=>{const{clientX:c,clientY:u}=a,[h,d]=this.screenToPageTranslation(c-l(this,Oa),u-l(this,ja));_(this,Oa,c),_(this,ja,u),this._uiManager.dragSelectedEditors(h,d)},window.addEventListener("pointermove",s,i));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),_(this,jr,!1),this._uiManager.endDragSession()||A(this,Ju,e0).call(this,e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},ug=new WeakSet,Z1=function(e){de._resizerKeyboardManager.exec(this,e)},hg=new WeakSet,eb=function(e){var t;l(this,Pi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,st)&&A(this,Hr,Sc).call(this)},dg=new WeakSet,tb=function(e){_(this,Vu,l(this,Pi)?e:"")},Zu=new WeakSet,t0=function(e){if(l(this,Cn))for(const t of l(this,Cn))t.tabIndex=e},Hr=new WeakSet,Sc=function(){if(_(this,Pi,!1),A(this,Zu,t0).call(this,-1),l(this,Or)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=l(this,Or);A(this,Ku,Jy).call(this,e,t,i,s),_(this,Or,null)}},p(de,Yu),G(de,"_borderLineWidth",-1),G(de,"_colorManager",new Uy),G(de,"_zIndex",1),G(de,"_telemetryTimeout",1e3);let ae=de;class nR extends ae{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const bA=3285377520,on=4294901760,Un=65535;class nb{constructor(e){this.h1=e?e&4294967295:bA,this.h2=e?e&4294967295:bA}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,S=e.length;w<S;w++){const v=e.charCodeAt(w);v<=255?t[i++]=v:(t[i++]=v>>>8,t[i++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,g=d&Un,m=f&Un;for(let w=0;w<s;w++)w&1?(a=o[w],a=a*d&on|a*g&Un,a=a<<15|a>>>17,a=a*f&on|a*m&Un,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[w],c=c*d&on|c*g&Un,c=c<<15|c>>>17,c=c*f&on|c*m&Un,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*d&on|a*g&Un,a=a<<15|a>>>17,a=a*f&on|a*m&Un,s&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&on|e*36045&Un,t=t*4283543511&on|((t<<16|e>>>16)*2950163797&on)>>>16,e^=t>>>1,e=e*444984403&on|e*60499&Un,t=t*3301882366&on|((t<<16|e>>>16)*3120437893&on)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const n0=Object.freeze({map:null,hash:"",transfer:void 0});var Br,rt,fg,ib;class Kw{constructor(){p(this,fg);p(this,Br,!1);p(this,rt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,rt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,rt).get(e)}remove(e){if(l(this,rt).delete(e),l(this,rt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,rt).values())if(t instanceof ae)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,rt).get(e);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(t))i[r]!==o&&(s=!0,i[r]=o);else s=!0,l(this,rt).set(e,t);s&&A(this,fg,ib).call(this),t instanceof ae&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,rt).has(e)}getAll(){return l(this,rt).size>0?$w(l(this,rt)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,rt).size}resetModified(){l(this,Br)&&(_(this,Br,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sb(this)}get serializable(){if(l(this,rt).size===0)return n0;const e=new Map,t=new nb,i=[],s=Object.create(null);let r=!1;for(const[o,a]of l(this,rt)){const c=a instanceof ae?a.serialize(!1,s):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:n0}get editorStats(){let e=null;const t=new Map;for(const i of l(this,rt).values()){if(!(i instanceof ae))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[a,c]of Object.entries(s)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}}Br=new WeakMap,rt=new WeakMap,fg=new WeakSet,ib=function(){l(this,Br)||(_(this,Br,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var eh;class sb extends Kw{constructor(t){super();p(this,eh,void 0);const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);_(this,eh,{map:o,hash:s,transfer:r})}get print(){he("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,eh)}}eh=new WeakMap;var za;class iR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){p(this,za,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,za).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,za).has(e.loadedName))){if(Ve(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,o=new FontFace(i,s,r);this.addNativeFontFace(o);try{await o.load(),l(this,za).add(i),t==null||t(e)}catch{q(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}he("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw q(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ne(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(_t||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ne(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ve(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ne(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(b,x){return b.charCodeAt(x)<<24|b.charCodeAt(x+1)<<16|b.charCodeAt(x+2)<<8|b.charCodeAt(x+3)&255}function s(b,x,C,T){const R=b.substring(0,x),I=b.substring(x+C);return R+T+I}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(b,x){if(++u>30){q("Load test font never loaded."),x();return}if(c.font="30px "+b,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(h.bind(null,b,x))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const m=16,w=1482184792;let S=i(f,m);for(r=0,o=d.length-3;r<o;r+=4)S=S-w+i(d,r)|0;r<d.length&&(S=S-w+i(d+"XXX",r)|0),f=s(f,m,4,HP(S));const v=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(y);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const b of[e.loadedName,d]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=b,E.append(x)}this._document.body.append(E),h(d,()=>{E.remove(),t.complete()})}}za=new WeakMap;class sR{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=x1(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),i}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){q(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(r,o){};const s=[];for(let r=0,o=i.length;r<o;)switch(i[r++]){case fi.BEZIER_CURVE_TO:{const[a,c,u,h,d,f]=i.slice(r,r+6);s.push(g=>g.bezierCurveTo(a,c,u,h,d,f)),r+=6}break;case fi.MOVE_TO:{const[a,c]=i.slice(r,r+2);s.push(u=>u.moveTo(a,c)),r+=2}break;case fi.LINE_TO:{const[a,c]=i.slice(r,r+2);s.push(u=>u.lineTo(a,c)),r+=2}break;case fi.QUADRATIC_CURVE_TO:{const[a,c,u,h]=i.slice(r,r+4);s.push(d=>d.quadraticCurveTo(a,c,u,h)),r+=4}break;case fi.RESTORE:s.push(a=>a.restore());break;case fi.SAVE:s.push(a=>a.save());break;case fi.SCALE:Ve(s.length===2,"Scale command is only valid at the third position.");break;case fi.TRANSFORM:{const[a,c,u,h,d,f]=i.slice(r,r+6);s.push(g=>g.transform(a,c,u,h,d,f)),r+=6}break;case fi.TRANSLATE:{const[a,c]=i.slice(r,r+2);s.push(u=>u.translate(a,c)),r+=2}break}return this.compiledGlyphs[t]=function(o,a){s[0](o),s[1](o),o.scale(a,-a);for(let c=2,u=s.length;c<u;c++)s[c](o)}}}if(_t){var i0=Promise.withResolvers(),$c=null;(async()=>{const e=await vc(()=>import("./__vite-browser-external-b25bb000.js"),[]),t=await vc(()=>import("./__vite-browser-external-b25bb000.js"),[]),i=await vc(()=>import("./__vite-browser-external-b25bb000.js"),[]),s=await vc(()=>import("./__vite-browser-external-b25bb000.js"),[]);let r,o;return new Map(Object.entries({fs:e,http:t,https:i,url:s,canvas:r,path2d:o}))})().then(e=>{$c=e,i0.resolve()},e=>{q(`loadPackages: ${e}`),$c=new Map,i0.resolve()})}class di{static get promise(){return i0.promise}static get(e){return $c==null?void 0:$c.get(e)}}const rb=function(n){return di.get("fs").promises.readFile(n).then(t=>new Uint8Array(t))};class rR extends $m{}class oR extends kp{_createCanvas(e,t){return di.get("canvas").createCanvas(e,t)}}class aR extends Vm{_fetchData(e,t){return rb(e).then(i=>({cMapData:i,compressionType:t}))}}class lR extends Wm{_fetchData(e){return rb(e)}}const Ct={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s0(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class jd{constructor(){this.constructor===jd&&he("Cannot initialize BaseShadingPattern.")}getPattern(){he("Abstract method `getPattern` called.")}}class cR extends jd{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Ct.STROKE||s===Ct.FILL){const o=t.current.getClippedPathBoundingBox(s,Ee(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c,!0),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=j.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),s0(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else s0(e,this._bbox),r=this._createGradient(e);return r}}function Lv(n,e,t,i,s,r,o,a){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=a,a=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f);const g=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,S=(c[i+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,y=(c[s+1]+e.offsetY)*e.scaleY;if(m>=y)return;const E=u[r],b=u[r+1],x=u[r+2],C=u[o],T=u[o+1],R=u[o+2],I=u[a],M=u[a+1],F=u[a+2],Y=Math.round(m),V=Math.round(y);let U,K,J,N,L,z,B,se;for(let X=Y;X<=V;X++){if(X<S){const re=X<m?0:(m-X)/(m-S);U=g-(g-w)*re,K=E-(E-C)*re,J=b-(b-T)*re,N=x-(x-R)*re}else{let re;X>y?re=1:S===y?re=0:re=(S-X)/(S-y),U=w-(w-v)*re,K=C-(C-I)*re,J=T-(T-M)*re,N=R-(R-F)*re}let ce;X<m?ce=0:X>y?ce=1:ce=(m-X)/(m-y),L=g-(g-v)*ce,z=E-(E-I)*ce,B=b-(b-M)*ce,se=x-(x-F)*ce;const Ie=Math.round(Math.min(U,L)),Ze=Math.round(Math.max(U,L));let Ae=d*X+Ie*4;for(let re=Ie;re<=Ze;re++)ce=(U-re)/(U-L),ce<0?ce=0:ce>1&&(ce=1),h[Ae++]=K-(K-z)*ce|0,h[Ae++]=J-(J-B)*ce|0,h[Ae++]=N-(N-se)*ce|0,h[Ae++]=255}}function uR(n,e,t){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(i.length/a)-1,u=a-1;for(r=0;r<c;r++){let h=r*a;for(let d=0;d<u;d++,h++)Lv(n,t,i[h],i[h+1],i[h+a],s[h],s[h+1],s[h+a]),Lv(n,t,i[h+a+1],i[h+1],i[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)Lv(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class hR extends jd{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),g=u/d,m=h/f,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/g,scaleY:1/m},S=d+2*2,v=f+2*2,y=i.getCanvas("mesh",S,v,!1),E=y.context,b=E.createImageData(d,f);if(t){const C=b.data;for(let T=0,R=C.length;T<R;T+=4)C[T]=t[0],C[T+1]=t[1],C[T+2]=t[2],C[T+3]=255}for(const C of this._figures)uR(b,C,w);return E.putImageData(b,2,2),{canvas:y.canvas,offsetX:a-2*g,offsetY:c-2*m,scaleX:g,scaleY:m}}getPattern(e,t,i,s){s0(e,this._bbox);let r;if(s===Ct.SHADING)r=j.singularValueDecompose2dScale(Ee(e));else if(r=j.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=j.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,s===Ct.SHADING?null:this._background,t.cachedCanvases);return s!==Ct.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class dR extends jd{getPattern(){return"hotpink"}}function fR(n){switch(n[0]){case"RadialAxial":return new cR(n);case"Mesh":return new hR(n);case"Dummy":return new dR}throw new Error(`Unknown IR type: ${n[0]}`)}const xA={COLORED:1,UNCOLORED:2},pg=class pg{constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,s=this.xstep,r=this.ystep,o=this.paintType,a=this.tilingType,c=this.color,u=this.canvasGraphicsFactory;Hm("TilingType: "+a);const h=i[0],d=i[1],f=i[2],g=i[3],m=j.singularValueDecompose2dScale(this.matrix),w=j.singularValueDecompose2dScale(this.baseTransform),S=[m[0]*w[0],m[1]*w[1]],v=this.getSizeAndScale(s,this.ctx.canvas.width,S[0]),y=this.getSizeAndScale(r,this.ctx.canvas.height,S[1]),E=e.cachedCanvases.getCanvas("pattern",v.size,y.size,!0),b=E.context,x=u.createCanvasGraphics(b);x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,o,c);let C=h,T=d,R=f,I=g;return h<0&&(C=0,R+=Math.abs(h)),d<0&&(T=0,I+=Math.abs(d)),b.translate(-(v.scale*C),-(y.scale*T)),x.transform(v.scale,0,0,y.scale,0,0),b.save(),this.clipBbox(x,C,T,R,I),x.baseTransform=Ee(x.ctx),x.executeOperatorList(t),x.endDrawing(),{canvas:E.canvas,scaleX:v.scale,scaleY:y.scale,offsetX:C,offsetY:T}}getSizeAndScale(e,t,i){e=Math.abs(e);const s=Math.max(pg.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const o=s-t,a=r-i;e.ctx.rect(t,i,o,a),e.current.updateRectMinMax(Ee(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case xA.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case xA.UNCOLORED:const a=j.makeHexColor(i[0],i[1],i[2]);s.fillStyle=a,s.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new zP(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Ct.SHADING&&(r=j.transform(r,t.baseTransform),this.matrix&&(r=j.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};G(pg,"MAX_PATTERN_SIZE",3e3);let r0=pg;function pR({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Ot.isLittleEndian?4278190080:255,[c,u]=o?[r,a]:[a,r],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<s;m++){for(const S=e+h;e<S;e++){const v=e<f?n[e]:255;t[g++]=v&128?u:c,t[g++]=v&64?u:c,t[g++]=v&32?u:c,t[g++]=v&16?u:c,t[g++]=v&8?u:c,t[g++]=v&4?u:c,t[g++]=v&2?u:c,t[g++]=v&1?u:c}if(d===0)continue;const w=e<f?n[e++]:255;for(let S=0;S<d;S++)t[g++]=w&1<<7-S?u:c}return{srcPos:e,destPos:g}}const CA=16,kA=100,gR=15,TA=10,PA=1e3,Dt=16;function mR(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,a,c){e.transform(i,s,r,o,a,c),this.__originalTransform(i,s,r,o,a,c)},n.setTransform=function(i,s,r,o,a,c){e.setTransform(i,s,r,o,a,c),this.__originalSetTransform(i,s,r,o,a,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,o,a){e.bezierCurveTo(t,i,s,r,o,a),this.__originalBezierCurveTo(t,i,s,r,o,a)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class vR{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function cf(n,e,t,i,s,r,o,a,c,u){const[h,d,f,g,m,w]=Ee(n);if(d===0&&f===0){const y=o*h+m,E=Math.round(y),b=a*g+w,x=Math.round(b),C=(o+c)*h+m,T=Math.abs(Math.round(C)-E)||1,R=(a+u)*g+w,I=Math.abs(Math.round(R)-x)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(g),E,x),n.drawImage(e,t,i,s,r,0,0,T,I),n.setTransform(h,d,f,g,m,w),[T,I]}if(h===0&&g===0){const y=a*f+m,E=Math.round(y),b=o*d+w,x=Math.round(b),C=(a+u)*f+m,T=Math.abs(Math.round(C)-E)||1,R=(o+c)*d+w,I=Math.abs(Math.round(R)-x)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,E,x),n.drawImage(e,t,i,s,r,0,0,I,T),n.setTransform(h,d,f,g,m,w),[I,T]}n.drawImage(e,t,i,s,r,o,a,c,u);const S=Math.hypot(h,d),v=Math.hypot(f,g);return[S*c,v*u]}function yR(n){const{width:e,height:t}=n;if(e>PA||t>PA)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const v of n.data){let y=128;for(;y>0;)d[f++]=v&y?0:255,y>>=1}let g=0;for(f=0,d[f]!==0&&(o[0]=1,++g),c=1;c<e;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++g),f++;for(d[f]!==0&&(o[c]=2,++g),a=1;a<t;a++){f=a*h,u=a*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++g);let v=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)v=(v>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),s[v]&&(o[u+c]=s[v],++g),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++g),g>i)return null}for(f=h*(t-1),u=a*r,d[f]!==0&&(o[u]=8,++g),c=1;c<e;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++g),f++;if(d[f]!==0&&(o[u+c]=4,++g),g>i)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(a=0;g&&a<=t;a++){let v=a*r;const y=v+e;for(;v<y&&!o[v];)v++;if(v===y)continue;w.moveTo(v%r,a);const E=v;let b=o[v];do{const x=m[b];do v+=x;while(!o[v]);const C=o[v];C!==5&&C!==10?(b=C,o[v]=0):(b=C&51*b>>4,o[v]&=b>>2|b<<2),w.lineTo(v%r,v/r|0),o[v]||--g}while(E!==v);--a}return d=null,o=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(w),v.beginPath(),v.restore()}}class RA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=S1,this.textMatrixScale=1,this.fontMatrix=Ly,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=pt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=j.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=j.applyTransform(t,e),s=j.applyTransform(t.slice(2),e),r=j.applyTransform([t[0],t[3]],e),o=j.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(e,t){j.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,o,a,c,u,h){const d=j.bezierBoundingBox(t,i,s,r,o,a,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Ct.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ct.STROKE){t||he("Stroke bounding box must include transform.");const s=j.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){const e=j.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ct.FILL,t=null){return j.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function LA(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%Dt,r=(t-s)/Dt,o=s===0?r:r+1,a=n.createImageData(i,Dt);let c=0,u;const h=e.data,d=a.data;let f,g,m,w;if(e.kind===kf.GRAYSCALE_1BPP){const S=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),y=v.length,E=i+7>>3,b=4294967295,x=Ot.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?Dt:s,u=0,g=0;g<m;g++){const C=S-c;let T=0;const R=C>E?i:C*8-7,I=R&-8;let M=0,F=0;for(;T<I;T+=8)F=h[c++],v[u++]=F&128?b:x,v[u++]=F&64?b:x,v[u++]=F&32?b:x,v[u++]=F&16?b:x,v[u++]=F&8?b:x,v[u++]=F&4?b:x,v[u++]=F&2?b:x,v[u++]=F&1?b:x;for(;T<R;T++)M===0&&(F=h[c++],M=128),v[u++]=F&M?b:x,M>>=1}for(;u<y;)v[u++]=0;n.putImageData(a,0,f*Dt)}}else if(e.kind===kf.RGBA_32BPP){for(g=0,w=i*Dt*4,f=0;f<r;f++)d.set(h.subarray(c,c+w)),c+=w,n.putImageData(a,0,g),g+=Dt;f<o&&(w=i*s*4,d.set(h.subarray(c,c+w)),n.putImageData(a,0,g))}else if(e.kind===kf.RGB_24BPP)for(m=Dt,w=i*m,f=0;f<o;f++){for(f>=r&&(m=s,w=i*m),u=0,g=w;g--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(a,0,f*Dt)}else throw new Error(`bad image kind: ${e.kind}`)}function MA(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%Dt,r=(t-s)/Dt,o=s===0?r:r+1,a=n.createImageData(i,Dt);let c=0;const u=e.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?Dt:s;({srcPos:c}=pR({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(a,0,d*Dt)}}function hc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function uf(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!_t){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function IA(n,e){if(e)return!0;const t=j.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*tr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const wR=["butt","round","square"],_R=["miter","round","bevel"],AR={},DA={};var th,o0,nh,a0;const n_=class n_{constructor(e,t,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},c,u){p(this,th);p(this,nh);this.ctx=e,this.current=new RA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new vR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ee(this.compositeCtx))}this.ctx.save(),uf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ee(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,o=e.fnArray;let a=t||0;const c=r.length;if(c===a)return a;const u=c-a>TA&&typeof i=="function",h=u?Date.now()+gR:0;let d=0;const f=this.commonObjs,g=this.objs;let m;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(m=o[a],m!==An.dependency)this[m].apply(this,r[a]);else for(const w of r[a]){const S=w.startsWith("g_")?f:g;if(!S.has(w))return S.get(w,i),a}if(a++,a===c)return a;if(u&&++d>TA){if(Date.now()>h)return i(),a;d=0}}}endDrawing(){A(this,th,o0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,nh,a0).call(this)}_scaleImage(e,t){const i=e.width,s=e.height;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,c=s,u="prescale1",h,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,g=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),h=this.cachedCanvases.getCanvas(u,f,g),d=h.context,d.clearRect(0,0,f,g),d.drawImage(e,0,0,a,c,0,0,f,g),e=h.canvas,a=f,c=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=Ee(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(R),c||(c=new Map,this._cachedBitmapsMap.set(R,c));const I=c.get(u);if(I&&!o){const M=Math.round(Math.min(a[0],a[2])+a[4]),F=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:I,offsetX:M,offsetY:F}}h=I}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),MA(d.context,e));let f=j.transform(a,[1/i,0,0,-1/s,0,0]);f=j.transform(f,[1,0,0,1,0,-s]);const[g,m,w,S]=j.getAxialAlignedBoundingBox([0,0,i,s],f),v=Math.round(w-g)||1,y=Math.round(S-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",v,y),b=E.context,x=g,C=m;b.translate(-x,-C),b.transform(...f),h||(h=this._scaleImage(d.canvas,pi(b)),h=h.img,c&&o&&c.set(u,h)),b.imageSmoothingEnabled=IA(Ee(b),e.interpolate),cf(b,h,0,0,h.width,h.height,0,0,i,s),b.globalCompositeOperation="source-in";const T=j.transform(pi(b),[1,0,0,1,-x,-C]);return b.fillStyle=o?r.getPattern(t,this,T,Ct.FILL):r,b.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,E.canvas)),{canvas:E.canvas,offsetX:Math.round(x),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=wR[e]}setLineJoin(e){this.ctx.lineJoin=_R[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Ee(this.suspendedCtx)),hc(this.suspendedCtx,r),mR(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],o=s[1],a=s[2]-r,c=s[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,i,a,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,o,a,c,u,h,d){let f=e.canvas,g=c-h,m=u-d;if(o){if(g<0||m<0||g+i>f.width||m+s>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),v=S.context;v.drawImage(f,-g,-m),o.some(y=>y!==0)&&(v.globalCompositeOperation="destination-atop",v.fillStyle=j.makeHexColor(...o),v.fillRect(0,0,i,s),v.globalCompositeOperation="source-over"),f=S.canvas,g=m=0}else if(o.some(S=>S!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,m,i,s),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=j.makeHexColor(...o),e.fillRect(g,m,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(c,u,i,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,g,m,i,s,c,u,i,s),t.restore()}save(){this.inSMaskMode?(hc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,o){this.ctx.transform(e,t,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let o=r.x,a=r.y,c,u;const h=Ee(s),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?i.slice(0):null;for(let g=0,m=0,w=e.length;g<w;g++)switch(e[g]|0){case An.rectangle:o=t[m++],a=t[m++];const S=t[m++],v=t[m++],y=o+S,E=a+v;s.moveTo(o,a),S===0||v===0?s.lineTo(y,E):(s.lineTo(y,a),s.lineTo(y,E),s.lineTo(o,E)),d||r.updateRectMinMax(h,[o,a,y,E]),s.closePath();break;case An.moveTo:o=t[m++],a=t[m++],s.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case An.lineTo:o=t[m++],a=t[m++],s.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case An.curveTo:c=o,u=a,o=t[m+4],a=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],t[m+2],t[m+3],o,a,f),m+=6;break;case An.curveTo2:c=o,u=a,s.bezierCurveTo(o,a,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(h,c,u,o,a,t[m],t[m+1],t[m+2],t[m+3],f),o=t[m+2],a=t[m+3],m+=4;break;case An.curveTo3:c=o,u=a,o=t[m+2],a=t[m+3],s.bezierCurveTo(t[m],t[m+1],o,a,o,a),r.updateCurvePathMinMax(h,c,u,t[m],t[m+1],o,a,o,a,f),m+=4;break;case An.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,pi(t),Ct.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,pi(t),Ct.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=AR}eoClip(){this.pendingClip=DA}beginText(){this.current.textMatrix=S1,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||Ly,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&q("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const c=i.italic?"italic":"normal";let u=t;t<CA?u=CA:t>kA&&(u=kA),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,o){this.current.textMatrix=[e,t,i,s,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const r=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&pt.FILL_STROKE_MASK,d=!!(c&pt.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let g;(a.disableFontFace||d||f)&&(g=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||f?(r.save(),r.translate(t,i),r.beginPath(),g(r,u),s&&r.setTransform(...s),(h===pt.FILL||h===pt.FILL_STROKE)&&r.fill(),(h===pt.STROKE||h===pt.FILL_STROKE)&&r.stroke(),r.restore()):((h===pt.FILL||h===pt.FILL_STROKE)&&r.fillText(e,t,i),(h===pt.STROKE||h===pt.FILL_STROKE)&&r.strokeText(e,t,i)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ee(r),x:t,y:i,fontSize:u,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return ne(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=i.vertical,g=f?1:-1,m=i.defaultVMetrics,w=s*t.fontMatrix[0],S=t.textRenderingMode===pt.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let v;if(t.patternFill){r.save();const C=t.fillColor.getPattern(r,this,pi(r),Ct.FILL);v=Ee(r),r.restore(),r.fillStyle=C}let y=t.lineWidth;const E=t.textMatrixScale;if(E===0||y===0){const C=t.textRenderingMode&pt.FILL_STROKE_MASK;(C===pt.STROKE||C===pt.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=E;if(o!==1&&(r.scale(o,o),y/=o),r.lineWidth=y,i.isInvalidPDFjsFont){const C=[];let T=0;for(const R of e)C.push(R.unicode),T+=R.width;r.fillText(C.join(""),0,0),t.x+=T*w*h,r.restore(),this.compose();return}let b=0,x;for(x=0;x<d;++x){const C=e[x];if(typeof C=="number"){b+=g*C*s/1e3;continue}let T=!1;const R=(C.isSpace?c:0)+a,I=C.fontChar,M=C.accent;let F,Y,V=C.width;if(f){const K=C.vmetric||m,J=-(C.vmetric?K[1]:V*.5)*w,N=K[2]*w;V=K?-K[0]:V,F=J/o,Y=(b+N)/o}else F=b/o,Y=0;if(i.remeasure&&V>0){const K=r.measureText(I).width*1e3/s*o;if(V<K&&this.isFontSubpixelAAEnabled){const J=V/K;T=!0,r.save(),r.scale(J,1),F/=J}else V!==K&&(F+=(V-K)/2e3*s/o)}if(this.contentVisible&&(C.isInFont||i.missingFile)){if(S&&!M)r.fillText(I,F,Y);else if(this.paintChar(I,F,Y,v),M){const K=F+s*M.offset.x/o,J=Y-s*M.offset.y/o;this.paintChar(M.fontChar,K,J,v)}}const U=f?V*w-R*u:V*w+R*u;b+=U,T&&r.restore()}f?t.y-=b:t.x+=b*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||Ly,f=e.length,g=i.textRenderingMode===pt.INVISIBLE;let m,w,S,v;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,o),m=0;m<f;++m){if(w=e[m],typeof w=="number"){v=a*w*r/1e3,this.ctx.translate(v,0),i.x+=v*h;continue}const y=(w.isSpace?u:0)+c,E=s.charProcOperatorList[w.operatorListId];if(!E){q(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(E),this.restore()),S=j.applyTransform([w.width,0],d)[0]*r+y,t.translate(S,0),i.x+=S*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||Ee(this.ctx),r={createCanvasGraphics:o=>new n_(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new r0(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const s=j.makeHexColor(e,t,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,i){const s=j.makeHexColor(e,t,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=fR(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,pi(t),Ct.SHADING);const s=pi(t);if(s){const{width:r,height:o}=t.canvas,[a,c,u,h]=j.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,c,u-a,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){he("Should not call beginInlineImage")}beginImageData(){he("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ee(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(Ee(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Hm("TODO: Support non-isolated groups."),e.knockout&&q("Knockout groups not supported.");const i=Ee(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=j.getAxialAlignedBoundingBox(e.bbox,Ee(t));const r=[0,0,t.canvas.width,t.canvas.height];s=j.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-a),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),hc(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ee(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=j.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(A(this,th,o0).call(this),uf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,u]=j.singularValueDecompose2dScale(Ee(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),uf(this.ctx)}else uf(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new RA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,nh,a0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=yR(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=Ee(a);a.transform(t,i,s,r,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=j.transform(c,[t,i,s,r,o[h],o[h+1]]),[g,m]=j.applyTransform([0,0],f);a.drawImage(u.canvas,g,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:o,width:a,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=h.context;d.save();const f=this.getObject(o,r);MA(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,pi(t),Ct.FILL):i,d.fillRect(0,0,a,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),cf(t,h.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){q("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){q("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let u=0,h=s.length;u<h;u+=2)c.push({transform:[t,0,0,i,s[u],s[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!_t){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;LA(c,e),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,pi(s));s.imageSmoothingEnabled=IA(Ee(s),e.interpolate),cf(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;LA(c,e),s=this.applyTransferMapsToCanvas(c)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),cf(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===DA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ee(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=a=1/c;else{const h=c*e;o=a=h<1?1/h:1}else if(e===0)o=1/c,a=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,a=d<1?1/d:1}}else{const c=Math.abs(t*r-i*s),u=Math.hypot(t,i),h=Math.hypot(s,r);if(e===0)o=h/c,a=u/c;else{const d=e*c;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,r),o.length>0){const a=Math.max(s,r);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};th=new WeakSet,o0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},nh=new WeakSet,a0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ya=n_;for(const n in An)ya.prototype[n]!==void 0&&(ya.prototype[An[n]]=ya.prototype[n]);var ih,sh;class Ji{static get workerPort(){return l(this,ih)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");_(this,ih,e)}static get workerSrc(){return l(this,sh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");_(this,sh,e)}}ih=new WeakMap,sh=new WeakMap,p(Ji,ih,null),p(Ji,sh,"");const hf={UNKNOWN:0,DATA:1,ERROR:2},Fe={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $t(n){switch(n instanceof Error||typeof n=="object"&&n!==null||he('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Uo(n.message);case"MissingPDFException":return new Bo(n.message);case"PasswordException":return new Iy(n.message,n.code);case"UnexpectedResponseException":return new Bm(n.message,n.status);case"UnknownErrorException":return new Dy(n.message,n.details);default:return new Dy(n.message,n.toString())}}var gg,ob,mg,ab,Ha,If;class bc{constructor(e,t,i){p(this,gg);p(this,mg);p(this,Ha);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const r=s.data;if(r.targetName!==this.sourceName)return;if(r.stream){A(this,mg,ab).call(this,r);return}if(r.callback){const a=r.callbackId,c=this.callbackCapabilities[a];if(!c)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],r.callback===hf.DATA)c.resolve(r.data);else if(r.callback===hf.ERROR)c.reject($t(r.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[r.action];if(!o)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const a=this.sourceName,c=r.sourceName;new Promise(function(u){u(o(r.data))}).then(function(u){i.postMessage({sourceName:a,targetName:c,callback:hf.DATA,callbackId:r.callbackId,data:u})},function(u){i.postMessage({sourceName:a,targetName:c,callback:hf.ERROR,callbackId:r.callbackId,reason:$t(u)})});return}if(r.streamId){A(this,gg,ob).call(this,r);return}o(r.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:Fe.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ve(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Fe.CANCEL,streamId:r,reason:$t(u)}),h.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}gg=new WeakSet,ob=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Fe.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Fe.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Ve(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Fe.ERROR,streamId:t,reason:$t(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(a(e.data,c))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Fe.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Fe.START_COMPLETE,streamId:t,reason:$t(u)})})},mg=new WeakSet,ab=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Fe.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject($t(e.reason));break;case Fe.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject($t(e.reason));break;case Fe.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:Fe.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=a.onPull)==null?void 0:u.call(a))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Fe.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Fe.PULL_COMPLETE,streamId:t,reason:$t(c)})});break;case Fe.ENQUEUE:if(Ve(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Fe.CLOSE:if(Ve(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,Ha,If).call(this,o,t);break;case Fe.ERROR:Ve(o,"error should have stream controller"),o.controller.error($t(e.reason)),A(this,Ha,If).call(this,o,t);break;case Fe.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject($t(e.reason)),A(this,Ha,If).call(this,o,t);break;case Fe.CANCEL:if(!a)break;new Promise(function(c){var u;c((u=a.onCancel)==null?void 0:u.call(a,$t(e.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Fe.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:Fe.CANCEL_COMPLETE,streamId:t,reason:$t(c)})}),a.sinkCapability.reject($t(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Ha=new WeakSet,If=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Ur,rh;class ER{constructor({parsedData:e,rawData:t}){p(this,Ur,void 0);p(this,rh,void 0);_(this,Ur,e),_(this,rh,t)}getRaw(){return l(this,rh)}get(e){return l(this,Ur).get(e)??null}getAll(){return $w(l(this,Ur))}has(e){return l(this,Ur).has(e)}}Ur=new WeakMap,rh=new WeakMap;const as=Symbol("INTERNAL");var oh,ah,lh,Ba;class SR{constructor(e,{name:t,intent:i,usage:s}){p(this,oh,!1);p(this,ah,!1);p(this,lh,!1);p(this,Ba,!0);_(this,oh,!!(e&hn.DISPLAY)),_(this,ah,!!(e&hn.PRINT)),this.name=t,this.intent=i,this.usage=s}get visible(){if(l(this,lh))return l(this,Ba);if(!l(this,Ba))return!1;const{print:e,view:t}=this.usage;return l(this,oh)?(t==null?void 0:t.viewState)!=="OFF":l(this,ah)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==as&&he("Internal method `_setVisible` called."),_(this,lh,i),_(this,Ba,t)}}oh=new WeakMap,ah=new WeakMap,lh=new WeakMap,Ba=new WeakMap;var Es,ue,Ua,$a,ch,l0;class bR{constructor(e,t=hn.DISPLAY){p(this,ch);p(this,Es,null);p(this,ue,new Map);p(this,Ua,null);p(this,$a,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,_(this,$a,e.order);for(const i of e.groups)l(this,ue).set(i.id,new SR(t,i));if(e.baseState==="OFF")for(const i of l(this,ue).values())i._setVisible(as,!1);for(const i of e.on)l(this,ue).get(i)._setVisible(as,!0);for(const i of e.off)l(this,ue).get(i)._setVisible(as,!1);_(this,Ua,this.getHash())}}isVisible(e){if(l(this,ue).size===0)return!0;if(!e)return Hm("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,ue).has(e.id)?l(this,ue).get(e.id).visible:(q(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,ch,l0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,ue).has(t))return q(`Optional content group not found: ${t}`),!0;if(l(this,ue).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,ue).has(t))return q(`Optional content group not found: ${t}`),!0;if(!l(this,ue).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,ue).has(t))return q(`Optional content group not found: ${t}`),!0;if(!l(this,ue).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,ue).has(t))return q(`Optional content group not found: ${t}`),!0;if(l(this,ue).get(t).visible)return!1}return!0}return q(`Unknown optional content policy ${e.policy}.`),!0}return q(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const i=l(this,ue).get(e);if(!i){q(`Optional content group not found: ${e}`);return}i._setVisible(as,!!t,!0),_(this,Es,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=l(this,ue).get(s);if(r)switch(i){case"ON":r._setVisible(as,!0);break;case"OFF":r._setVisible(as,!1);break;case"Toggle":r._setVisible(as,!r.visible);break}}_(this,Es,null)}get hasInitialVisibility(){return l(this,Ua)===null||this.getHash()===l(this,Ua)}getOrder(){return l(this,ue).size?l(this,$a)?l(this,$a).slice():[...l(this,ue).keys()]:null}getGroups(){return l(this,ue).size>0?$w(l(this,ue)):null}getGroup(e){return l(this,ue).get(e)||null}getHash(){if(l(this,Es)!==null)return l(this,Es);const e=new nb;for(const[t,i]of l(this,ue))e.update(`${t}:${i.visible}`);return _(this,Es,e.hexdigest())}}Es=new WeakMap,ue=new WeakMap,Ua=new WeakMap,$a=new WeakMap,ch=new WeakSet,l0=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=A(this,ch,l0).call(this,r);else if(l(this,ue).has(r))o=l(this,ue).get(r).visible;else return q(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class xR{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Ve(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});Ve(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ve(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new CR(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new kR(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class CR{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Yw(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class kR{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function TR(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=a(t);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),g=Um(d);d=f.decode(g),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(h))!==null;){let[,w,S,v]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[S,v]}const m=[];for(let w=0;w<d.length&&w in d;++w){let[S,v]=d[w];v=a(v),S&&(v=unescape(v),w===0&&(v=c(v))),m.push(v)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return s(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,S){return String.fromCharCode(parseInt(S,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function Qw({getResponseHeader:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Jw(n){const e=n("Content-Disposition");if(e){let t=TR(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Yw(t))return t}return null}function Xm(n,e){return n===404||n===0&&e.startsWith("file:")?new Bo('Missing PDF "'+e+'".'):new Bm(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function lb(n){return n===200||n===206}function cb(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ub(n){const e=new Headers;for(const t in n){const i=n[t];i!==void 0&&e.append(t,i)}return e}function hb(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(q(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class FA{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ve(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new RR(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class PR{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=ub(this._stream.httpHeaders);const i=t.url;fetch(i,cb(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!lb(s.status))throw Xm(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=c=>s.headers.get(c),{allowRangeRequests:o,suggestedLength:a}=Qw({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Jw(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Uo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:hb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class RR{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=ub(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${i-1}`);const r=s.url;fetch(r,cb(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!lb(o.status))throw Xm(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:hb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Mv=200,Iv=206;function LR(n){const e=n.response;return typeof e!="string"?e:Um(e).buffer}class MR{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const s={begin:e,end:t};for(const r in i)s[r]=i[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const o=this.httpHeaders[r];o!==void 0&&t.setRequestHeader(r,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Iv):s.expectedStatus=Mv,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){var c,u,h;const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=i.onError)==null||c.call(i,s.status);return}const r=s.status||Mv;if(!(r===Mv&&i.expectedStatus===Iv)&&r!==i.expectedStatus){(u=i.onError)==null||u.call(i,s.status);return}const a=LR(s);if(r===Iv){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);i.onDone({begin:parseInt(f[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(h=i.onError)==null||h.call(i,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class IR{constructor(e){this._source=e,this._manager=new MR(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ve(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new DR(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new FR(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class DR{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=o=>t.getResponseHeader(o),{allowRangeRequests:s,suggestedLength:r}=Qw({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Jw(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Xm(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class FR{constructor(e,t,i){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Xm(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const db=/^file:\/\/\/[a-zA-Z]:\//;function NR(n){const e=di.get("url"),t=e.parse(n);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(n)?e.parse(`file:///${n}`):(t.host||(t.protocol="file:"),t)}class OR{constructor(e){this.source=e,this.url=NR(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ve(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new HR(this):new jR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new BR(this,e,t):new zR(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class fb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Uo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Rp(n,e){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:e}}class jR extends fb{constructor(e){super(e);const t=i=>{if(i.statusCode===404){const a=new Bo(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:r,suggestedLength:o}=Qw({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=Jw(s)};if(this._request=null,this._url.protocol==="http:"){const i=di.get("http");this._request=i.request(Rp(this._url,e.httpHeaders),t)}else{const i=di.get("https");this._request=i.request(Rp(this._url,e.httpHeaders),t)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class zR extends pb{constructor(e,t,i){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const o=e.httpHeaders[r];o!==void 0&&(this._httpHeaders[r]=o)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const s=r=>{if(r.statusCode===404){const o=new Bo(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=di.get("http");this._request=r.request(Rp(this._url,this._httpHeaders),s)}else{const r=di.get("https");this._request=r.request(Rp(this._url,this._httpHeaders),s)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class HR extends fb{constructor(e){super(e);let t=decodeURIComponent(this._url.path);db.test(this._url.href)&&(t=t.replace(/^\//,""));const i=di.get("fs");i.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Bo(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class BR extends pb{constructor(e,t,i){super(e);let s=decodeURIComponent(this._url.path);db.test(this._url.href)&&(s=s.replace(/^\//,""));const r=di.get("fs");this._setReadableStream(r.createReadStream(s,{start:t,end:i-1}))}}const UR=1e5,Lt=30,$R=.8;var KA,Ss,It,uh,hh,$r,Ri,dh,fh,Vr,Va,Wa,bs,Ga,ph,Xa,Wr,gh,mh,Ne,Gr,Xr,xs,Ya,vg,gb,yg,mb,vh,c0,qa,Df,wg,vb,_g,yb;let Lp=(Ne=class{constructor({textContentSource:e,container:t,viewport:i}){p(this,vg);p(this,yg);p(this,vh);p(this,Ss,Promise.withResolvers());p(this,It,null);p(this,uh,!1);p(this,hh,!!((KA=globalThis.FontInspector)!=null&&KA.enabled));p(this,$r,null);p(this,Ri,null);p(this,dh,0);p(this,fh,0);p(this,Vr,null);p(this,Va,null);p(this,Wa,0);p(this,bs,0);p(this,Ga,Object.create(null));p(this,ph,[]);p(this,Xa,null);p(this,Wr,[]);p(this,gh,new WeakMap);p(this,mh,null);var c;if(e instanceof ReadableStream)_(this,Xa,e);else if(typeof e=="object")_(this,Xa,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,It,_(this,Va,t)),_(this,bs,i.scale*(globalThis.devicePixelRatio||1)),_(this,Wa,i.rotation),_(this,Ri,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;_(this,mh,[1,0,0,-1,-o,a+r]),_(this,fh,s),_(this,dh,r),A(c=Ne,wg,vb).call(c),Fo(t,i),l(this,Ss).promise.catch(()=>{}).then(()=>{l(Ne,Ya).delete(this),_(this,Ri,null),_(this,Ga,null)})}render(){const e=()=>{l(this,Vr).read().then(({value:t,done:i})=>{if(i){l(this,Ss).resolve();return}l(this,$r)??_(this,$r,t.lang),Object.assign(l(this,Ga),t.styles),A(this,vg,gb).call(this,t.items),e()},l(this,Ss).reject)};return _(this,Vr,l(this,Xa).getReader()),l(Ne,Ya).add(this),e(),l(this,Ss).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==l(this,Wa)&&(t==null||t(),_(this,Wa,s),Fo(l(this,Va),{rotation:s})),i!==l(this,bs)){t==null||t(),_(this,bs,i);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:A(r=Ne,qa,Df).call(r,l(this,$r))};for(const a of l(this,Wr))o.properties=l(this,gh).get(a),o.div=a,A(this,vh,c0).call(this,o)}}cancel(){var t;const e=new Uo("TextLayer task cancelled.");(t=l(this,Vr))==null||t.cancel(e).catch(()=>{}),_(this,Vr,null),l(this,Ss).reject(e)}get textDivs(){return l(this,Wr)}get textContentItemsStr(){return l(this,ph)}static cleanup(){if(!(l(this,Ya).size>0)){l(this,Gr).clear();for(const{canvas:e}of l(this,Xr).values())e.remove();l(this,Xr).clear()}}},Ss=new WeakMap,It=new WeakMap,uh=new WeakMap,hh=new WeakMap,$r=new WeakMap,Ri=new WeakMap,dh=new WeakMap,fh=new WeakMap,Vr=new WeakMap,Va=new WeakMap,Wa=new WeakMap,bs=new WeakMap,Ga=new WeakMap,ph=new WeakMap,Xa=new WeakMap,Wr=new WeakMap,gh=new WeakMap,mh=new WeakMap,Gr=new WeakMap,Xr=new WeakMap,xs=new WeakMap,Ya=new WeakMap,vg=new WeakSet,gb=function(e){var s,r;if(l(this,uh))return;(r=l(this,Ri)).ctx??(r.ctx=A(s=Ne,qa,Df).call(s,l(this,$r)));const t=l(this,Wr),i=l(this,ph);for(const o of e){if(t.length>UR){q("Ignoring additional textDivs for performance reasons."),_(this,uh,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,It);_(this,It,document.createElement("span")),l(this,It).classList.add("markedContent"),o.id!==null&&l(this,It).setAttribute("id",`${o.id}`),a.append(l(this,It))}else o.type==="endMarkedContent"&&_(this,It,l(this,It).parentNode);continue}i.push(o.str),A(this,yg,mb).call(this,o)}},yg=new WeakSet,mb=function(e){var w;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Wr).push(t);const s=j.transform(l(this,mh),e.transform);let r=Math.atan2(s[1],s[0]);const o=l(this,Ga)[e.fontName];o.vertical&&(r+=Math.PI/2);const a=l(this,hh)&&o.fontSubstitution||o.fontFamily,c=Math.hypot(s[2],s[3]),u=c*A(w=Ne,_g,yb).call(w,a,l(this,$r));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",g=t.style;l(this,It)===l(this,Va)?(g.left=`${(100*h/l(this,fh)).toFixed(2)}%`,g.top=`${(100*d/l(this,dh)).toFixed(2)}%`):(g.left=`${f}${h.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(l(Ne,xs)*c).toFixed(2)}px)`,g.fontFamily=a,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,hh)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);S!==v&&Math.max(S,v)/Math.min(S,v)>1.5&&(m=!0)}if(m&&(i.canvasWidth=o.vertical?e.height:e.width),l(this,gh).set(t,i),l(this,Ri).div=t,l(this,Ri).properties=i,A(this,vh,c0).call(this,l(this,Ri)),i.hasText&&l(this,It).append(t),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),l(this,It).append(S)}},vh=new WeakSet,c0=function(e){const{div:t,properties:i,ctx:s,prevFontSize:r,prevFontFamily:o}=e,{style:a}=t;let c="";if(l(Ne,xs)>1&&(c=`scale(${1/l(Ne,xs)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:d}=i;(r!==d||o!==u)&&(s.font=`${d*l(this,bs)}px ${u}`,e.prevFontSize=d,e.prevFontFamily=u);const{width:f}=s.measureText(t.textContent);f>0&&(c=`scaleX(${h*l(this,bs)/f}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(a.transform=c)},qa=new WeakSet,Df=function(e=null){let t=l(this,Xr).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Xr).set(e,t)}return t},wg=new WeakSet,vb=function(){if(l(this,xs)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.textContent="X",document.body.append(e),_(this,xs,e.getBoundingClientRect().height),e.remove()},_g=new WeakSet,yb=function(e,t){const i=l(this,Gr).get(e);if(i)return i;const s=A(this,qa,Df).call(this,t),r=s.font;s.canvas.width=s.canvas.height=Lt,s.font=`${Lt}px ${e}`;const o=s.measureText("");let a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(a){const d=a/(a+c);return l(this,Gr).set(e,d),s.canvas.width=s.canvas.height=0,s.font=r,d}s.strokeStyle="red",s.clearRect(0,0,Lt,Lt),s.strokeText("g",0,0);let u=s.getImageData(0,0,Lt,Lt).data;c=0;for(let d=u.length-1-3;d>=0;d-=4)if(u[d]>0){c=Math.ceil(d/4/Lt);break}s.clearRect(0,0,Lt,Lt),s.strokeText("A",0,Lt),u=s.getImageData(0,0,Lt,Lt).data,a=0;for(let d=0,f=u.length;d<f;d+=4)if(u[d]>0){a=Lt-Math.floor(d/4/Lt);break}s.canvas.width=s.canvas.height=0,s.font=r;const h=a?a/(a+c):$R;return l(this,Gr).set(e,h),h},p(Ne,qa),p(Ne,wg),p(Ne,_g),p(Ne,Gr,new Map),p(Ne,Xr,new Map),p(Ne,xs,null),p(Ne,Ya,new Set),Ne);function VR(){R1("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:n,container:e,viewport:t,...i}=arguments[0],s=Object.keys(i);s.length>0&&q("Ignoring `renderTextLayer` parameters: "+s.join(", "));const r=new Lp({textContentSource:n,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=r;return{promise:r.render(),textDivs:o,textContentItemsStr:a}}function WR(){R1("`updateTextLayer`, please use `TextLayer` instead.")}class uu{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(uu.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const GR=65536,XR=100,YR=5e3,qR=_t?oR:XP,KR=_t?aR:T1,QR=_t?rR:GP,JR=_t?lR:P1;function ZR(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new u0,{docId:t}=e,i=n.url?eL(n.url):null,s=n.data?tL(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof wb?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:GR;let h=n.worker instanceof wa?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Xw(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,w=n.CMapReaderFactory||KR,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,v=n.StandardFontDataFactory||JR,y=n.stopAtErrors!==!0,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!_t,C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T=typeof n.disableFontFace=="boolean"?n.disableFontFace:_t,R=n.fontExtraProperties===!0,I=n.enableXfa===!0,M=n.ownerDocument||globalThis.document,F=n.disableRange===!0,Y=n.disableStream===!0,V=n.disableAutoFetch===!0,U=n.pdfBug===!0,K=n.enableHWA===!0,J=c?c.length:n.length??NaN,N=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!_t&&!T,L=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===T1&&v===P1&&g&&S&&Ac(g,document.baseURI)&&Ac(S,document.baseURI),z=n.canvasFactory||new qR({ownerDocument:M,enableHWA:K}),B=n.filterFactory||new QR({docId:t,ownerDocument:M}),se=null;FP(d);const X={canvasFactory:z,filterFactory:B};if(L||(X.cMapReaderFactory=new w({baseUrl:g,isCompressed:m}),X.standardFontDataFactory=new v({baseUrl:S})),!h){const Ze={verbosity:d,port:Ji.workerPort};h=Ze.port?wa.fromPort(Ze):new wa(Ze),e._worker=h}const ce={docId:t,apiVersion:"4.4.168",data:s,password:a,disableAutoFetch:V,rangeChunkSize:u,length:J,docBaseUrl:f,enableXfa:I,evaluatorOptions:{maxImageSize:E,disableFontFace:T,ignoreErrors:y,isEvalSupported:b,isOffscreenCanvasSupported:x,canvasMaxAreaInBytes:C,fontExtraProperties:R,useSystemFonts:N,cMapUrl:L?g:null,standardFontDataUrl:L?S:null}},Ie={disableFontFace:T,fontExtraProperties:R,ownerDocument:M,pdfBug:U,styleElement:se,loadingParams:{disableAutoFetch:V,enableXfa:I}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ze=h.messageHandler.sendWithPromise("GetDocRequest",ce,s?[s.buffer]:null);let Ae;if(c)Ae=new xR(c,{disableRange:F,disableStream:Y});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");Ae=(Rt=>_t?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Ac(Rt.url)?new FA(Rt):new OR(Rt):Ac(Rt.url)?new FA(Rt):new IR(Rt))({url:i,length:J,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:F,disableStream:Y})}return Ze.then(re=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Rt=new bc(t,re,h.port),Hn=new rL(Rt,e,Ae,Ie,X);e._transport=Hn,Rt.send("Ready",null)})}).catch(e._capability.reject),e}function eL(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(_t&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function tL(n){if(_t&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Um(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function NA(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Ag;const Eg=class Eg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ut(Eg,Ag)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ag=new WeakMap,p(Eg,Ag,0);let u0=Eg,wb=class{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){he("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class nL{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ne(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Cs,Li,ks,Ko,Ka,Ff;class iL{constructor(e,t,i,s=!1){p(this,ks);p(this,Ka);p(this,Cs,null);p(this,Li,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new EA:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new _b,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Nd({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ne(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=fs.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null}){var E,b;(E=this._stats)==null||E.time("Overall");const d=this._transport.getRenderingIntent(i,s,h),{renderingIntent:f,cacheKey:g}=d;_(this,Li,!1),A(this,Ka,Ff).call(this),a||(a=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const w=!!(f&hn.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(b=this._stats)==null||b.time("Page Request"),this._pumpOperatorList(d));const S=x=>{var C;m.renderTasks.delete(v),(this._maybeCleanupAfterRender||w)&&_(this,Li,!0),A(this,ks,Ko).call(this,!w),x?(v.capability.reject(x),this._abortOperatorList({intentState:m,reason:x instanceof Error?x:new Error(x)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(C=globalThis.Stats)!=null&&C.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new d0({callback:S,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u});(m.renderTasks||(m.renderTasks=new Set)).add(v);const y=v.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([x,C])=>{var T;if(this.destroyed){S();return}if((T=this._stats)==null||T.time("Rendering"),!(C.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:x,optionalContentConfig:C}),v.operatorListChanged()}).catch(S),y}getOperatorList({intent:e="display",annotationMode:t=fs.ENABLE,printAnnotationStorage:i=null}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const r=this._transport.getRenderingIntent(e,t,i,!0);let o=this._intentStates.get(r.cacheKey);o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(r)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>uu.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),_(this,Li,!1),A(this,Ka,Ff).call(this),Promise.all(e)}cleanup(e=!1){_(this,Li,!0);const t=A(this,ks,Ko).call(this,!1);return e&&t&&this._stats&&(this._stats=new EA),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&A(this,ks,Ko).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:s,transfer:r}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},r).getReader(),c=this._intentStates.get(t);c.streamReader=a;const u=()=>{a.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const d of c.renderTasks)d.operatorListChanged();A(this,ks,Ko).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Gw){let s=XR;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Uo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Cs=new WeakMap,Li=new WeakMap,ks=new WeakSet,Ko=function(e=!1){if(A(this,Ka,Ff).call(this),!l(this,Li)||this.destroyed)return!1;if(e)return _(this,Cs,setTimeout(()=>{_(this,Cs,null),A(this,ks,Ko).call(this,!1)},YR)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,Li,!1),!0},Ka=new WeakSet,Ff=function(){l(this,Cs)&&(clearTimeout(l(this,Cs)),_(this,Cs,null))};var Yr,Sg;class sL{constructor(){p(this,Yr,new Set);p(this,Sg,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Sg).then(()=>{for(const s of l(this,Yr))s.call(this,i)})}addEventListener(e,t){l(this,Yr).add(t)}removeEventListener(e,t){l(this,Yr).delete(t)}terminate(){l(this,Yr).clear()}}Yr=new WeakMap,Sg=new WeakMap;const Ai={isWorkerDisabled:!1,fakeWorkerId:0};_t&&(Ai.isWorkerDisabled=!0,Ji.workerSrc||(Ji.workerSrc="./pdf.worker.mjs")),Ai.isSameOrigin=function(n,e){let t;try{if(t=new URL(n),!t.origin||t.origin==="null")return!1}catch{return!1}const i=new URL(e,t);return t.origin===i.origin},Ai.createCDNWrapper=function(n){const e=`await import("${n}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var qr,Qa,Nf,Ja,Of;const Vt=class Vt{constructor({name:e=null,port:t=null,verbosity:i=NP()}={}){p(this,Qa);var s;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=l(Vt,qr))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(Vt,qr)||_(Vt,qr,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return _t?Promise.all([di.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new bc("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,Qa,Nf).call(this)}_initialize(){if(Ai.isWorkerDisabled||l(Vt,Ja,Of)){this._setupFakeWorker();return}let{workerSrc:e}=Vt;try{Ai.isSameOrigin(window.location.href,e)||(e=Ai.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new bc("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,A(this,Qa,Nf).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{Hm("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ai.isWorkerDisabled||(q("Setting up fake worker."),Ai.isWorkerDisabled=!0),Vt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new sL;this._port=t;const i=`fake${Ai.fakeWorkerId++}`,s=new bc(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new bc(i,i+"_worker",t),A(this,Qa,Nf).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(Vt,qr))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,qr))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Vt(e)}static get workerSrc(){if(Ji.workerSrc)return Ji.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ne(this,"_setupFakeWorkerGlobal",(async()=>l(this,Ja,Of)?l(this,Ja,Of):(await vc(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};qr=new WeakMap,Qa=new WeakSet,Nf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ja=new WeakSet,Of=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},p(Vt,Ja),p(Vt,qr,void 0);let wa=Vt;var Mi,Jn,Za,el,Zn,Kr,xc;class rL{constructor(e,t,i,s,r){p(this,Kr);p(this,Mi,new Map);p(this,Jn,new Map);p(this,Za,new Map);p(this,el,new Map);p(this,Zn,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new _b,this.fontLoader=new iR({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ne(this,"annotationStorage",new Kw)}getRenderingIntent(e,t=fs.ENABLE,i=null,s=!1){let r=hn.DISPLAY,o=n0;switch(e){case"any":r=hn.ANY;break;case"display":break;case"print":r=hn.PRINT;break;default:q(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case fs.DISABLE:r+=hn.ANNOTATIONS_DISABLE;break;case fs.ENABLE:break;case fs.ENABLE_FORMS:r+=hn.ANNOTATIONS_FORMS;break;case fs.ENABLE_STORAGE:r+=hn.ANNOTATIONS_STORAGE,o=(r&hn.PRINT&&i instanceof sb?i:this.annotationStorage).serializable;break;default:q(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(r+=hn.OPLIST),{renderingIntent:r,cacheKey:`${r}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,Zn))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Jn).values())e.push(s._destroy());l(this,Jn).clear(),l(this,Za).clear(),l(this,el).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Mi).clear(),this.filterFactory.destroy(),Lp.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Uo("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{Ve(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}Ve(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",i=>{const s=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var o;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),r.onProgress=a=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:a.loaded,total:a.total})}),s.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(i,s)=>{Ve(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}Ve(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new nL(i,this))}),e.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new Iy(i.message,i.code);break;case"InvalidPDFException":s=new b1(i.message);break;case"MissingPDFException":s=new Bo(i.message);break;case"UnexpectedResponseException":s=new Bm(i.message,i.status);break;case"UnknownErrorException":s=new Dy(i.message,i.details);break;default:he("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",i=>{if(_(this,Zn,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?l(this,Zn).reject(r):l(this,Zn).resolve({password:r})};try{t.onPassword(s,i.code)}catch(r){l(this,Zn).reject(r)}}else l(this,Zn).reject(new Iy(i.message,i.code));return l(this,Zn).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Jn).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const g=r.error;q(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,d=new sR(r,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Ve(f,"The imageRef must be defined.");for(const g of l(this,Jn).values())for(const[,m]of g.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const a=l(this,Jn).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>LP&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&q("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Za).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,el).set(r.refStr,e);const o=new iL(t,r,this,this._params.pdfBug);return l(this,Jn).set(t,o),o});return l(this,Za).set(t,s),s}getPageIndex(e){return NA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,Kr,xc).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Kr,xc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,Kr,xc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,Kr,xc).call(this,"GetOptionalContentConfig").then(t=>new bR(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Mi).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new ER(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Mi).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Jn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Mi).clear(),this.filterFactory.destroy(!0),Lp.cleanup()}}cachedPageNumber(e){if(!NA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,el).get(t)??null}}Mi=new WeakMap,Jn=new WeakMap,Za=new WeakMap,el=new WeakMap,Zn=new WeakMap,Kr=new WeakSet,xc=function(e,t=null){const i=l(this,Mi).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return l(this,Mi).set(e,s),s};const df=Symbol("INITIAL_DATA");var kn,yh,h0;class _b{constructor(){p(this,yh);p(this,kn,Object.create(null))}get(e,t=null){if(t){const s=A(this,yh,h0).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=l(this,kn)[e];if(!i||i.data===df)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,kn)[e];return!!t&&t.data!==df}resolve(e,t=null){const i=A(this,yh,h0).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,kn)){const{data:i}=l(this,kn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}_(this,kn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,kn)){const{data:t}=l(this,kn)[e];t!==df&&(yield[e,t])}}}kn=new WeakMap,yh=new WeakSet,h0=function(e){var t;return(t=l(this,kn))[e]||(t[e]={...Promise.withResolvers(),data:df})};var Ts;class oL{constructor(e){p(this,Ts,null);_(this,Ts,e),this.onContinue=null}get promise(){return l(this,Ts).capability.promise}cancel(e=0){l(this,Ts).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Ts).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Ts);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Ts=new WeakMap;var Ps,Qr;const mr=class mr{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){p(this,Ps,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new oL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(mr,Qr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(mr,Qr).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new ya(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Ps)&&(window.cancelAnimationFrame(l(this,Ps)),_(this,Ps,null)),l(mr,Qr).delete(this._canvas),this.callback(e||new Gw(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Ps,window.requestAnimationFrame(()=>{_(this,Ps,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(mr,Qr).delete(this._canvas),this.callback())))}};Ps=new WeakMap,Qr=new WeakMap,p(mr,Qr,new WeakSet);let d0=mr;const aL="4.4.168",lL="19fbc8998";function OA(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function dc(n){return Math.max(0,Math.min(255,255*n))}class jA{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=dc(e),[e,e,e]}static G_HTML([e]){const t=OA(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(dc)}static RGB_HTML(e){return`#${e.map(OA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[dc(1-Math.min(1,e+s)),dc(1-Math.min(1,i+s)),dc(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class Ab{static setupStorage(e,t,i,s,r){const o=s.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&r.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",c=e.div;if(c.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=g}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);o.append(g),a&&uu.shouldBuildText(s.name)&&u.push(g)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[g,m,w]=h.at(-1);if(m+1===g.children.length){h.pop();continue}const S=g.children[++h.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const E=document.createTextNode(S.value);u.push(E),w.append(E);continue}const y=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(w.append(y),S.attributes&&this.setAttributes({html:y,element:S,storage:t,intent:r,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,y]);else if(S.value){const E=document.createTextNode(S.value);a&&uu.shouldBuildText(v)&&u.push(E),y.append(E)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const zd=1e3,cL=9,Oo=new WeakSet;function Zi(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class uL{static create(e){switch(e.data.annotationType){case je.LINK:return new Eb(e);case je.TEXT:return new hL(e);case je.WIDGET:switch(e.data.fieldType){case"Tx":return new dL(e);case"Btn":return e.data.radioButton?new xb(e):e.data.checkBox?new pL(e):new gL(e);case"Ch":return new mL(e);case"Sig":return new fL(e)}return new $o(e);case je.POPUP:return new p0(e);case je.FREETEXT:return new Rb(e);case je.LINE:return new yL(e);case je.SQUARE:return new wL(e);case je.CIRCLE:return new _L(e);case je.POLYLINE:return new Lb(e);case je.CARET:return new EL(e);case je.INK:return new Mb(e);case je.POLYGON:return new AL(e);case je.HIGHLIGHT:return new SL(e);case je.UNDERLINE:return new bL(e);case je.SQUIGGLY:return new xL(e);case je.STRIKEOUT:return new CL(e);case je.STAMP:return new Ib(e);case je.FILEATTACHMENT:return new kL(e);default:return new Me(e)}}}var Jr,tl,nl,wh,f0;const i_=class i_{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){p(this,wh);p(this,Jr,null);p(this,tl,!1);p(this,nl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get hasPopupData(){return i_._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,Jr)||_(this,Jr,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,wh,f0).call(this,t),(i=l(this,nl))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,Jr)&&(A(this,wh,f0).call(this,l(this,Jr).rect),(e=l(this,nl))==null||e.popup.resetEdited(),_(this,Jr,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof $o||(r.tabIndex=zd);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.popupRef&&r.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof p0){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:a,height:c}=Zi(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(w>0||S>0){const y=`calc(${w}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;o.borderRadius=y}else if(this instanceof xb){const y=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=y}switch(t.borderStyle.style){case uc.SOLID:o.borderStyle="solid";break;case uc.DASHED:o.borderStyle="dashed";break;case uc.BEVELED:q("Unimplemented border style: beveled");break;case uc.INSET:q("Unimplemented border style: inset");break;case uc.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(_(this,tl,!0),o.borderColor=j.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=j.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:g}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-g)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=Zi(this.data.rect);let a,c;e%180===0?(a=100*r/i,c=100*o/s):(a=100*o/i,c=100*r/s),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],o=r[0],a=r.slice(1);s.target.style[i]=jA[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:jA[`${o}_rgb`](a)})};return ne(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const o=i[s];if(o){const a={detail:{[s]:r},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,S,v,y]=e.subarray(2,6);if(s===w&&r===S&&t===v&&i===y)return}const{style:o}=this.container;let a;if(l(this,tl)){const{borderColor:w,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=s-t,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const g=h.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let w=2,S=e.length;w<S;w+=8){const v=e[w],y=e[w+1],E=e[w+2],b=e[w+3],x=h.createElement("rect"),C=(E-t)/c,T=(r-y)/u,R=(v-E)/c,I=(y-b)/u;x.setAttribute("x",C),x.setAttribute("y",T),x.setAttribute("width",R),x.setAttribute("height",I),g.append(x),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${T}" width="${R}" height="${I}"/>`)}l(this,tl)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=_(this,nl,new p0({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){he("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Oo.has(u)){q(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&Oo.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Jr=new WeakMap,tl=new WeakMap,nl=new WeakMap,wh=new WeakSet,f0=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:h}=Zi(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*u/r}%`,t.height=`${100*h/o}%`):this.setRotation(s)};let Me=i_;var Ii,dr,bg,Sb,xg,bb;class Eb extends Me{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});p(this,Ii);p(this,bg);p(this,xg);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(A(this,bg,Sb).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(A(this,xg,bb).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&A(this,Ii,dr).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),A(this,Ii,dr).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,Ii,dr).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),A(this,Ii,dr).call(this),!this._fieldObjects){q('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:a}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const g of r){const m=this._fieldObjects[g]||[];for(const{id:w}of m)f.add(w)}for(const g of Object.values(this._fieldObjects))for(const m of g)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!Oo.has(m)){q(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Ii=new WeakSet,dr=function(){this.container.setAttribute("data-internal-link","")},bg=new WeakSet,Sb=function(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,s),!1},A(this,Ii,dr).call(this)},xg=new WeakSet,bb=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),A(this,Ii,dr).call(this)};class hL extends Me{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class $o extends Me{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ot.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,i,s){var r,o,a;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":j.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||cL,r=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(Tv*s))||1,d=u/h;o=Math.min(s,c(d/Tv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,c(u/Tv))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=j.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class dL extends $o{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Oo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=zd,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";i.value=h.userValue=g,h.formattedValue=null});let d=f=>{const{formattedValue:g}=h;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{var w;if(h.focused)return;const{target:m}=g;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:S}=w.detail;h.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S),e.setValue(t,{formattedValue:S})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var E;const{charLimit:S}=w.detail,{target:v}=w;if(S===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",S);let y=h.userValue;!y||y.length<=S||(y=y.slice(0,S),v.value=h.userValue=y,e.setValue(t,{value:y}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),i.addEventListener("keydown",g=>{var S;h.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:w}=g.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",g=>{var w,S;if(!h.focused||!g.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(h.focused=!1);const{value:m}=g.target;h.userValue=m,h.lastCommittedValue!==m&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",g=>{var x;h.lastCommittedValue=null;const{data:m,target:w}=g,{value:S,selectionStart:v,selectionEnd:y}=w;let E=v,b=y;switch(g.inputType){case"deleteWordBackward":{const C=S.substring(0,v).match(/\w*[^\w]*$/);C&&(E-=C[0].length);break}case"deleteWordForward":{const C=S.substring(v).match(/^[^\w]*\w*/);C&&(b+=C[0].length);break}case"deleteContentBackward":v===y&&(E-=1);break;case"deleteContentForward":v===y&&(b+=1);break}g.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:m||"",willCommit:!1,selStart:E,selEnd:b}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fL extends $o{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class pL extends $o{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Oo.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=zd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,i)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xb extends $o{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Oo.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=zd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class gL extends Eb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class mL extends $o{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Oo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=zd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:g}=s;return g?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const g=f.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const w of s.options)w.selected=m.has(w.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const g=s.options,m=f.detail.remove;g[m].selected=!1,s.remove(m),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:g,displayValue:m,exportValue:w}=f.detail.insert,S=s.children[g],v=document.createElement("option");v.textContent=m,v.value=w,S?S.before(v):s.append(v),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:g}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of g){const{displayValue:w,exportValue:S}=m,v=document.createElement("option");v.textContent=w,v.value=S,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const g=new Set(f.detail.indices);for(const m of f.target.options)m.selected=g.has(m.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var g;const d=a(!0),f=a(!1);e.setValue(t,{value:d}),h.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class p0 extends Me{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:Me._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new vL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${C1}${i}`).join(",")),this.container}}var il,Cg,kg,sl,Zr,ke,Di,eo,_h,Ah,rl,Fi,Tn,Ni,Eh,Oi,Sh,to,no,ol,jf,bh,g0,Tg,Cb,Pg,kb,Rg,Tb,Lg,Pb,al,zf,ll,Hf,xh,m0;class vL{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:d}){p(this,ol);p(this,bh);p(this,Tg);p(this,Pg);p(this,Rg);p(this,Lg);p(this,al);p(this,ll);p(this,xh);p(this,il,A(this,Rg,Tb).bind(this));p(this,Cg,A(this,xh,m0).bind(this));p(this,kg,A(this,ll,Hf).bind(this));p(this,sl,A(this,al,zf).bind(this));p(this,Zr,null);p(this,ke,null);p(this,Di,null);p(this,eo,null);p(this,_h,null);p(this,Ah,null);p(this,rl,null);p(this,Fi,!1);p(this,Tn,null);p(this,Ni,null);p(this,Eh,null);p(this,Oi,null);p(this,Sh,null);p(this,to,null);p(this,no,!1);var f;_(this,ke,e),_(this,Sh,s),_(this,Di,o),_(this,Oi,a),_(this,Ah,c),_(this,Zr,t),_(this,Eh,u),_(this,rl,h),_(this,_h,i),_(this,eo,L1.toDateObject(r)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,sl)),g.addEventListener("mouseenter",l(this,kg)),g.addEventListener("mouseleave",l(this,Cg)),g.classList.add("popupTriggerArea");for(const g of i)(f=g.container)==null||f.addEventListener("keydown",l(this,il));l(this,ke).hidden=!0,d&&A(this,al,zf).call(this)}render(){if(l(this,Tn))return;const e=_(this,Tn,document.createElement("div"));if(e.className="popup",l(this,Zr)){const r=e.style.outlineColor=j.makeHexColor(...l(this,Zr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=j.makeHexColor(...l(this,Zr).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,Sh),e.append(t),l(this,eo)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:l(this,eo).toLocaleDateString(),time:l(this,eo).toLocaleTimeString()})),t.append(r)}const s=l(this,ol,jf);if(s)Ab.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Di));e.append(r)}l(this,ke).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,to)||_(this,to,{contentsObj:l(this,Di),richText:l(this,Oi)}),e&&_(this,Ni,null),t&&(_(this,Oi,A(this,Pg,kb).call(this,t)),_(this,Di,null)),(i=l(this,Tn))==null||i.remove(),_(this,Tn,null)}resetEdited(){var e;l(this,to)&&({contentsObj:Ut(this,Di)._,richText:Ut(this,Oi)._}=l(this,to),_(this,to,null),(e=l(this,Tn))==null||e.remove(),_(this,Tn,null),_(this,Ni,null))}forceHide(){_(this,no,this.isVisible),l(this,no)&&(l(this,ke).hidden=!0)}maybeShow(){l(this,no)&&(l(this,Tn)||A(this,ll,Hf).call(this),_(this,no,!1),l(this,ke).hidden=!1)}get isVisible(){return l(this,ke).hidden===!1}}il=new WeakMap,Cg=new WeakMap,kg=new WeakMap,sl=new WeakMap,Zr=new WeakMap,ke=new WeakMap,Di=new WeakMap,eo=new WeakMap,_h=new WeakMap,Ah=new WeakMap,rl=new WeakMap,Fi=new WeakMap,Tn=new WeakMap,Ni=new WeakMap,Eh=new WeakMap,Oi=new WeakMap,Sh=new WeakMap,to=new WeakMap,no=new WeakMap,ol=new WeakSet,jf=function(){const e=l(this,Oi),t=l(this,Di);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Oi).html||null},bh=new WeakSet,g0=function(){var e,t,i;return((i=(t=(e=l(this,ol,jf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},Tg=new WeakSet,Cb=function(){var e,t,i;return((i=(t=(e=l(this,ol,jf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},Pg=new WeakSet,kb=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,Tg,Cb),fontSize:l(this,bh,g0)?`calc(${l(this,bh,g0)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},Rg=new WeakSet,Tb=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Fi))&&A(this,al,zf).call(this)},Lg=new WeakSet,Pb=function(){if(l(this,Ni)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=l(this,Ah);let o=!!l(this,rl),a=o?l(this,rl):l(this,Eh);for(const m of l(this,_h))if(!a||j.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=j.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=5,h=o?a[2]-a[0]+u:0,d=c[0]+h,f=c[1];_(this,Ni,[100*(d-s)/t,100*(f-r)/i]);const{style:g}=l(this,ke);g.left=`${l(this,Ni)[0]}%`,g.top=`${l(this,Ni)[1]}%`},al=new WeakSet,zf=function(){_(this,Fi,!l(this,Fi)),l(this,Fi)?(A(this,ll,Hf).call(this),l(this,ke).addEventListener("click",l(this,sl)),l(this,ke).addEventListener("keydown",l(this,il))):(A(this,xh,m0).call(this),l(this,ke).removeEventListener("click",l(this,sl)),l(this,ke).removeEventListener("keydown",l(this,il)))},ll=new WeakSet,Hf=function(){l(this,Tn)||this.render(),this.isVisible?l(this,Fi)&&l(this,ke).classList.add("focused"):(A(this,Lg,Pb).call(this),l(this,ke).hidden=!1,l(this,ke).style.zIndex=parseInt(l(this,ke).style.zIndex)+1e3)},xh=new WeakSet,m0=function(){l(this,ke).classList.remove("focused"),!(l(this,Fi)||!this.isVisible)&&(l(this,ke).hidden=!0,l(this,ke).style.zIndex=parseInt(l(this,ke).style.zIndex)-1e3)};class Rb extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ee.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Ch;class yL extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Ch,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:s}=Zi(t.rect),r=this.svgFactory.create(i,s,!0),o=_(this,Ch,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ch=new WeakMap;var kh;class wL extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,kh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:s}=Zi(t.rect),r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=_(this,kh,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,kh)}addHighlightArea(){this.container.classList.add("highlightArea")}}kh=new WeakMap;var Th;class _L extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Th,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:s}=Zi(t.rect),r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,a=_(this,Th,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Th)}addHighlightArea(){this.container.classList.add("highlightArea")}}Th=new WeakMap;var Ph;class Lb extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Ph,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r}}=this;if(!i)return this.container;const{width:o,height:a}=Zi(t),c=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const g=i[d]-t[0],m=t[3]-i[d+1];u.push(`${g},${m}`)}u=u.join(" ");const h=_(this,Ph,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ph=new WeakMap;class AL extends Lb{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class EL extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Rh;class Mb extends Me{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Rh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=ee.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{width:o,height:a}=Zi(t),c=this.svgFactory.create(o,a,!0);for(const u of i){let h=[];for(let f=0,g=u.length;f<g;f+=2){const m=u[f]-t[0],w=t[3]-u[f+1];h.push(`${m},${w}`)}h=h.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,Rh).push(d),d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),c.append(d)}return this.container.append(c),this.container}getElementsToTriggerPopup(){return l(this,Rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rh=new WeakMap;class SL extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class bL extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class xL extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class CL extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ib extends Me{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Lh,Mh,v0;class kL extends Me{constructor(t){var s;super(t,{isRenderable:!0});p(this,Mh);p(this,Lh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",A(this,Mh,v0).bind(this)),_(this,Lh,s);const{isMac:r}=Ot.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,Mh,v0).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,Lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lh=new WeakMap,Mh=new WeakSet,v0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ih,io,cl,Mg,Db,Dh,y0,QA;let TL=(QA=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o}){p(this,Mg);p(this,Dh);p(this,Ih,null);p(this,io,null);p(this,cl,new Map);this.div=e,_(this,Ih,t),_(this,io,i),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var o;const{annotations:t}=e,i=this.div;Fo(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Ww,annotationStorage:e.annotationStorage||new Kw,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===je.POPUP;if(c){const d=s.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=Zi(a.rect);if(d<=0||f<=0)continue}r.data=a;const u=uL.create(r);if(!u.isRenderable)continue;if(!c&&a.popupRef){const d=s.get(a.popupRef);d?d.push(u):s.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),A(this,Mg,Db).call(this,h,a.id),u.annotationEditorType>0&&(l(this,cl).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}A(this,Dh,y0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Fo(t,{rotation:e.rotation}),A(this,Dh,y0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,cl).values())}getEditableAnnotation(e){return l(this,cl).get(e)}},Ih=new WeakMap,io=new WeakMap,cl=new WeakMap,Mg=new WeakSet,Db=function(e,t){var s;const i=e.firstChild||e;i.id=`${C1}${t}`,this.div.append(e),(s=l(this,Ih))==null||s.moveElementInDOM(this.div,e,i,!1)},Dh=new WeakSet,y0=function(){if(!l(this,io))return;const e=this.div;for(const[t,i]of l(this,io)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}l(this,io).clear()},QA);const ff=/\r\n?|\n/g;var Fh,Nh,Oh,jh,zh,Pn,Yt,Hh,qt,ul,Ig,Fb,Dg,Nb,Fg,Ob,hl,Bf,dl,Uf,fl,$f,Ng,jb,Bh,_0,Og,zb;const fe=class fe extends ae{constructor(t){super({...t,name:"freeTextEditor"});p(this,Ig);p(this,Dg);p(this,Fg);p(this,hl);p(this,fl);p(this,Ng);p(this,Og);p(this,Fh,this.editorDivBlur.bind(this));p(this,Nh,this.editorDivFocus.bind(this));p(this,Oh,this.editorDivInput.bind(this));p(this,jh,this.editorDivKeydown.bind(this));p(this,zh,this.editorDivPaste.bind(this));p(this,Pn,void 0);p(this,Yt,"");p(this,Hh,`${this.id}-editor`);p(this,qt,void 0);p(this,ul,null);_(this,Pn,t.color||fe._defaultColor||ae._defaultLineColor),_(this,qt,t.fontSize||fe._defaultFontSize)}static get _keyboardManager(){const t=fe.prototype,i=o=>o.isEmpty(),s=No.TRANSLATE_SMALL,r=No.TRANSLATE_BIG;return ne(this,"_keyboardManager",new Od([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){ae.initialize(t,i,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case W.FREETEXT_SIZE:fe._defaultFontSize=i;break;case W.FREETEXT_COLOR:fe._defaultColor=i;break}}updateParams(t,i){switch(t){case W.FREETEXT_SIZE:A(this,Ig,Fb).call(this,i);break;case W.FREETEXT_COLOR:A(this,Dg,Nb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[W.FREETEXT_SIZE,fe._defaultFontSize],[W.FREETEXT_COLOR,fe._defaultColor||ae._defaultLineColor]]}get propertiesToUpdate(){return[[W.FREETEXT_SIZE,l(this,qt)],[W.FREETEXT_COLOR,l(this,Pn)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-fe._internalPadding*t,-(fe._internalPadding+l(this,qt))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ee.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",l(this,jh),{signal:t}),this.editorDiv.addEventListener("focus",l(this,Nh),{signal:t}),this.editorDiv.addEventListener("blur",l(this,Fh),{signal:t}),this.editorDiv.addEventListener("input",l(this,Oh),{signal:t}),this.editorDiv.addEventListener("paste",l(this,zh),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Hh)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,jh)),this.editorDiv.removeEventListener("focus",l(this,Nh)),this.editorDiv.removeEventListener("blur",l(this,Fh)),this.editorDiv.removeEventListener("input",l(this,Oh)),this.editorDiv.removeEventListener("paste",l(this,zh)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Yt),i=_(this,Yt,A(this,Fg,Ob).call(this).trimEnd());if(t===i)return;const s=r=>{if(_(this,Yt,r),!r){this.remove();return}A(this,fl,$f).call(this),this._uiManager.rebuild(this),A(this,hl,Bf).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),A(this,hl,Bf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){fe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Hh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),ae._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,qt)}px * var(--scale-factor))`,s.color=l(this,Pn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Tp(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=l(this,ul);let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,g]=this.pageTranslation;let m,w;switch(this.rotation){case 0:m=t+(a[0]-f)/h,w=i+this.height-(a[1]-g)/d;break;case 90:m=t+(a[0]-f)/h,w=i-(a[1]-g)/d,[c,u]=[u,-c];break;case 180:m=t-this.width+(a[0]-f)/h,w=i-(a[1]-g)/d,[c,u]=[-c,-u];break;case 270:m=t+(a[0]-f-this.height*d)/h,w=i+(a[1]-g-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,w*o,c,u)}else this.setAt(t*r,i*o,this.width*r,this.height*o);A(this,fl,$f).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,w,S;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=A(m=fe,Bh,_0).call(m,i.getData("text")||"").replaceAll(ff,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(ff,"")),v!==this.editorDiv){let y=h;for(const E of this.editorDiv.childNodes){if(E===v){y=d;continue}y.push(A(w=fe,dl,Uf).call(w,E))}}h.push(c.nodeValue.slice(0,u).replaceAll(ff,""))}else if(c===this.editorDiv){let v=h,y=0;for(const E of this.editorDiv.childNodes)y++===u&&(v=d),v.push(A(S=fe,dl,Uf).call(S,E))}_(this,Yt,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,fl,$f).call(this);const f=new Range;let g=h.reduce((v,y)=>v+y.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const y=v.nodeValue.length;if(g<=y){f.setStart(v,g),f.setEnd(v,g);break}g-=y}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(t,i,s){var a;let r=null;if(t instanceof Rb){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f},textContent:g,textPosition:m,parent:{page:{pageNumber:w}}}=t;if(!g||g.length===0)return null;r=t={annotationType:ee.FREETEXT,color:Array.from(u),fontSize:c,value:g.join(`
`),position:m,pageIndex:w-1,rect:h.slice(0),rotation:d,id:f,deleted:!1}}const o=super.deserialize(t,i,s);return _(o,qt,t.fontSize),_(o,Pn,j.makeHexColor(...t.color)),_(o,Yt,A(a=fe,Bh,_0).call(a,t.value)),o.annotationElementId=t.id||null,_(o,ul,r),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=fe._internalPadding*this.parentScale,s=this.getRect(i,i),r=ae._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Pn)),o={annotationType:ee.FREETEXT,color:r,fontSize:l(this,qt),value:A(this,Ng,jb).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!A(this,Og,zb).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${l(this,qt)}px * var(--scale-factor))`,s.color=l(this,Pn),i.replaceChildren();for(const o of l(this,Yt).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const r=fe._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Yt)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Fh=new WeakMap,Nh=new WeakMap,Oh=new WeakMap,jh=new WeakMap,zh=new WeakMap,Pn=new WeakMap,Yt=new WeakMap,Hh=new WeakMap,qt=new WeakMap,ul=new WeakMap,Ig=new WeakSet,Fb=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,qt))*this.parentScale),_(this,qt,r),A(this,hl,Bf).call(this)},s=l(this,qt);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Dg=new WeakSet,Nb=function(t){const i=r=>{_(this,Pn,this.editorDiv.style.color=r)},s=l(this,Pn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Fg=new WeakSet,Ob=function(){var i;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(A(i=fe,dl,Uf).call(i,s));return t.join(`
`)},hl=new WeakSet,Bf=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},dl=new WeakSet,Uf=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ff,"")},fl=new WeakSet,$f=function(){if(this.editorDiv.replaceChildren(),!!l(this,Yt))for(const t of l(this,Yt).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},Ng=new WeakSet,jb=function(){return l(this,Yt).replaceAll(" "," ")},Bh=new WeakSet,_0=function(t){return t.replaceAll(" "," ")},Og=new WeakSet,zb=function(t){const{value:i,fontSize:s,color:r,pageIndex:o}=l(this,ul);return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((a,c)=>a!==r[c])||t.pageIndex!==o},p(fe,dl),p(fe,Bh),G(fe,"_freeTextDefaultContent",""),G(fe,"_internalPadding",0),G(fe,"_defaultColor",null),G(fe,"_defaultFontSize",10),G(fe,"_type","freetext"),G(fe,"_editorType",ee.FREETEXT);let w0=fe;var Uh,Rs,Rn,jg,Hb,pl,Vf,zg,Bb,Hg,Ub,$h,E0;class A0{constructor(e,t=0,i=0,s=!0){p(this,jg);p(this,pl);p(this,zg);p(this,Hg);p(this,$h);p(this,Uh,void 0);p(this,Rs,[]);p(this,Rn,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const h=10**-4;for(const{x:v,y,width:E,height:b}of e){const x=Math.floor((v-t)/h)*h,C=Math.ceil((v+E+t)/h)*h,T=Math.floor((y-t)/h)*h,R=Math.ceil((y+b+t)/h)*h,I=[x,T,R,!0],M=[C,T,R,!1];l(this,Rs).push(I,M),r=Math.min(r,x),o=Math.max(o,C),a=Math.min(a,T),c=Math.max(c,R)}const d=o-r+2*i,f=c-a+2*i,g=r-i,m=a-i,w=l(this,Rs).at(s?-1:-2),S=[w[0],w[2]];for(const v of l(this,Rs)){const[y,E,b]=v;v[0]=(y-g)/d,v[1]=(E-m)/f,v[2]=(b-m)/f}_(this,Uh,{x:g,y:m,width:d,height:f,lastPoint:S})}getOutlines(){l(this,Rs).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,Rs))t[3]?(e.push(...A(this,$h,E0).call(this,t)),A(this,zg,Bb).call(this,t)):(A(this,Hg,Ub).call(this,t),e.push(...A(this,$h,E0).call(this,t)));return A(this,jg,Hb).call(this,e)}}Uh=new WeakMap,Rs=new WeakMap,Rn=new WeakMap,jg=new WeakSet,Hb=function(e){const t=[],i=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,c,u,h,d]=o;i.delete(o);let f=a,g=c;for(r=[a,u],s.push(r);;){let m;if(i.has(h))m=h;else if(i.has(d))m=d;else break;i.delete(m),[a,c,u,h,d]=m,f!==a&&(r.push(f,g,a,g===c?c:u),f=a),g=g===c?u:c}r.push(f,g)}return new PL(s,l(this,Uh))},pl=new WeakSet,Vf=function(e){const t=l(this,Rn);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,o=t[r][0];if(o===e)return r;o<e?i=r+1:s=r-1}return s+1},zg=new WeakSet,Bb=function([,e,t]){const i=A(this,pl,Vf).call(this,e);l(this,Rn).splice(i,0,[e,t])},Hg=new WeakSet,Ub=function([,e,t]){const i=A(this,pl,Vf).call(this,e);for(let s=i;s<l(this,Rn).length;s++){const[r,o]=l(this,Rn)[s];if(r!==e)break;if(r===e&&o===t){l(this,Rn).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=l(this,Rn)[s];if(r!==e)break;if(r===e&&o===t){l(this,Rn).splice(s,1);return}}},$h=new WeakSet,E0=function(e){const[t,i,s]=e,r=[[t,i,s]],o=A(this,pl,Vf).call(this,s);for(let a=0;a<o;a++){const[c,u]=l(this,Rn)[a];for(let h=0,d=r.length;h<d;h++){const[,f,g]=r[h];if(!(u<=f||g<=c)){if(f>=c){if(g>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,g>u&&r.push([t,u,g])}}}return r};class $b{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof b0}}var Vh,gl;class PL extends $b{constructor(t,i){super();p(this,Vh,void 0);p(this,gl,void 0);_(this,gl,t),_(this,Vh,i)}toSVGPath(){const t=[];for(const i of l(this,gl)){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],c=i[o+1];a===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const a=[],c=s-t,u=r-i;for(const h of l(this,gl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return l(this,Vh)}}Vh=new WeakMap,gl=new WeakMap;var ei,ji,ml,vl,ti,Z,so,ro,Wh,Gh,yl,wl,Ls,Xh,Bg,Ug,Yh,S0;const yi=class yi{constructor({x:e,y:t},i,s,r,o,a=0){p(this,Yh);p(this,ei,void 0);p(this,ji,[]);p(this,ml,void 0);p(this,vl,void 0);p(this,ti,[]);p(this,Z,new Float64Array(18));p(this,so,void 0);p(this,ro,void 0);p(this,Wh,void 0);p(this,Gh,void 0);p(this,yl,void 0);p(this,wl,void 0);p(this,Ls,[]);_(this,ei,i),_(this,wl,r*s),_(this,vl,o),l(this,Z).set([NaN,NaN,NaN,NaN,e,t],6),_(this,ml,a),_(this,Gh,l(yi,Xh)*s),_(this,Wh,l(yi,Ug)*s),_(this,yl,s),l(this,Ls).push(e,t)}get free(){return!0}isEmpty(){return isNaN(l(this,Z)[8])}add({x:e,y:t}){var I;_(this,so,e),_(this,ro,t);const[i,s,r,o]=l(this,ei);let[a,c,u,h]=l(this,Z).subarray(8,12);const d=e-u,f=t-h,g=Math.hypot(d,f);if(g<l(this,Wh))return!1;const m=g-l(this,Gh),w=m/g,S=w*d,v=w*f;let y=a,E=c;a=u,c=h,u+=S,h+=v,(I=l(this,Ls))==null||I.push(e,t);const b=-v/m,x=S/m,C=b*l(this,wl),T=x*l(this,wl);return l(this,Z).set(l(this,Z).subarray(2,8),0),l(this,Z).set([u+C,h+T],4),l(this,Z).set(l(this,Z).subarray(14,18),12),l(this,Z).set([u-C,h-T],16),isNaN(l(this,Z)[6])?(l(this,ti).length===0&&(l(this,Z).set([a+C,c+T],2),l(this,ti).push(NaN,NaN,NaN,NaN,(a+C-i)/r,(c+T-s)/o),l(this,Z).set([a-C,c-T],14),l(this,ji).push(NaN,NaN,NaN,NaN,(a-C-i)/r,(c-T-s)/o)),l(this,Z).set([y,E,a,c,u,h],6),!this.isEmpty()):(l(this,Z).set([y,E,a,c,u,h],6),Math.abs(Math.atan2(E-c,y-a)-Math.atan2(v,S))<Math.PI/2?([a,c,u,h]=l(this,Z).subarray(2,6),l(this,ti).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/r,((c+h)/2-s)/o),[a,c,y,E]=l(this,Z).subarray(14,18),l(this,ji).push(NaN,NaN,NaN,NaN,((y+a)/2-i)/r,((E+c)/2-s)/o),!0):([y,E,a,c,u,h]=l(this,Z).subarray(0,6),l(this,ti).push(((y+5*a)/6-i)/r,((E+5*c)/6-s)/o,((5*a+u)/6-i)/r,((5*c+h)/6-s)/o,((a+u)/2-i)/r,((c+h)/2-s)/o),[u,h,a,c,y,E]=l(this,Z).subarray(12,18),l(this,ji).push(((y+5*a)/6-i)/r,((E+5*c)/6-s)/o,((5*a+u)/6-i)/r,((5*c+h)/6-s)/o,((a+u)/2-i)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,ti),t=l(this,ji),i=l(this,Z).subarray(4,6),s=l(this,Z).subarray(16,18),[r,o,a,c]=l(this,ei),[u,h,d,f]=A(this,Yh,S0).call(this);if(isNaN(l(this,Z)[6])&&!this.isEmpty())return`M${(l(this,Z)[2]-r)/a} ${(l(this,Z)[3]-o)/c} L${(l(this,Z)[4]-r)/a} ${(l(this,Z)[5]-o)/c} L${u} ${h} L${d} ${f} L${(l(this,Z)[16]-r)/a} ${(l(this,Z)[17]-o)/c} L${(l(this,Z)[14]-r)/a} ${(l(this,Z)[15]-o)/c} Z`;const g=[];g.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?g.push(`L${e[m+4]} ${e[m+5]}`):g.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);g.push(`L${(i[0]-r)/a} ${(i[1]-o)/c} L${u} ${h} L${d} ${f} L${(s[0]-r)/a} ${(s[1]-o)/c}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?g.push(`L${t[m+4]} ${t[m+5]}`):g.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return g.push(`L${t[4]} ${t[5]} Z`),g.join(" ")}getOutlines(){var v;const e=l(this,ti),t=l(this,ji),i=l(this,Z),s=i.subarray(4,6),r=i.subarray(16,18),[o,a,c,u]=l(this,ei),h=new Float64Array((((v=l(this,Ls))==null?void 0:v.length)??0)+2);for(let y=0,E=h.length-2;y<E;y+=2)h[y]=(l(this,Ls)[y]-o)/c,h[y+1]=(l(this,Ls)[y+1]-a)/u;h[h.length-2]=(l(this,so)-o)/c,h[h.length-1]=(l(this,ro)-a)/u;const[d,f,g,m]=A(this,Yh,S0).call(this);if(isNaN(i[6])&&!this.isEmpty()){const y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-o)/c,(i[3]-a)/u,NaN,NaN,NaN,NaN,(i[4]-o)/c,(i[5]-a)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(i[16]-o)/c,(i[17]-a)/u,NaN,NaN,NaN,NaN,(i[14]-o)/c,(i[15]-a)/u],0),new b0(y,h,l(this,ei),l(this,yl),l(this,ml),l(this,vl))}const w=new Float64Array(l(this,ti).length+24+l(this,ji).length);let S=e.length;for(let y=0;y<S;y+=2){if(isNaN(e[y])){w[y]=w[y+1]=NaN;continue}w[y]=e[y],w[y+1]=e[y+1]}w.set([NaN,NaN,NaN,NaN,(s[0]-o)/c,(s[1]-a)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-a)/u],S),S+=24;for(let y=t.length-6;y>=6;y-=6)for(let E=0;E<6;E+=2){if(isNaN(t[y+E])){w[S]=w[S+1]=NaN,S+=2;continue}w[S]=t[y+E],w[S+1]=t[y+E+1],S+=2}return w.set([NaN,NaN,NaN,NaN,t[4],t[5]],S),new b0(w,h,l(this,ei),l(this,yl),l(this,ml),l(this,vl))}};ei=new WeakMap,ji=new WeakMap,ml=new WeakMap,vl=new WeakMap,ti=new WeakMap,Z=new WeakMap,so=new WeakMap,ro=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,yl=new WeakMap,wl=new WeakMap,Ls=new WeakMap,Xh=new WeakMap,Bg=new WeakMap,Ug=new WeakMap,Yh=new WeakSet,S0=function(){const e=l(this,Z).subarray(4,6),t=l(this,Z).subarray(16,18),[i,s,r,o]=l(this,ei);return[(l(this,so)+(e[0]-t[0])/2-i)/r,(l(this,ro)+(e[1]-t[1])/2-s)/o,(l(this,so)+(t[0]-e[0])/2-i)/r,(l(this,ro)+(t[1]-e[1])/2-s)/o]},p(yi,Xh,8),p(yi,Bg,2),p(yi,Ug,l(yi,Xh)+l(yi,Bg));let Mp=yi;var _l,oo,zi,qh,Kt,Kh,Re,ao,Cc,lo,kc,$g,Vb;class b0 extends $b{constructor(t,i,s,r,o,a){super();p(this,ao);p(this,lo);p(this,$g);p(this,_l,void 0);p(this,oo,null);p(this,zi,void 0);p(this,qh,void 0);p(this,Kt,void 0);p(this,Kh,void 0);p(this,Re,void 0);_(this,Re,t),_(this,Kt,i),_(this,_l,s),_(this,Kh,r),_(this,zi,o),_(this,qh,a),A(this,$g,Vb).call(this,a);const{x:c,y:u,width:h,height:d}=l(this,oo);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,g=i.length;f<g;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${l(this,Re)[4]} ${l(this,Re)[5]}`];for(let i=6,s=l(this,Re).length;i<s;i+=6){if(isNaN(l(this,Re)[i])){t.push(`L${l(this,Re)[i+4]} ${l(this,Re)[i+5]}`);continue}t.push(`C${l(this,Re)[i]} ${l(this,Re)[i+1]} ${l(this,Re)[i+2]} ${l(this,Re)[i+3]} ${l(this,Re)[i+4]} ${l(this,Re)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const a=s-t,c=r-i;let u,h;switch(o){case 0:u=A(this,ao,Cc).call(this,l(this,Re),t,r,a,-c),h=A(this,ao,Cc).call(this,l(this,Kt),t,r,a,-c);break;case 90:u=A(this,lo,kc).call(this,l(this,Re),t,i,a,c),h=A(this,lo,kc).call(this,l(this,Kt),t,i,a,c);break;case 180:u=A(this,ao,Cc).call(this,l(this,Re),s,i,-a,c),h=A(this,ao,Cc).call(this,l(this,Kt),s,i,-a,c);break;case 270:u=A(this,lo,kc).call(this,l(this,Re),s,r,-a,-c),h=A(this,lo,kc).call(this,l(this,Kt),s,r,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,oo)}getNewOutline(t,i){const{x:s,y:r,width:o,height:a}=l(this,oo),[c,u,h,d]=l(this,_l),f=o*h,g=a*d,m=s*h+c,w=r*d+u,S=new Mp({x:l(this,Kt)[0]*f+m,y:l(this,Kt)[1]*g+w},l(this,_l),l(this,Kh),t,l(this,qh),i??l(this,zi));for(let v=2;v<l(this,Kt).length;v+=2)S.add({x:l(this,Kt)[v]*f+m,y:l(this,Kt)[v+1]*g+w});return S.getOutlines()}}_l=new WeakMap,oo=new WeakMap,zi=new WeakMap,qh=new WeakMap,Kt=new WeakMap,Kh=new WeakMap,Re=new WeakMap,ao=new WeakSet,Cc=function(t,i,s,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=i+t[c]*r,a[c+1]=s+t[c+1]*o;return a},lo=new WeakSet,kc=function(t,i,s,r,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=i+t[c+1]*r,a[c+1]=s+t[c]*o;return a},$g=new WeakSet,Vb=function(t){const i=l(this,Re);let s=i[4],r=i[5],o=s,a=r,c=s,u=r,h=s,d=r;const f=t?Math.max:Math.min;for(let v=6,y=i.length;v<y;v+=6){if(isNaN(i[v]))o=Math.min(o,i[v+4]),a=Math.min(a,i[v+5]),c=Math.max(c,i[v+4]),u=Math.max(u,i[v+5]),d<i[v+5]?(h=i[v+4],d=i[v+5]):d===i[v+5]&&(h=f(h,i[v+4]));else{const E=j.bezierBoundingBox(s,r,...i.slice(v,v+6));o=Math.min(o,E[0]),a=Math.min(a,E[1]),c=Math.max(c,E[2]),u=Math.max(u,E[3]),d<E[3]?(h=E[2],d=E[3]):d===E[3]&&(h=f(h,E[2]))}s=i[v+4],r=i[v+5]}const g=o-l(this,zi),m=a-l(this,zi),w=c-o+2*l(this,zi),S=u-a+2*l(this,zi);_(this,oo,{x:g,y:m,width:w,height:S,lastPoint:[h,d]})};var Qh,Jh,Ln,co,Al,He,Zh,El,ed,td,Mn,Sl,nd,x0,id,C0,Vg,Wb,Hi,fr,Wg,Gb,ni,ls;const wi=class wi{constructor({editor:e=null,uiManager:t=null}){p(this,nd);p(this,id);p(this,Vg);p(this,Hi);p(this,Wg);p(this,ni);p(this,Qh,A(this,Vg,Wb).bind(this));p(this,Jh,A(this,Wg,Gb).bind(this));p(this,Ln,null);p(this,co,null);p(this,Al,void 0);p(this,He,null);p(this,Zh,!1);p(this,El,!1);p(this,ed,null);p(this,td,void 0);p(this,Mn,null);p(this,Sl,void 0);var i;e?(_(this,El,!1),_(this,Sl,W.HIGHLIGHT_COLOR),_(this,ed,e)):(_(this,El,!0),_(this,Sl,W.HIGHLIGHT_DEFAULT_COLOR)),_(this,Mn,(e==null?void 0:e._uiManager)||t),_(this,td,l(this,Mn)._eventBus),_(this,Al,(e==null?void 0:e.color)||((i=l(this,Mn))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ne(this,"_keyboardManager",new Od([[["Escape","mac+Escape"],wi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wi.prototype._moveToPrevious],[["Home","mac+Home"],wi.prototype._moveToBeginning],[["End","mac+End"],wi.prototype._moveToEnd]]))}renderButton(){const e=_(this,Ln,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Mn)._signal;e.addEventListener("click",A(this,Hi,fr).bind(this),{signal:t}),e.addEventListener("keydown",l(this,Qh),{signal:t});const i=_(this,co,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,Al),e.append(i),e}renderMainDropdown(){const e=_(this,He,A(this,nd,x0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Ln)){A(this,Hi,fr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,id,C0).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,ni,ls)){A(this,Hi,fr).call(this,e);return}if(e.target===l(this,Ln)){(t=l(this,He).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,He))==null?void 0:t.firstChild)||e.target===l(this,Ln)){l(this,ni,ls)&&this._hideDropdownFromKeyboard();return}l(this,ni,ls)||A(this,Hi,fr).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,ni,ls)){A(this,Hi,fr).call(this,e);return}(t=l(this,He).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ni,ls)){A(this,Hi,fr).call(this,e);return}(t=l(this,He).lastChild)==null||t.focus()}hideDropdown(){var e;(e=l(this,He))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",l(this,Jh))}_hideDropdownFromKeyboard(){var e;if(!l(this,El)){if(!l(this,ni,ls)){(e=l(this,ed))==null||e.unselect();return}this.hideDropdown(),l(this,Ln).focus({preventScroll:!0,focusVisible:l(this,Zh)})}}updateColor(e){if(l(this,co)&&(l(this,co).style.backgroundColor=e),!l(this,He))return;const t=l(this,Mn).highlightColors.values();for(const i of l(this,He).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Ln))==null||e.remove(),_(this,Ln,null),_(this,co,null),(t=l(this,He))==null||t.remove(),_(this,He,null)}};Qh=new WeakMap,Jh=new WeakMap,Ln=new WeakMap,co=new WeakMap,Al=new WeakMap,He=new WeakMap,Zh=new WeakMap,El=new WeakMap,ed=new WeakMap,td=new WeakMap,Mn=new WeakMap,Sl=new WeakMap,nd=new WeakSet,x0=function(){const e=document.createElement("div"),t=l(this,Mn)._signal;e.addEventListener("contextmenu",Bt,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of l(this,Mn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===l(this,Al)),r.addEventListener("click",A(this,id,C0).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",l(this,Qh),{signal:t}),e},id=new WeakSet,C0=function(e,t){t.stopPropagation(),l(this,td).dispatch("switchannotationeditorparams",{source:this,type:l(this,Sl),value:e})},Vg=new WeakSet,Wb=function(e){wi._keyboardManager.exec(this,e)},Hi=new WeakSet,fr=function(e){if(l(this,ni,ls)){this.hideDropdown();return}if(_(this,Zh,e.detail===0),window.addEventListener("pointerdown",l(this,Jh),{signal:l(this,Mn)._signal}),l(this,He)){l(this,He).classList.remove("hidden");return}const t=_(this,He,A(this,nd,x0).call(this));l(this,Ln).append(t)},Wg=new WeakSet,Gb=function(e){var t;(t=l(this,He))!=null&&t.contains(e.target)||this.hideDropdown()},ni=new WeakSet,ls=function(){return l(this,He)&&!l(this,He).classList.contains("hidden")};let Ip=wi;var bl,sd,Ms,uo,xl,cn,rd,od,ho,In,St,Qt,Gg,Cl,fo,Be,kl,ii,ad,ld,k0,cd,T0,Xg,Xb,Yg,Yb,qg,qb,ud,P0,po,Tc,Is,Qo,Kg,Kb,Tl,Wf,go,Pc,Qg,Qb,Jg,Jb,Zg,Zb,em,ex;const te=class te extends ae{constructor(t){super({...t,name:"highlightEditor"});p(this,ld);p(this,cd);p(this,Xg);p(this,Yg);p(this,qg);p(this,ud);p(this,po);p(this,Kg);p(this,Tl);p(this,go);p(this,Qg);p(this,Jg);p(this,bl,null);p(this,sd,0);p(this,Ms,void 0);p(this,uo,null);p(this,xl,null);p(this,cn,null);p(this,rd,null);p(this,od,0);p(this,ho,null);p(this,In,null);p(this,St,null);p(this,Qt,!1);p(this,Gg,A(this,Kg,Kb).bind(this));p(this,Cl,null);p(this,fo,void 0);p(this,Be,null);p(this,kl,"");p(this,ii,void 0);p(this,ad,"");this.color=t.color||te._defaultColor,_(this,ii,t.thickness||te._defaultThickness),_(this,fo,t.opacity||te._defaultOpacity),_(this,Ms,t.boxes||null),_(this,ad,t.methodOfCreation||""),_(this,kl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(_(this,Qt,!0),A(this,cd,T0).call(this,t),A(this,po,Tc).call(this)):(_(this,bl,t.anchorNode),_(this,sd,t.anchorOffset),_(this,rd,t.focusNode),_(this,od,t.focusOffset),A(this,ld,k0).call(this),A(this,po,Tc).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=te.prototype;return ne(this,"_keyboardManager",new Od([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Qt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ii),methodOfCreation:l(this,ad)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;ae.initialize(t,i),te._defaultColor||(te._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case W.HIGHLIGHT_DEFAULT_COLOR:te._defaultColor=i;break;case W.HIGHLIGHT_THICKNESS:te._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,Cl)}updateParams(t,i){switch(t){case W.HIGHLIGHT_COLOR:A(this,Xg,Xb).call(this,i);break;case W.HIGHLIGHT_THICKNESS:A(this,Yg,Yb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[W.HIGHLIGHT_DEFAULT_COLOR,te._defaultColor],[W.HIGHLIGHT_THICKNESS,te._defaultThickness]]}get propertiesToUpdate(){return[[W.HIGHLIGHT_COLOR,this.color||te._defaultColor],[W.HIGHLIGHT_THICKNESS,l(this,ii)||te._defaultThickness],[W.HIGHLIGHT_FREE,l(this,Qt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(_(this,xl,new Ip({editor:this})),t.addColorPicker(l(this,xl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,go,Pc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,A(this,go,Pc).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){A(this,ud,P0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,po,Tc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?A(this,ud,P0).call(this):t&&(A(this,po,Tc).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,o,a;const{drawLayer:i}=this.parent;let s;l(this,Qt)?(t=(t-this.rotation+360)%360,s=A(r=te,Is,Qo).call(r,l(this,In).box,t)):s=A(o=te,Is,Qo).call(o,this,t),i.rotate(l(this,St),t),i.rotate(l(this,Be),t),i.updateBox(l(this,St),s),i.updateBox(l(this,Be),A(a=te,Is,Qo).call(a,l(this,cn).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,kl)&&(t.setAttribute("aria-label",l(this,kl)),t.setAttribute("role","mark")),l(this,Qt)?t.classList.add("free"):this.div.addEventListener("keydown",l(this,Gg),{signal:this._uiManager._signal});const i=_(this,ho,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,uo);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Tp(this,l(this,ho),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(l(this,Be),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(l(this,Be),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,Tl,Wf).call(this,!0);break;case 1:case 3:A(this,Tl,Wf).call(this,!1);break}}select(){var t,i;super.select(),l(this,Be)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Be),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,Be),"selected"))}unselect(){var t;super.unselect(),l(this,Be)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Be),"selected"),l(this,Qt)||A(this,Tl,Wf).call(this,!1))}get _mustFixPosition(){return!l(this,Qt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,St),t),this.parent.drawLayer.show(l(this,Be),t))}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:a,y:c,width:u,height:h}=s.getBoundingClientRect(),d=S=>{A(this,Zg,Zb).call(this,t,S)},f=t._signal,g={capture:!0,passive:!1,signal:f},m=S=>{S.preventDefault(),S.stopPropagation()},w=S=>{s.removeEventListener("pointermove",d),window.removeEventListener("blur",w),window.removeEventListener("pointerup",w),window.removeEventListener("pointerdown",m,g),window.removeEventListener("contextmenu",Bt),A(this,em,ex).call(this,t,S)};window.addEventListener("blur",w,{signal:f}),window.addEventListener("pointerup",w,{signal:f}),window.addEventListener("pointerdown",m,g),window.addEventListener("contextmenu",Bt,{signal:f}),s.addEventListener("pointermove",d,{signal:f}),this._freeHighlight=new Mp({x:r,y:o},[a,c,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,i,s){var w;const r=super.deserialize(t,i,s),{rect:[o,a,c,u],color:h,quadPoints:d}=t;r.color=j.makeHexColor(...h),_(r,fo,t.opacity);const[f,g]=r.pageDimensions;r.width=(c-o)/f,r.height=(u-a)/g;const m=_(r,Ms,[]);for(let S=0;S<d.length;S+=8)m.push({x:(d[4]-c)/f,y:(u-(1-d[S+5]))/g,width:(d[S+2]-d[S])/f,height:(d[S+5]-d[S+1])/g});return A(w=r,ld,k0).call(w),r}serialize(t=!1){if(this.isEmpty()||t)return null;const i=this.getRect(0,0),s=ae._colorManager.convert(this.color);return{annotationType:ee.HIGHLIGHT,color:s,opacity:l(this,fo),thickness:l(this,ii),quadPoints:A(this,Qg,Qb).call(this),outlines:A(this,Jg,Jb).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:A(this,go,Pc).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};bl=new WeakMap,sd=new WeakMap,Ms=new WeakMap,uo=new WeakMap,xl=new WeakMap,cn=new WeakMap,rd=new WeakMap,od=new WeakMap,ho=new WeakMap,In=new WeakMap,St=new WeakMap,Qt=new WeakMap,Gg=new WeakMap,Cl=new WeakMap,fo=new WeakMap,Be=new WeakMap,kl=new WeakMap,ii=new WeakMap,ad=new WeakMap,ld=new WeakSet,k0=function(){const t=new A0(l(this,Ms),.001);_(this,In,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,In).box;const i=new A0(l(this,Ms),.0025,.001,this._uiManager.direction==="ltr");_(this,cn,i.getOutlines());const{lastPoint:s}=l(this,cn).box;_(this,Cl,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},cd=new WeakSet,T0=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var d,f;_(this,In,t);const r=1.5;if(_(this,cn,t.getNewOutline(l(this,ii)/2+r,.0025)),i>=0)_(this,St,i),_(this,uo,s),this.parent.drawLayer.finalizeLine(i,t),_(this,Be,this.parent.drawLayer.highlightOutline(l(this,cn)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,St),t),this.parent.drawLayer.updateBox(l(this,St),A(d=te,Is,Qo).call(d,l(this,In).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,Be),l(this,cn)),this.parent.drawLayer.updateBox(l(this,Be),A(f=te,Is,Qo).call(f,l(this,cn).box,g))}const{x:o,y:a,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[g,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/g,this.height=u*g/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/g,this.height=u*g/m;break}}const{lastPoint:h}=l(this,cn).box;_(this,Cl,[(h[0]-o)/c,(h[1]-a)/u])},Xg=new WeakSet,Xb=function(t){const i=r=>{var o,a;this.color=r,(o=this.parent)==null||o.drawLayer.changeColor(l(this,St),r),(a=l(this,xl))==null||a.updateColor(r)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Yg=new WeakSet,Yb=function(t){const i=l(this,ii),s=r=>{_(this,ii,r),A(this,qg,qb).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},qg=new WeakSet,qb=function(t){if(!l(this,Qt))return;A(this,cd,T0).call(this,{highlightOutlines:l(this,In).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},ud=new WeakSet,P0=function(){l(this,St)===null||!this.parent||(this.parent.drawLayer.remove(l(this,St)),_(this,St,null),this.parent.drawLayer.remove(l(this,Be)),_(this,Be,null))},po=new WeakSet,Tc=function(t=this.parent){l(this,St)===null&&({id:Ut(this,St)._,clipPathId:Ut(this,uo)._}=t.drawLayer.highlight(l(this,In),this.color,l(this,fo)),_(this,Be,t.drawLayer.highlightOutline(l(this,cn))),l(this,ho)&&(l(this,ho).style.clipPath=l(this,uo)))},Is=new WeakSet,Qo=function({x:t,y:i,width:s,height:r},o){switch(o){case 90:return{x:1-i-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-t-s,width:r,height:s}}return{x:t,y:i,width:s,height:r}},Kg=new WeakSet,Kb=function(t){te._keyboardManager.exec(this,t)},Tl=new WeakSet,Wf=function(t){if(!l(this,bl))return;const i=window.getSelection();t?i.setPosition(l(this,bl),l(this,sd)):i.setPosition(l(this,rd),l(this,od))},go=new WeakSet,Pc=function(){return l(this,Qt)?this.rotation:0},Qg=new WeakSet,Qb=function(){if(l(this,Qt))return null;const[t,i]=this.pageDimensions,s=l(this,Ms),r=new Float32Array(s.length*8);let o=0;for(const{x:a,y:c,width:u,height:h}of s){const d=a*t,f=(1-c-h)*i;r[o]=r[o+4]=d,r[o+1]=r[o+3]=f,r[o+2]=r[o+6]=d+u*t,r[o+5]=r[o+7]=f+h*i,o+=8}return r},Jg=new WeakSet,Jb=function(t){return l(this,In).serialize(t,A(this,go,Pc).call(this))},Zg=new WeakSet,Zb=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},em=new WeakSet,ex=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},p(te,Is),p(te,Zg),p(te,em),G(te,"_defaultColor",null),G(te,"_defaultOpacity",1),G(te,"_defaultThickness",12),G(te,"_l10nPromise"),G(te,"_type","highlight"),G(te,"_editorType",ee.HIGHLIGHT),G(te,"_freeHighlightId",-1),G(te,"_freeHighlight",null),G(te,"_freeHighlightClipId","");let Dp=te;var mo,vo,hd,dd,fd,yo,si,Bi,un,wo,_o,Ui,Ao,Eo,Ds,tm,tx,nm,nx,im,ix,sm,sx,pd,L0,rm,rx,gd,M0,om,ox,am,ax,lm,lx,cm,cx,um,ux,$i,pr,md,I0,Pl,Gf,Rl,Xf,Fs,Jo,vd,D0,Ll,Yf,hm,hx,yd,F0,dm,dx,fm,fx,wd,N0,Ml,qf,So,Rc;const ye=class ye extends ae{constructor(t){super({...t,name:"inkEditor"});p(this,tm);p(this,nm);p(this,im);p(this,sm);p(this,pd);p(this,rm);p(this,gd);p(this,om);p(this,am);p(this,lm);p(this,cm);p(this,um);p(this,$i);p(this,md);p(this,Pl);p(this,Rl);p(this,Fs);p(this,vd);p(this,Ll);p(this,fm);p(this,wd);p(this,Ml);p(this,So);p(this,mo,0);p(this,vo,0);p(this,hd,this.canvasPointermove.bind(this));p(this,dd,this.canvasPointerleave.bind(this));p(this,fd,this.canvasPointerup.bind(this));p(this,yo,this.canvasPointerdown.bind(this));p(this,si,null);p(this,Bi,new Path2D);p(this,un,!1);p(this,wo,!1);p(this,_o,!1);p(this,Ui,null);p(this,Ao,0);p(this,Eo,0);p(this,Ds,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){ae.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case W.INK_THICKNESS:ye._defaultThickness=i;break;case W.INK_COLOR:ye._defaultColor=i;break;case W.INK_OPACITY:ye._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case W.INK_THICKNESS:A(this,tm,tx).call(this,i);break;case W.INK_COLOR:A(this,nm,nx).call(this,i);break;case W.INK_OPACITY:A(this,im,ix).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[W.INK_THICKNESS,ye._defaultThickness],[W.INK_COLOR,ye._defaultColor||ae._defaultLineColor],[W.INK_OPACITY,Math.round(ye._defaultOpacity*100)]]}get propertiesToUpdate(){return[[W.INK_THICKNESS,this.thickness||ye._defaultThickness],[W.INK_COLOR,this.color||ye._defaultColor||ae._defaultLineColor],[W.INK_OPACITY,Math.round(100*(this.opacity??ye._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(A(this,Pl,Gf).call(this),A(this,Rl,Xf).call(this)),this.isAttachedToDOM||(this.parent.add(this),A(this,Fs,Jo).call(this)),A(this,So,Rc).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,si)&&(clearTimeout(l(this,si)),_(this,si,null)),(t=l(this,Ui))==null||t.disconnect(),_(this,Ui,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,s=this.width*t,r=this.height*i;this.setDimensions(s,r)}enableEditMode(){l(this,un)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,yo),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,yo)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,un)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_(this,un,!0),this.div.classList.add("disabled"),A(this,So,Rc).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,un)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),A(this,rm,rx).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),A(this,gd,M0).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),A(this,md,I0).call(this,t)}canvasPointerleave(t){A(this,md,I0).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,un)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,o,a]=A(this,sm,sx).call(this);if(this.setAt(s,r,0,0),this.setDims(o,a),A(this,Pl,Gf).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,i*u,this.width*c,this.height*u),_(this,_o,!0),A(this,Fs,Jo).call(this),this.setDims(this.width*c,this.height*u),A(this,$i,pr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return A(this,Rl,Xf).call(this),this.div}setDimensions(t,i){const s=Math.round(t),r=Math.round(i);if(l(this,Ao)===s&&l(this,Eo)===r)return;_(this,Ao,s),_(this,Eo,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=i/a,this.fixAndSetPosition(),l(this,un)&&A(this,vd,D0).call(this,t,i),A(this,Fs,Jo).call(this),A(this,$i,pr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,i,s){var S,v,y;if(t instanceof Mb)return null;const r=super.deserialize(t,i,s);r.thickness=t.thickness,r.color=j.makeHexColor(...t.color),r.opacity=t.opacity;const[o,a]=r.pageDimensions,c=r.width*o,u=r.height*a,h=r.parentScale,d=t.thickness/2;_(r,un,!0),_(r,Ao,Math.round(c)),_(r,Eo,Math.round(u));const{paths:f,rect:g,rotation:m}=t;for(let{bezier:E}of f){E=A(S=ye,dm,dx).call(S,E,g,m);const b=[];r.paths.push(b);let x=h*(E[0]-d),C=h*(E[1]-d);for(let R=2,I=E.length;R<I;R+=6){const M=h*(E[R]-d),F=h*(E[R+1]-d),Y=h*(E[R+2]-d),V=h*(E[R+3]-d),U=h*(E[R+4]-d),K=h*(E[R+5]-d);b.push([[x,C],[M,F],[Y,V],[U,K]]),x=U,C=K}const T=A(this,hm,hx).call(this,b);r.bezierPath2D.push(T)}const w=A(v=r,wd,N0).call(v);return _(r,vo,Math.max(ae.MIN_SIZE,w[2]-w[0])),_(r,mo,Math.max(ae.MIN_SIZE,w[3]-w[1])),A(y=r,vd,D0).call(y,c,u),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=ae._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ee.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:A(this,fm,fx).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};mo=new WeakMap,vo=new WeakMap,hd=new WeakMap,dd=new WeakMap,fd=new WeakMap,yo=new WeakMap,si=new WeakMap,Bi=new WeakMap,un=new WeakMap,wo=new WeakMap,_o=new WeakMap,Ui=new WeakMap,Ao=new WeakMap,Eo=new WeakMap,Ds=new WeakMap,tm=new WeakSet,tx=function(t){const i=r=>{this.thickness=r,A(this,So,Rc).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},nm=new WeakSet,nx=function(t){const i=r=>{this.color=r,A(this,$i,pr).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},im=new WeakSet,ix=function(t){const i=r=>{this.opacity=r,A(this,$i,pr).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:W.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},sm=new WeakSet,sx=function(){const{parentRotation:t,parentDimensions:[i,s]}=this;switch(t){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},pd=new WeakSet,L0=function(){const{ctx:t,color:i,opacity:s,thickness:r,parentScale:o,scaleFactor:a}=this;t.lineWidth=r*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${ZP(s)}`},rm=new WeakSet,rx=function(t,i){const s=this._uiManager._signal;this.canvas.addEventListener("contextmenu",Bt,{signal:s}),this.canvas.addEventListener("pointerleave",l(this,dd),{signal:s}),this.canvas.addEventListener("pointermove",l(this,hd),{signal:s}),this.canvas.addEventListener("pointerup",l(this,fd),{signal:s}),this.canvas.removeEventListener("pointerdown",l(this,yo)),this.isEditing=!0,l(this,_o)||(_(this,_o,!0),A(this,Fs,Jo).call(this),this.thickness||(this.thickness=ye._defaultThickness),this.color||(this.color=ye._defaultColor||ae._defaultLineColor),this.opacity??(this.opacity=ye._defaultOpacity)),this.currentPath.push([t,i]),_(this,wo,!1),A(this,pd,L0).call(this),_(this,Ds,()=>{A(this,lm,lx).call(this),l(this,Ds)&&window.requestAnimationFrame(l(this,Ds))}),window.requestAnimationFrame(l(this,Ds))},gd=new WeakSet,M0=function(t,i){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&i===r)return;const o=this.currentPath;let a=l(this,Bi);if(o.push([t,i]),_(this,wo,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,i);return}o.length===3&&(_(this,Bi,a=new Path2D),a.moveTo(...o[0])),A(this,cm,cx).call(this,a,...o.at(-3),...o.at(-2),t,i)},om=new WeakSet,ox=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Bi).lineTo(...t)},am=new WeakSet,ax=function(t,i){_(this,Ds,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),A(this,gd,M0).call(this,t,i),A(this,om,ox).call(this);let s;if(this.currentPath.length!==1)s=A(this,um,ux).call(this);else{const u=[t,i];s=[[u,u.slice(),u.slice(),u]]}const r=l(this,Bi),o=this.currentPath;this.currentPath=[],_(this,Bi,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(A(this,Pl,Gf).call(this),A(this,Rl,Xf).call(this)),A(this,So,Rc).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},lm=new WeakSet,lx=function(){if(!l(this,wo))return;_(this,wo,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(a=>a[0]),r=i.map(a=>a[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,Bi)),o.restore()},cm=new WeakSet,cx=function(t,i,s,r,o,a,c){const u=(i+r)/2,h=(s+o)/2,d=(r+a)/2,f=(o+c)/2;t.bezierCurveTo(u+2*(r-u)/3,h+2*(o-h)/3,d+2*(r-d)/3,f+2*(o-f)/3,d,f)},um=new WeakSet,ux=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let s,[r,o]=t[0];for(s=1;s<t.length-2;s++){const[g,m]=t[s],[w,S]=t[s+1],v=(g+w)/2,y=(m+S)/2,E=[r+2*(g-r)/3,o+2*(m-o)/3],b=[v+2*(g-v)/3,y+2*(m-y)/3];i.push([[r,o],E,b,[v,y]]),[r,o]=[v,y]}const[a,c]=t[s],[u,h]=t[s+1],d=[r+2*(a-r)/3,o+2*(c-o)/3],f=[u+2*(a-u)/3,h+2*(c-h)/3];return i.push([[r,o],d,f,[u,h]]),i},$i=new WeakSet,pr=function(){if(this.isEmpty()){A(this,Ll,Yf).call(this);return}A(this,pd,L0).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),A(this,Ll,Yf).call(this);for(const s of this.bezierPath2D)i.stroke(s)},md=new WeakSet,I0=function(t){this.canvas.removeEventListener("pointerleave",l(this,dd)),this.canvas.removeEventListener("pointermove",l(this,hd)),this.canvas.removeEventListener("pointerup",l(this,fd)),this.canvas.addEventListener("pointerdown",l(this,yo),{signal:this._uiManager._signal}),l(this,si)&&clearTimeout(l(this,si)),_(this,si,setTimeout(()=>{_(this,si,null),this.canvas.removeEventListener("contextmenu",Bt)},10)),A(this,am,ax).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Pl=new WeakSet,Gf=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Rl=new WeakSet,Xf=function(){_(this,Ui,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,Ui).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Ui))==null||t.disconnect(),_(this,Ui,null)},{once:!0})},Fs=new WeakSet,Jo=function(){if(!l(this,_o))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),A(this,Ll,Yf).call(this)},vd=new WeakSet,D0=function(t,i){const s=A(this,Ml,qf).call(this),r=(t-s)/l(this,vo),o=(i-s)/l(this,mo);this.scaleFactor=Math.min(r,o)},Ll=new WeakSet,Yf=function(){const t=A(this,Ml,qf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},hm=new WeakSet,hx=function(t){const i=new Path2D;for(let s=0,r=t.length;s<r;s++){const[o,a,c,u]=t[s];s===0&&i.moveTo(...o),i.bezierCurveTo(a[0],a[1],c[0],c[1],u[0],u[1])}return i},yd=new WeakSet,F0=function(t,i,s){const[r,o,a,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]+=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]+r,t[u+1]=d+o}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=a-t[u+1],t[u+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},dm=new WeakSet,dx=function(t,i,s){const[r,o,a,c]=i;switch(s){case 0:for(let u=0,h=t.length;u<h;u+=2)t[u]-=r,t[u+1]=c-t[u+1];break;case 90:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=t[u+1]-o,t[u+1]=d-r}break;case 180:for(let u=0,h=t.length;u<h;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,h=t.length;u<h;u+=2){const d=t[u];t[u]=c-t[u+1],t[u+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},fm=new WeakSet,fx=function(t,i,s,r){var h,d;const o=[],a=this.thickness/2,c=t*i+a,u=t*s+a;for(const f of this.paths){const g=[],m=[];for(let w=0,S=f.length;w<S;w++){const[v,y,E,b]=f[w];if(v[0]===b[0]&&v[1]===b[1]&&S===1){const V=t*v[0]+c,U=t*v[1]+u;g.push(V,U),m.push(V,U);break}const x=t*v[0]+c,C=t*v[1]+u,T=t*y[0]+c,R=t*y[1]+u,I=t*E[0]+c,M=t*E[1]+u,F=t*b[0]+c,Y=t*b[1]+u;w===0&&(g.push(x,C),m.push(x,C)),g.push(T,R,I,M,F,Y),m.push(T,R),w===S-1&&m.push(F,Y)}o.push({bezier:A(h=ye,yd,F0).call(h,g,r,this.rotation),points:A(d=ye,yd,F0).call(d,m,r,this.rotation)})}return o},wd=new WeakSet,N0=function(){let t=1/0,i=-1/0,s=1/0,r=-1/0;for(const o of this.paths)for(const[a,c,u,h]of o){const d=j.bezierBoundingBox(...a,...c,...u,...h);t=Math.min(t,d[0]),s=Math.min(s,d[1]),i=Math.max(i,d[2]),r=Math.max(r,d[3])}return[t,s,i,r]},Ml=new WeakSet,qf=function(){return l(this,un)?Math.ceil(this.thickness*this.parentScale):0},So=new WeakSet,Rc=function(t=!1){if(this.isEmpty())return;if(!l(this,un)){A(this,$i,pr).call(this);return}const i=A(this,wd,N0).call(this),s=A(this,Ml,qf).call(this);_(this,vo,Math.max(ae.MIN_SIZE,i[2]-i[0])),_(this,mo,Math.max(ae.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(s+l(this,vo)*this.scaleFactor),o=Math.ceil(s+l(this,mo)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=r/a,this.height=o/c,this.setAspectRatio(r,o);const u=this.translationX,h=this.translationY;this.translationX=-i[0],this.translationY=-i[1],A(this,Fs,Jo).call(this),A(this,$i,pr).call(this),_(this,Ao,r),_(this,Eo,o),this.setDims(r,o);const d=t?s/this.scaleFactor/2:0;this.translate(u-this.translationX-d,h-this.translationY-d)},p(ye,hm),p(ye,yd),p(ye,dm),G(ye,"_defaultColor",null),G(ye,"_defaultOpacity",1),G(ye,"_defaultThickness",1),G(ye,"_type","ink"),G(ye,"_editorType",ee.INK);let R0=ye;var ot,at,Ns,Vi,Os,Il,ri,Wi,oi,Dn,_d,bo,Lc,xo,Mc,Dl,Kf,Ad,j0,pm,px,gm,gx,Ed,z0,Fl,Qf,mm,mx;const Vc=class Vc extends ae{constructor(t){super({...t,name:"stampEditor"});p(this,bo);p(this,xo);p(this,Dl);p(this,Ad);p(this,pm);p(this,gm);p(this,Ed);p(this,Fl);p(this,mm);p(this,ot,null);p(this,at,null);p(this,Ns,null);p(this,Vi,null);p(this,Os,null);p(this,Il,"");p(this,ri,null);p(this,Wi,null);p(this,oi,null);p(this,Dn,!1);p(this,_d,!1);_(this,Vi,t.bitmapUrl),_(this,Os,t.bitmapFile)}static initialize(t,i){ae.initialize(t,i)}static get supportedTypes(){return ne(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ne(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(ee.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,i;l(this,at)&&(_(this,ot,null),this._uiManager.imageManager.deleteId(l(this,at)),(t=l(this,ri))==null||t.remove(),_(this,ri,null),(i=l(this,Wi))==null||i.disconnect(),_(this,Wi,null),l(this,oi)&&(clearTimeout(l(this,oi)),_(this,oi,null))),super.remove()}rebuild(){if(!this.parent){l(this,at)&&A(this,Dl,Kf).call(this);return}super.rebuild(),this.div!==null&&(l(this,at)&&l(this,ri)===null&&A(this,Dl,Kf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,Ns)||l(this,ot)||l(this,Vi)||l(this,Os)||l(this,at))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,ot)?A(this,Ad,j0).call(this):A(this,Dl,Kf).call(this),this.width){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r)}return this.div}getImageForAltText(){return l(this,ri)}static deserialize(t,i,s){if(t instanceof Ib)return null;const r=super.deserialize(t,i,s),{rect:o,bitmapUrl:a,bitmapId:c,isSvg:u,accessibilityData:h}=t;c&&s.imageManager.isValidId(c)?_(r,at,c):_(r,Vi,a),_(r,Dn,u);const[d,f]=r.pageDimensions;return r.width=(o[2]-o[0])/d,r.height=(o[3]-o[1])/f,h&&(r.altTextData=h),r}serialize(t=!1,i=null){if(this.isEmpty())return null;const s={annotationType:ee.STAMP,bitmapId:l(this,at),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Dn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=A(this,Fl,Qf).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:r,altText:o}=this.altTextData;if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),i===null)return s;i.stamps||(i.stamps=new Map);const a=l(this,Dn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(l(this,at)))i.stamps.set(l(this,at),{area:a,serialized:s}),s.bitmap=A(this,Fl,Qf).call(this,!1);else if(l(this,Dn)){const c=i.stamps.get(l(this,at));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Fl,Qf).call(this,!1))}return s}};ot=new WeakMap,at=new WeakMap,Ns=new WeakMap,Vi=new WeakMap,Os=new WeakMap,Il=new WeakMap,ri=new WeakMap,Wi=new WeakMap,oi=new WeakMap,Dn=new WeakMap,_d=new WeakMap,bo=new WeakSet,Lc=function(t,i=!1){if(!t){this.remove();return}_(this,ot,t.bitmap),i||(_(this,at,t.id),_(this,Dn,t.isSvg)),t.file&&_(this,Il,t.file.name),A(this,Ad,j0).call(this)},xo=new WeakSet,Mc=function(){_(this,Ns,null),this._uiManager.enableWaiting(!1),l(this,ri)&&this.div.focus()},Dl=new WeakSet,Kf=function(){if(l(this,at)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,at)).then(s=>A(this,bo,Lc).call(this,s,!0)).finally(()=>A(this,xo,Mc).call(this));return}if(l(this,Vi)){const s=l(this,Vi);_(this,Vi,null),this._uiManager.enableWaiting(!0),_(this,Ns,this._uiManager.imageManager.getFromUrl(s).then(r=>A(this,bo,Lc).call(this,r)).finally(()=>A(this,xo,Mc).call(this)));return}if(l(this,Os)){const s=l(this,Os);_(this,Os,null),this._uiManager.enableWaiting(!0),_(this,Ns,this._uiManager.imageManager.getFromFile(s).then(r=>A(this,bo,Lc).call(this,r)).finally(()=>A(this,xo,Mc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Vc.supportedTypesStr;const i=this._uiManager._signal;_(this,Ns,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);A(this,bo,Lc).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>A(this,xo,Mc).call(this))),t.click()},Ad=new WeakSet,j0=function(){const{div:t}=this;let{width:i,height:s}=l(this,ot);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const d=Math.min(a*r/i,a*o/s);i*=d,s*=d}const[c,u]=this.parentDimensions;this.setDims(i*c/r,s*u/o),this._uiManager.enableWaiting(!1);const h=_(this,ri,document.createElement("canvas"));t.append(h),t.hidden=!1,A(this,Ed,z0).call(this,i,s),A(this,mm,mx).call(this),l(this,_d)||(this.parent.addUndoableEditor(this),_(this,_d,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Il)&&h.setAttribute("aria-label",l(this,Il))},pm=new WeakSet,px=function(t,i){var a;const[s,r]=this.parentDimensions;this.width=t/s,this.height=i/r,this.setDims(t,i),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,oi)!==null&&clearTimeout(l(this,oi)),_(this,oi,setTimeout(()=>{_(this,oi,null),A(this,Ed,z0).call(this,t,i)},200))},gm=new WeakSet,gx=function(t,i){const{width:s,height:r}=l(this,ot);let o=s,a=r,c=l(this,ot);for(;o>2*t||a>2*i;){const u=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,a),c=d.transferToImageBitmap()}return c},Ed=new WeakSet,z0=function(t,i){t=Math.ceil(t),i=Math.ceil(i);const s=l(this,ri);if(!s||s.width===t&&s.height===i)return;s.width=t,s.height=i;const r=l(this,Dn)?l(this,ot):A(this,gm,gx).call(this,t,i);if(this._uiManager.hasMLManager&&!this.hasAltText()){const c=new OffscreenCanvas(t,i).getContext("2d");c.drawImage(r,0,0,r.width,r.height,0,0,t,i),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,t,i).data,width:t,height:i,channels:4}}).then(u=>{const h=(u==null?void 0:u.output)||"";this.parent&&h&&!this.hasAltText()&&(this.altTextData={altText:h,decorative:!1})})}const o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(r,0,0,r.width,r.height,0,0,t,i)},Fl=new WeakSet,Qf=function(t){if(t){if(l(this,Dn)){const r=this._uiManager.imageManager.getSvgUrl(l(this,at));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,ot),i.getContext("2d").drawImage(l(this,ot),0,0),i.toDataURL()}if(l(this,Dn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*tr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*tr.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,ot),0,0,l(this,ot).width,l(this,ot).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,ot))},mm=new WeakSet,mx=function(){this._uiManager._signal&&(_(this,Wi,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&A(this,pm,px).call(this,i.width,i.height)})),l(this,Wi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Wi))==null||t.disconnect(),_(this,Wi,null)},{once:!0}))},G(Vc,"_type","stamp"),G(Vc,"_editorType",ee.STAMP);let O0=Vc;var Co,Nl,ai,ko,Gi,Xi,Yi,Jt,js,Ol,jl,bt,H,zs,vm,vx,Sd,B0,bd,U0,xd,$0,zl,Jf;const wn=class wn{constructor({uiManager:e,pageIndex:t,div:i,accessibilityManager:s,annotationLayer:r,drawLayer:o,textLayer:a,viewport:c,l10n:u}){p(this,vm);p(this,Sd);p(this,bd);p(this,xd);p(this,zl);p(this,Co,void 0);p(this,Nl,!1);p(this,ai,null);p(this,ko,null);p(this,Gi,null);p(this,Xi,null);p(this,Yi,null);p(this,Jt,new Map);p(this,js,!1);p(this,Ol,!1);p(this,jl,!1);p(this,bt,null);p(this,H,void 0);const h=[...l(wn,zs).values()];if(!wn._initialized){wn._initialized=!0;for(const d of h)d.initialize(u,e)}e.registerEditorTypes(h),_(this,H,e),this.pageIndex=t,this.div=i,_(this,Co,s),_(this,ai,r),this.viewport=c,_(this,bt,a),this.drawLayer=o,l(this,H).addLayer(this)}get isEmpty(){return l(this,Jt).size===0}get isInvisible(){return this.isEmpty&&l(this,H).getMode()===ee.NONE}updateToolbar(e){l(this,H).updateToolbar(e)}updateMode(e=l(this,H).getMode()){switch(A(this,zl,Jf).call(this),e){case ee.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ee.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ee.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(wn,zs).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,bt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,H).getMode()!==ee.INK)return;if(!e){for(const i of l(this,Jt).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,H).setEditingState(e)}addCommands(e){l(this,H).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,ai))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,Jt).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,H).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,ai))return;const t=l(this,ai).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,H).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;_(this,jl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of l(this,Jt).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(l(this,ai)){const r=l(this,ai).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,H).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(l(this,H).addChangedExistingAnnotation(c),c.renderAnnotationElement(o),c.show(!1)),o.show()}}A(this,zl,Jf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of l(wn,zs).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),_(this,jl,!1)}getEditableAnnotation(e){var t;return((t=l(this,ai))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,H).getActive()!==e&&l(this,H).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=l(this,bt))!=null&&e.div&&!l(this,Xi)&&(_(this,Xi,A(this,vm,vx).bind(this)),l(this,bt).div.addEventListener("pointerdown",l(this,Xi),{signal:l(this,H)._signal}),l(this,bt).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,bt))!=null&&e.div&&l(this,Xi)&&(l(this,bt).div.removeEventListener("pointerdown",l(this,Xi)),_(this,Xi,null),l(this,bt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Gi))return;const e=l(this,H)._signal;_(this,Gi,this.pointerdown.bind(this)),_(this,ko,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",l(this,Gi),{signal:e}),this.div.addEventListener("pointerup",l(this,ko),{signal:e})}disableClick(){l(this,Gi)&&(this.div.removeEventListener("pointerdown",l(this,Gi)),this.div.removeEventListener("pointerup",l(this,ko)),_(this,Gi,null),_(this,ko,null))}attach(e){l(this,Jt).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,H).isDeletedAnnotationElement(t)&&l(this,H).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Jt).delete(e.id),(t=l(this,Co))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,jl)&&e.annotationElementId&&l(this,H).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,H).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,Ol)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,H).addDeletedAnnotationElement(e.annotationElementId),ae.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,H).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,H).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Yi)&&(e._focusEventsAllowed=!1,_(this,Yi,setTimeout(()=>{_(this,Yi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,H)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,Co))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,H).getId()}get _signal(){return l(this,H)._signal}canCreateNewEmptyEditor(){var e;return(e=l(this,Sd,B0))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,H).updateToolbar(e),l(this,H).updateMode(e);const{offsetX:i,offsetY:s}=A(this,xd,$0).call(this),r=this.getNextId(),o=A(this,bd,U0).call(this,{parent:this,id:r,x:i,y:s,uiManager:l(this,H),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=l(wn,zs).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,H)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=A(this,bd,U0).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,H),isCentered:t,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(A(this,xd,$0).call(this),!0)}setSelected(e){l(this,H).setSelected(e)}toggleSelected(e){l(this,H).toggleSelected(e)}isSelected(e){return l(this,H).isSelected(e)}unselect(e){l(this,H).unselect(e)}pointerup(e){const{isMac:t}=Ot.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,js)){if(_(this,js,!1),!l(this,Nl)){_(this,Nl,!0);return}if(l(this,H).getMode()===ee.STAMP){l(this,H).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,H).getMode()===ee.HIGHLIGHT&&this.enableTextSelection(),l(this,js)){_(this,js,!1);return}const{isMac:t}=Ot.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;_(this,js,!0);const i=l(this,H).getActive();_(this,Nl,!i||i.isEmpty())}findNewParent(e,t,i){const s=l(this,H).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=l(this,H).getActive())==null?void 0:e.parent)===this&&(l(this,H).commitOrRemove(),l(this,H).setActiveEditor(null)),l(this,Yi)&&(clearTimeout(l(this,Yi)),_(this,Yi,null));for(const i of l(this,Jt).values())(t=l(this,Co))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,Jt).clear(),l(this,H).removeLayer(this)}render({viewport:e}){this.viewport=e,Fo(this.div,e);for(const t of l(this,H).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,H).commitOrRemove(),A(this,zl,Jf).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Fo(this.div,{rotation:i}),t!==i)for(const s of l(this,Jt).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,H).viewParameters.realScale}};Co=new WeakMap,Nl=new WeakMap,ai=new WeakMap,ko=new WeakMap,Gi=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Jt=new WeakMap,js=new WeakMap,Ol=new WeakMap,jl=new WeakMap,bt=new WeakMap,H=new WeakMap,zs=new WeakMap,vm=new WeakSet,vx=function(e){if(l(this,H).unselectAll(),e.target===l(this,bt).div){const{isMac:t}=Ot.platform;if(e.button!==0||e.ctrlKey&&t)return;l(this,H).showAllEditors("highlight",!0,!0),l(this,bt).div.classList.add("free"),Dp.startHighlighting(this,l(this,H).direction==="ltr",e),l(this,bt).div.addEventListener("pointerup",()=>{l(this,bt).div.classList.remove("free")},{once:!0,signal:l(this,H)._signal}),e.preventDefault()}},Sd=new WeakSet,B0=function(){return l(wn,zs).get(l(this,H).getMode())},bd=new WeakSet,U0=function(e){const t=l(this,Sd,B0);return t?new t.prototype.constructor(e):null},xd=new WeakSet,$0=function(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+s),u=(r+a)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},zl=new WeakSet,Jf=function(){_(this,Ol,!0);for(const e of l(this,Jt).values())e.isEmpty()&&e.remove();_(this,Ol,!1)},G(wn,"_initialized",!1),p(wn,zs,new Map([w0,R0,O0,Dp].map(e=>[e._editorType,e])));let H0=wn;var li,Cd,Ue,Hs,kd,W0,Td,G0,ym,yx;const et=class et{constructor({pageIndex:e}){p(this,Td);p(this,ym);p(this,li,null);p(this,Cd,0);p(this,Ue,new Map);p(this,Hs,new Map);this.pageIndex=e}setParent(e){if(!l(this,li)){_(this,li,e);return}if(l(this,li)!==e){if(l(this,Ue).size>0)for(const t of l(this,Ue).values())t.remove(),e.append(t);_(this,li,e)}}static get _svgFactory(){return ne(this,"_svgFactory",new Ww)}highlight(e,t,i,s=!1){const r=Ut(this,Cd)._++,o=A(this,Td,G0).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=et._svgFactory.createElement("defs");o.append(a);const c=et._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),s&&l(this,Hs).set(r,c);const h=A(this,ym,yx).call(this,a,u),d=et._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${u}`),l(this,Ue).set(r,o),{id:r,clipPathId:`url(#${h})`}}highlightOutline(e){const t=Ut(this,Cd)._++,i=A(this,Td,G0).call(this,e.box);i.classList.add("highlightOutline");const s=et._svgFactory.createElement("defs");i.append(s);const r=et._svgFactory.createElement("path");s.append(r);const o=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",o),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){i.classList.add("free");const h=et._svgFactory.createElement("mask");s.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const d=et._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=et._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=et._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),l(this,Ue).set(t,i),t}finalizeLine(e,t){const i=l(this,Hs).get(e);l(this,Hs).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,Ue).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),l(this,Hs).delete(e)}updatePath(e,t){l(this,Hs).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;A(i=et,kd,W0).call(i,l(this,Ue).get(e),t)}show(e,t){l(this,Ue).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,Ue).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,Ue).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,Ue).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,Ue).get(e).classList.add(t)}removeClass(e,t){l(this,Ue).get(e).classList.remove(t)}remove(e){l(this,li)!==null&&(l(this,Ue).get(e).remove(),l(this,Ue).delete(e))}destroy(){_(this,li,null);for(const e of l(this,Ue).values())e.remove();l(this,Ue).clear()}};li=new WeakMap,Cd=new WeakMap,Ue=new WeakMap,Hs=new WeakMap,kd=new WeakSet,W0=function(e,{x:t=0,y:i=0,width:s=1,height:r=1}={}){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},Td=new WeakSet,G0=function(e){var i;const t=et._svgFactory.create(1,1,!0);return l(this,li).append(t),t.setAttribute("aria-hidden",!0),A(i=et,kd,W0).call(i,t,e),t},ym=new WeakSet,yx=function(e,t){const i=et._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=et._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},p(et,kd);let V0=et;var RL=$.AbortException,LL=$.AnnotationEditorLayer,ML=$.AnnotationEditorParamsType,IL=$.AnnotationEditorType,DL=$.AnnotationEditorUIManager,wx=$.AnnotationLayer,_x=$.AnnotationMode,FL=$.CMapCompressionType,NL=$.ColorPicker,OL=$.DOMSVGFactory,jL=$.DrawLayer,zL=$.FeatureTest,Ym=$.GlobalWorkerOptions,HL=$.ImageKind,BL=$.InvalidPDFException,UL=$.MissingPDFException,$L=$.OPS,VL=$.Outliner,WL=$.PDFDataRangeTransport,GL=$.PDFDateString,XL=$.PDFWorker,YL=$.PasswordResponses,qL=$.PermissionFlag,KL=$.PixelsPerInch,QL=$.RenderingCancelledException,Ax=$.TextLayer,JL=$.UnexpectedResponseException,ZL=$.Util,eM=$.VerbosityLevel,tM=$.XfaLayer,nM=$.build,iM=$.createValidAbsoluteUrl,sM=$.fetchData,Ex=$.getDocument,rM=$.getFilenameFromUrl,oM=$.getPdfFilenameFromUrl,aM=$.getXfaPageViewport,lM=$.isDataScheme,cM=$.isPdfFile,uM=$.noContextMenu,hM=$.normalizeUnicode,dM=$.renderTextLayer,fM=$.setLayerDimensions,pM=$.shadow,gM=$.updateTextLayer,Zw=$.version;const mM=Object.freeze(Object.defineProperty({__proto__:null,AbortException:RL,AnnotationEditorLayer:LL,AnnotationEditorParamsType:ML,AnnotationEditorType:IL,AnnotationEditorUIManager:DL,AnnotationLayer:wx,AnnotationMode:_x,CMapCompressionType:FL,ColorPicker:NL,DOMSVGFactory:OL,DrawLayer:jL,FeatureTest:zL,GlobalWorkerOptions:Ym,ImageKind:HL,InvalidPDFException:BL,MissingPDFException:UL,OPS:$L,Outliner:VL,PDFDataRangeTransport:WL,PDFDateString:GL,PDFWorker:XL,PasswordResponses:YL,PermissionFlag:qL,PixelsPerInch:KL,RenderingCancelledException:QL,TextLayer:Ax,UnexpectedResponseException:JL,Util:ZL,VerbosityLevel:eM,XfaLayer:tM,build:nM,createValidAbsoluteUrl:iM,fetchData:sM,getDocument:Ex,getFilenameFromUrl:rM,getPdfFilenameFromUrl:oM,getXfaPageViewport:aM,isDataScheme:lM,isPdfFile:cM,noContextMenu:uM,normalizeUnicode:hM,renderTextLayer:dM,setLayerDimensions:fM,shadow:pM,updateTextLayer:gM,version:Zw},Symbol.toStringTag,{value:"Module"}));var Xe=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},vM=["onCopy","onCut","onPaste"],yM=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],wM=["onFocus","onBlur"],_M=["onInput","onInvalid","onReset","onSubmit"],AM=["onLoad","onError"],EM=["onKeyDown","onKeyPress","onKeyUp"],SM=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],bM=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],xM=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],CM=["onSelect"],kM=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],TM=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],PM=["onScroll"],RM=["onWheel"],LM=["onAnimationStart","onAnimationEnd","onAnimationIteration"],MM=["onTransitionEnd"],IM=["onToggle"],DM=["onChange"],FM=Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe(Xe([],vM,!0),yM,!0),wM,!0),_M,!0),AM,!0),EM,!0),SM,!0),bM,!0),xM,!0),CM,!0),kM,!0),TM,!0),PM,!0),RM,!0),LM,!0),MM,!0),DM,!0),IM,!0);function Sx(n,e){var t={};return FM.forEach(function(i){var s=n[i];s&&(e?t[i]=function(r){return s(r,e(i))}:t[i]=s)}),t}function Hd(n){var e=!1,t=new Promise(function(i,s){n.then(function(r){return!e&&i(r)}).catch(function(r){return!e&&s(r)})});return{promise:t,cancel:function(){e=!0}}}function bx(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=bx(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function qm(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=bx(n))&&(i&&(i+=" "),i+=e);return i}var NM=!0,Dv="Invariant failed";function pe(n,e){if(!n){if(NM)throw new Error(Dv);var t=typeof e=="function"?e():e,i=t?"".concat(Dv,": ").concat(t):Dv;throw new Error(i)}}var OM=function(){},jM=OM;const wt=JA(jM);var zA=Object.prototype.hasOwnProperty;function HA(n,e,t){for(t of n.keys())if(_a(t,e))return t}function _a(n,e){var t,i,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&_a(n[i],e[i]););return i===-1}if(t===Set){if(n.size!==e.size)return!1;for(i of n)if(s=i,s&&typeof s=="object"&&(s=HA(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(i of n)if(s=i[0],s&&typeof s=="object"&&(s=HA(e,s),!s)||!_a(i[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((i=n.byteLength)===e.byteLength)for(;i--&&n.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(zA.call(n,t)&&++i&&!zA.call(e,t)||!(t in e)||!_a(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}const zM=P.createContext(null),xx=zM;function Aa({children:n,type:e}){return k.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const HM="noopener noreferrer nofollow";class BM{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return pe(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){pe(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{pe(this.pdfDocument,"PDF document not loaded."),pe(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{pe(Array.isArray(t),`"${t}" is not a valid destination array.`);const i=t[0];new Promise(s=>{pe(this.pdfDocument,"PDF document not loaded."),i instanceof Object?this.pdfDocument.getPageIndex(i).then(r=>{s(r)}).catch(()=>{pe(!1,`"${i}" is not a valid page reference.`)}):typeof i=="number"?s(i):pe(!1,`"${i}" is not a valid destination reference.`)}).then(s=>{const r=s+1;pe(this.pdfViewer,"PDF viewer is not initialized."),pe(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;pe(this.pdfViewer,"PDF viewer is not initialized."),pe(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||HM,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const UM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},BA=UM,Km=typeof window<"u",Cx=Km&&window.location.protocol==="file:";function $M(n){return typeof n<"u"}function cr(n){return $M(n)&&n!==null}function VM(n){return typeof n=="string"}function WM(n){return n instanceof ArrayBuffer}function GM(n){return pe(Km,"isBlob can only be used in a browser environment"),n instanceof Blob}function X0(n){return VM(n)&&/^data:/.test(n)}function UA(n){pe(X0(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function XM(){return Km&&window.devicePixelRatio||1}const kx="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function $A(){wt(!Cx,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${kx}`)}function YM(){wt(!Cx,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${kx}`)}function jo(n){n!=null&&n.cancel&&n.cancel()}function Y0(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function qM(n){return n.name==="RenderingCancelledException"}function KM(n){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}function QM(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Yl(){return P.useReducer(QM,{value:void 0,error:void 0})}var JM=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{u(i.next(h))}catch(d){o(d)}}function c(h){try{u(i.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):s(h.value).then(a,c)}u((i=i.apply(n,e||[])).next())})},VA=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};const{PDFDataRangeTransport:ZM}=mM,eI=(n,e)=>{switch(e){case BA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case BA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function WA(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const tI=P.forwardRef(function(e,t){var{children:i,className:s,error:r="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:a,file:c,inputRef:u,imageResourcesPath:h,loading:d="Loading PDF…",noData:f="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:w,onLoadSuccess:S,onPassword:v=eI,onSourceError:y,onSourceSuccess:E,options:b,renderMode:x,rotate:C}=e,T=VA(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[R,I]=Yl(),{value:M,error:F}=R,[Y,V]=Yl(),{value:U,error:K}=Y,J=P.useRef(new BM),N=P.useRef([]),L=P.useRef(void 0),z=P.useRef(void 0);c&&c!==L.current&&WA(c)&&(wt(!_a(c,L.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),L.current=c),b&&b!==z.current&&(wt(!_a(b,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=b);const B=P.useRef({scrollPageIntoView:ge=>{const{dest:De,pageNumber:ht,pageIndex:Ge=ht-1}=ge;if(g){g({dest:De,pageIndex:Ge,pageNumber:ht});return}const Vo=N.current[Ge];if(Vo){Vo.scrollIntoView();return}wt(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(t,()=>({linkService:J,pages:N,viewer:B}),[]);function se(){E&&E()}function X(){F&&(wt(!1,F.toString()),y&&y(F))}function ce(){I({type:"RESET"})}P.useEffect(ce,[c,I]);const Ie=P.useCallback(()=>JM(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return X0(c)?{data:UA(c)}:($A(),{url:c});if(c instanceof ZM)return{range:c};if(WM(c))return{data:c};if(Km&&GM(c))return{data:yield KM(c)};if(pe(typeof c=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),pe(WA(c),"Invalid parameter object: need either .data, .range or .url"),"url"in c&&typeof c.url=="string"){if(X0(c.url)){const{url:ge}=c,De=VA(c,["url"]),ht=UA(ge);return Object.assign({data:ht},De)}$A()}return c}),[c]);P.useEffect(()=>{const ge=Hd(Ie());return ge.promise.then(De=>{I({type:"RESOLVE",value:De})}).catch(De=>{I({type:"REJECT",error:De})}),()=>{jo(ge)}},[Ie,I]),P.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){X();return}se()}},[M]);function Ze(){U&&(S&&S(U),N.current=new Array(U.numPages),J.current.setDocument(U))}function Ae(){K&&(wt(!1,K.toString()),m&&m(K))}P.useEffect(function(){V({type:"RESET"})},[V,M]),P.useEffect(function(){if(!M)return;const De=b?Object.assign(Object.assign({},M),b):M,ht=Ex(De);w&&(ht.onProgress=w),v&&(ht.onPassword=v);const Ge=ht,Vo=Ge.promise.then(tc=>{V({type:"RESOLVE",value:tc})}).catch(tc=>{Ge.destroyed||V({type:"REJECT",error:tc})});return()=>{Vo.finally(()=>Ge.destroy())}},[b,V,M]),P.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){Ae();return}Ze()}},[U]),P.useEffect(function(){J.current.setViewer(B.current),J.current.setExternalLinkRel(o),J.current.setExternalLinkTarget(a)},[o,a]);const re=P.useCallback((ge,De)=>{N.current[ge]=De},[]),Rt=P.useCallback(ge=>{delete N.current[ge]},[]),Hn=P.useMemo(()=>({imageResourcesPath:h,linkService:J.current,onItemClick:g,pdf:U,registerPage:re,renderMode:x,rotate:C,unregisterPage:Rt}),[h,g,U,re,x,C,Rt]),Ce=P.useMemo(()=>Sx(T,()=>U),[T,U]);function Zl(){return k.jsx(xx.Provider,{value:Hn,children:i})}function ec(){return c?U==null?k.jsx(Aa,{type:"loading",children:typeof d=="function"?d():d}):U===!1?k.jsx(Aa,{type:"error",children:typeof r=="function"?r():r}):Zl():k.jsx(Aa,{type:"no-data",children:typeof f=="function"?f():f})}return k.jsx("div",Object.assign({className:qm("react-pdf__Document",s),ref:u,style:{"--scale-factor":"1"}},Ce,{children:ec()}))}),Tx=tI;function Px(){return P.useContext(xx)}function Rx(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(r){t.forEach(function(o){typeof o=="function"?o(r):o&&(o.current=r)})}}const nI=P.createContext(null),Lx=nI,Mx={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},iI=/^H(\d+)$/;function sI(n){return n in Mx}function Qm(n){return"children"in n}function Ix(n){return Qm(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function rI(n){const e={};if(Qm(n)){const{role:t}=n,i=t.match(iI);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(sI(t)){const s=Mx[t];s&&(e.role=s)}}return e}function Dx(n){const e={};if(Qm(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),Ix(n)){const[t]=n.children;if(t){const i=Dx(t);return Object.assign(Object.assign({},e),i)}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function oI(n){return n?Object.assign(Object.assign({},rI(n)),Dx(n)):null}function Fx({className:n,node:e}){const t=P.useMemo(()=>oI(e),[e]),i=P.useMemo(()=>!Qm(e)||Ix(e)?null:e.children.map((s,r)=>k.jsx(Fx,{node:s},r)),[e]);return k.jsx("span",Object.assign({className:n},t,{children:i}))}function Jm(){return P.useContext(Lx)}function aI(){const n=Jm();pe(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[i,s]=Yl(),{value:r,error:o}=i,{customTextRenderer:a,page:c}=n;function u(){r&&t&&t(r)}function h(){o&&(wt(!1,o.toString()),e&&e(o))}return P.useEffect(function(){s({type:"RESET"})},[s,c]),P.useEffect(function(){if(a||!c)return;const f=Hd(c.getStructTree()),g=f;return f.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>jo(g)},[a,c,s]),P.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?k.jsx(Fx,{className:"react-pdf__Page__structTree structTree",node:r}):null}const GA=_x;function lI(n){const e=Jm();pe(e,"Unable to find Page context.");const t=Object.assign(Object.assign({},e),n),{_className:i,canvasBackground:s,devicePixelRatio:r=XM(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:g}=n;pe(c,"Attempted to render page canvas, but no page was specified.");const m=P.useRef(null);function w(){c&&a&&a(Y0(c,f))}function S(b){qM(b)||(wt(!1,b.toString()),o&&o(b))}const v=P.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),y=P.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);P.useEffect(function(){if(!c)return;c.cleanup();const{current:x}=m;if(!x)return;x.width=v.width,x.height=v.height,x.style.width=`${Math.floor(y.width)}px`,x.style.height=`${Math.floor(y.height)}px`,x.style.visibility="hidden";const C={annotationMode:u?GA.ENABLE_FORMS:GA.ENABLE,canvasContext:x.getContext("2d",{alpha:!1}),viewport:v};s&&(C.background=s);const T=c.render(C),R=T;return T.promise.then(()=>{x.style.visibility="",w()}).catch(S),()=>jo(R)},[s,c,u,v,y]);const E=P.useCallback(()=>{const{current:b}=m;b&&(b.width=0,b.height=0)},[]);return P.useEffect(()=>E,[E]),k.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:Rx(g,m),style:{display:"block",userSelect:"none"},children:h?k.jsx(aI,{}):null})}function cI(n){return"str"in n}function uI(){const n=Jm();pe(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:h}=n;pe(o,"Attempted to load page text content, but no page was specified.");const[d,f]=Yl(),{value:g,error:m}=d,w=P.useRef(null),S=P.useRef(void 0);wt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function v(){g&&i&&i(g)}function y(){m&&(wt(!1,m.toString()),t&&t(m))}P.useEffect(function(){f({type:"RESET"})},[o,f]),P.useEffect(function(){if(!o)return;const I=Hd(o.getTextContent()),M=I;return I.promise.then(F=>{f({type:"RESOLVE",value:F})}).catch(F=>{f({type:"REJECT",error:F})}),()=>jo(M)},[o,f]),P.useEffect(()=>{if(g!==void 0){if(g===!1){y();return}v()}},[g]);const E=P.useCallback(()=>{r&&r()},[r]),b=P.useCallback(R=>{wt(!1,R.toString()),s&&s(R)},[s]);function x(){const R=S.current;R&&R.classList.add("active")}function C(){const R=S.current;R&&R.classList.remove("active")}const T=P.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return P.useLayoutEffect(function(){if(!o||!g)return;const{current:I}=w;if(!I)return;I.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),F={container:I,textContentSource:M,viewport:T},Y=new Ax(F),V=Y;return Y.render().then(()=>{const U=document.createElement("div");U.className="endOfContent",I.append(U),S.current=U;const K=I.querySelectorAll('[role="presentation"]');if(e){let J=0;g.items.forEach((N,L)=>{if(!cI(N))return;const z=K[J];if(!z)return;const B=e(Object.assign({pageIndex:a,pageNumber:c,itemIndex:L},N));z.innerHTML=B,J+=N.str&&N.hasEOL?2:1})}E()}).catch(b),()=>jo(V)},[e,b,E,o,a,c,g,T]),k.jsx("div",{className:qm("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:x,ref:w})}function hI(){const n=Px(),e=Jm();pe(e,"Unable to find Page context.");const t=Object.assign(Object.assign({},n),e),{imageResourcesPath:i,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:c,page:u,pdf:h,renderForms:d,rotate:f,scale:g=1}=t;pe(h,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),pe(u,"Attempted to load page annotations, but no page was specified."),pe(s,"Attempted to load page annotations, but no linkService was specified.");const[m,w]=Yl(),{value:S,error:v}=m,y=P.useRef(null);wt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){S&&o&&o(S)}function b(){v&&(wt(!1,v.toString()),r&&r(v))}P.useEffect(function(){w({type:"RESET"})},[w,u]),P.useEffect(function(){if(!u)return;const I=Hd(u.getAnnotations()),M=I;return I.promise.then(F=>{w({type:"RESOLVE",value:F})}).catch(F=>{w({type:"REJECT",error:F})}),()=>{jo(M)}},[w,u]),P.useEffect(()=>{if(S!==void 0){if(S===!1){b();return}E()}},[S]);function x(){c&&c()}function C(R){wt(!1,`${R}`),a&&a(R)}const T=P.useMemo(()=>u.getViewport({scale:g,rotation:f}),[u,f,g]);return P.useEffect(function(){if(!h||!u||!s||!S)return;const{current:I}=y;if(!I)return;const M=T.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:I,l10n:null,page:u,viewport:M},Y={annotations:S,annotationStorage:h.annotationStorage,div:I,imageResourcesPath:i,linkService:s,page:u,renderForms:d,viewport:M};I.innerHTML="";try{new wx(F).render(Y),x()}catch(V){C(V)}return()=>{}},[S,i,s,u,h,d,T]),k.jsx("div",{className:qm("react-pdf__Page__annotations","annotationLayer"),ref:y})}var dI=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};const XA=1;function Nx(n){const e=Px(),t=Object.assign(Object.assign({},e),n),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:g,inputRef:m,loading:w="Loading page…",noData:S="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:y,onGetStructTreeError:E,onGetStructTreeSuccess:b,onGetTextError:x,onGetTextSuccess:C,onLoadError:T,onLoadSuccess:R,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:Y,onRenderTextLayerError:V,onRenderTextLayerSuccess:U,pageIndex:K,pageNumber:J,pdf:N,registerPage:L,renderAnnotationLayer:z=!0,renderForms:B=!1,renderMode:se="canvas",renderTextLayer:X=!0,rotate:ce,scale:Ie=XA,unregisterPage:Ze,width:Ae}=t,re=dI(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Rt,Hn]=Yl(),{value:Ce,error:Zl}=Rt,ec=P.useRef(null);pe(N,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ge=cr(J)?J-1:K??null,De=J??(cr(K)?K+1:null),ht=ce??(Ce?Ce.rotate:null),Ge=P.useMemo(()=>{if(!Ce)return null;let Wo=1;const Ud=Ie??XA;if(Ae||g){const $d=Ce.getViewport({scale:1,rotation:ht});Ae?Wo=Ae/$d.width:g&&(Wo=g/$d.height)}return Ud*Wo},[g,Ce,ht,Ie,Ae]);P.useEffect(function(){return()=>{cr(ge)&&s&&Ze&&Ze(ge)}},[s,N,ge,Ze]);function Vo(){if(R){if(!Ce||!Ge)return;R(Y0(Ce,Ge))}if(s&&L){if(!cr(ge)||!ec.current)return;L(ge,ec.current)}}function tc(){Zl&&(wt(!1,Zl.toString()),T&&T(Zl))}P.useEffect(function(){Hn({type:"RESET"})},[Hn,N,ge]),P.useEffect(function(){if(!N||!De)return;const Ud=Hd(N.getPage(De)),$d=Ud;return Ud.promise.then(Zm=>{Hn({type:"RESOLVE",value:Zm})}).catch(Zm=>{Hn({type:"REJECT",error:Zm})}),()=>jo($d)},[Hn,N,De]),P.useEffect(()=>{if(Ce!==void 0){if(Ce===!1){tc();return}Vo()}},[Ce,Ge]);const Ox=P.useMemo(()=>Ce&&cr(ge)&&De&&cr(ht)&&cr(Ge)?{_className:i,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:v,onGetAnnotationsSuccess:y,onGetStructTreeError:E,onGetStructTreeSuccess:b,onGetTextError:x,onGetTextSuccess:C,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:Y,onRenderTextLayerError:V,onRenderTextLayerSuccess:U,page:Ce,pageIndex:ge,pageNumber:De,renderForms:B,renderTextLayer:X,rotate:ht,scale:Ge}:null,[i,r,h,d,v,y,E,b,x,C,I,M,F,Y,V,U,Ce,ge,De,B,X,ht,Ge]),jx=P.useMemo(()=>Sx(re,()=>Ce&&(Ge?Y0(Ce,Ge):void 0)),[re,Ce,Ge]),Bd=`${ge}@${Ge}/${ht}`;function zx(){switch(se){case"custom":return pe(u,'renderMode was set to "custom", but no customRenderer was passed.'),k.jsx(u,{},`${Bd}_custom`);case"none":return null;case"canvas":default:return k.jsx(lI,{canvasRef:o},`${Bd}_canvas`)}}function Hx(){return X?k.jsx(uI,{},`${Bd}_text`):null}function Bx(){return z?k.jsx(hI,{},`${Bd}_annotations`):null}function Ux(){return k.jsxs(Lx.Provider,{value:Ox,children:[zx(),Hx(),Bx(),a]})}function $x(){return De?N===null||Ce===void 0||Ce===null?k.jsx(Aa,{type:"loading",children:typeof w=="function"?w():w}):N===!1||Ce===!1?k.jsx(Aa,{type:"error",children:typeof f=="function"?f():f}):Ux():k.jsx(Aa,{type:"no-data",children:typeof S=="function"?S():S})}return k.jsx("div",Object.assign({className:qm(i,c),"data-page-number":De,ref:Rx(m,ec),style:{"--scale-factor":`${Ge}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},jx,{children:$x()}))}YM();Ym.workerSrc="pdf.worker.mjs";Ym.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Zw}/pdf.worker.js`;const YA="ResumeCV.pdf";function fI(){const[n,e]=P.useState(null),[t,i]=P.useState(1),s=({numPages:a})=>{e(a)},r=()=>{t>1&&i(t-1)},o=()=>{t<n&&i(t+1)};return k.jsx(nr.Fragment,{children:k.jsxs("div",{className:"fade-in-element",children:[k.jsx("h1",{children:"Resume"}),k.jsxs("div",{className:"centerbox",children:[k.jsx("button",{onClick:()=>window.open(YA,"_blank"),children:"Open as PDF"}),k.jsx("button",{onClick:r,disabled:t===1,children:"Previous Page"}),k.jsx("button",{onClick:o,disabled:t===n,children:"Next Page"})]}),k.jsx(Tx,{file:YA,onLoadSuccess:s,children:k.jsx(Nx,{pageNumber:t,renderTextLayer:!1})})]})})}Ym.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Zw}/pdf.worker.js`;const qA="Dissertation.pdf";function pI(){const[n,e]=P.useState(null),[t,i]=P.useState(1),s=({numPages:a})=>{e(a)},r=()=>{t>1&&i(t-1)},o=()=>{t<n&&i(t+1)};return k.jsx(nr.Fragment,{children:k.jsxs("div",{className:"fade-in-element",children:[k.jsx("h1",{children:"Dissertation"}),k.jsxs("div",{className:"centerbox",children:[k.jsx("button",{onClick:()=>window.open(qA,"_blank"),children:"Open as PDF"}),k.jsx("button",{onClick:r,disabled:t===1,children:"Previous Page"}),k.jsx("button",{onClick:o,disabled:t===n,children:"Next Page"})]}),k.jsx(Tx,{file:qA,onLoadSuccess:s,children:k.jsx(Nx,{pageNumber:t,renderTextLayer:!1})})]})})}function gI(){const n=P.useRef(null),e=P.useRef(null),t=P.useRef(null),i=P.useRef(null),s={homeRef:n,aboutRef:e,resumeRef:t,dissertRef:i};return k.jsx(nr.Fragment,{children:k.jsx(hP,{children:k.jsxs(Cf,{path:"/",element:k.jsx(xP,{refs:s}),children:[k.jsx(Cf,{index:!0,element:k.jsxs("div",{children:[k.jsx("div",{ref:n,children:k.jsx(TP,{})}),k.jsx("div",{ref:e,children:k.jsx(kP,{})}),k.jsx("div",{ref:t,children:k.jsx(fI,{})}),k.jsx("div",{ref:i,children:k.jsx(pI,{})})]})}),k.jsx(Cf,{path:"*",element:k.jsx(CP,{})})]})})})}Fv.createRoot(document.getElementById("root")).render(k.jsx(wP,{children:k.jsx(gI,{})}));
